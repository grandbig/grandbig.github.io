---
layout: post
title: "GitでリモートにPushした内容を取り消したい！！"
date: 2016-07-16 22:58
comments: true
categories: git
---

###SourceTreeでgit resetを使いこなそう！
さて、本日は **Git** について書きます。  
皆さんは、GitでリモートにPushした内容を取り消したくなることがありませんでしょうか？  
そんなときに利用するのが`git reset`コマンドです。  

リモートにPushした内容ということは自分だけの範疇では収まらないため、他の人に影響が出るかもしれません。  
それって考えてみると非常に怖いですよね...。  
しかし、どうしてもリモートの内容を修正したいことが出てきます。  
今回はそんな不安を跳ね飛ばすべく実際に練習してみました。  

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!-- more -->

###git reset
今回扱うGitのRepositoryはこちらです。  
![Git Repository](/images/git_reset_1.png)  

では実際に`git reset`を実行してみましょう。  

####git reset --soft
まずは`git reset --soft`を実行してみます。  
SourceTreeでは下記の手順で実行します。  

1．元に戻したいポイントで右クリック  
2．「このコミットまでmasterを元に戻す」を選択  
3．モードで **Soft** を選択する

![Softモード](/images/git_reset_2.png)  

これでローカル上でコミット前の`master`に戻せます。  
`master`に反映した分を別ブランチに持って行きたい場合は別ブランチを切って、そちらにコミットすれば良いです。  

![別ブランチに反映](/images/git_reset_3.png)  

続いて、リモートの`master`からプッシュ分を取り除くためには、ローカルの`master`の状態をプッシュしなくてはなりません。  
SourceTreeでは強制プッシュはデフォルトでOFFになっているため、設定を変更する必要があります。  

![SourceTreeで強制プッシュをONに変更](/images/git_reset_4.png)  

4．強制プッシュを実行する  

これにより、Gitの状態は下図のようになります。  
![Git Repositoryの結果](/images/git_reset_5.png)  

####git reset --mixed
続いて`git reset --mixed`を実行してみます。  

1．元に戻したいポイントで右クリック  
2．「このコミットまでmasterを元に戻す」を選択  
3．モードで **Mixed** を選択する  

![Mixedモード](/images/git_reset_6.png)  

これでローカル上でコミット前の`master`に戻せます。  
`soft`と異なるのは **コミットだけでなくaddも取り除ける** ということです。  

![mixedを実行した状態](/images/git_reset_7.png)  

もちろん`soft`のときと同様に別ブランチに内容を反映させることができます。  

![別ブランチに反映](/images/git_reset_8.png)  

4．強制プッシュを実行する  

強制プッシュ実行後は下図のようになります。  

![Git Repositoryの結果](/images/git_reset_9.png)  

####git reset --hard
最後に`git reset --hard`を実行してみます。  

1．元に戻したいポイントで右クリック  
2．「このコミットまでmasterを元に戻す」を選択  
3．モードで **Hard** を選択する  

![Hardモード](/images/git_reset_10.png)  

これでローカル上でコミット前の`master`に戻せます。  
`soft`や`mixed`と異なり、作業内容が一切削除されます。  

![hardを実行した状態](/images/git_reset_11.png)  

4．強制プッシュを実行する  

強制プッシュ実行後は下図のようになります。  

![Git Repositoryの結果](/images/git_reset_9.png)  

###まとめ
さていかがでしたでしょうか？  
通常はあまりやりたくない操作ではありますが、必要となるタイミングは必ずくるはずなので知っておいて損はないでしょう。  
筆者も早速3連休明けから使いそうな予感が...。  
と言ったところで本日はここまで。  


<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
