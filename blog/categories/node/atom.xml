<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: node | Takahiro Octopress Blog]]></title>
  <link href="http://grandbig.github.io/blog/categories/node/atom.xml" rel="self"/>
  <link href="http://grandbig.github.io/"/>
  <updated>2016-12-25T13:07:27+09:00</updated>
  <id>http://grandbig.github.io/</id>
  <author>
    <name><![CDATA[Takahiro]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Server Side Swift: Perfect ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/10/30/swift-perfect/"/>
    <updated>2016-10-30T22:48:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/10/30/swift-perfect</id>
    <content type="html"><![CDATA[<h3>Server Side Swiftãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®Perfect</h3>

<p>æœ¬æ—¥ã¯ä»¥å‰æ›¸ã„ãŸã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã®ç¶šãã‚’æ›¸ãã¾ã™ï¼<br/>
ã¨è¨€ã„ãŸã‹ã£ãŸã¨ã“ã‚ãªã®ã§ã™ãŒã€Swift Expressã¯Swift3.0ã‚„Xcode8ã«å¯¾å¿œã—ã¦ãŠã‚‰ãšã€ä½•ã‚‚ã§ããªã‹ã£ãŸãŸã‚ã€æ–¹å‘è»¢æ›ã—ã¦æœ€ã‚‚STARæ•°ã®å¤šã„<a href="https://github.com/PerfectlySoft/Perfect">PerfectlySoft/Perfect</a>ã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>

<p>ã‚ˆãã‚ˆãè¦‹ã‚‹ã¨MySQLã ã‘ã§ãªãMongoDBæ¥ç¶šç”¨ã«ã‚‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ãªã‹ãªã‹è‰¯ã•ãã†ã§ã¯ãªã„ã§ã™ã‹ï¼ï¼<br/>
ã¨ã¯è¨€ã„ã¤ã¤ã‚‚ã€ãã‚“ãªã«ã™ãã«Master Of Perfectã«ã¯ãªã‚Œãªã„ã®ã§å°‘ã—ãšã¤è¦‹ã¦ã„ãã“ã¨ã«ã—ã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- more -->


<h4>ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è§¦ã£ã¦ã¿ã‚‹</h4>

<p>ã¾ãšã¯ä½•ã¯ã¨ã‚‚ã‚ã‚ŒGitHubã® <em>Getting Started</em> ã‹ã‚‰ã‚„ã‚‰ãªã„ã¨è©±ã«ãªã‚Šã¾ã›ã‚“ã€‚<br/>
æ‰‹é †ã¯ç°¡å˜ã§ã™ã€‚</p>

<p>ï¼‘ï¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹<br/>
<code>git clone https://github.com/PerfectlySoft/PerfectTemplate.git</code></p>

<p>ï¼’ï¼ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹<br/>
ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸ<code>PerfectTemplate</code>ãƒ•ã‚©ãƒ«ãƒ€å†…ã«å…¥ã‚Šã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚</p>

<p><code>
$ cd PerfectTemplate
$ swift build
</code></p>

<p>ï¼“ï¼ã‚µãƒ¼ãƒã‚’èµ·å‹•ã—ã¾ã™<br/>
ãªã‚“ã¨å¾Œã¯ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§ã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹ã ã‘ã§ã™ã€‚</p>

<p><code>.build/debug/PerfectTemplate</code></p>

<p>æ­£ã—ãèµ·å‹•ã™ã‚Œã°ã€ä¸‹è¨˜ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚<br/>
<code>Starting HTTP server on 0.0.0.0:8181 with document root ./webroot</code><br/>
ã¾ãŸãƒ­ã‚°ã®æŒ‡ç¤ºé€šã‚ŠChromeã§<code>http://localhost:8181/</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚Œã°<code>Hello World</code>ãŒæ‹ã‚ã¾ã™ã€‚</p>

<h4>ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ›¸ãæ–¹ã«ã¤ã„ã¦å­¦ã¶</h4>

<p>ã§ã¯æ¬¡ã«ç°¡å˜ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ã¤ã„ã¦å­¦ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚<br/>
ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ä¸‹è¨˜GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿å—ã‘ä»˜ã‘ã¦ã„ã¾ã—ãŸã€‚</p>

<p>```javascript
// main.swift
var routes = Routes()
routes.add(method: .get, uri: &ldquo;/&rdquo;, handler: {</p>

<pre><code>request, response in
response.setHeader(.contentType, value: "text/html")
response.appendBody(string: "&lt;html&gt;&lt;title&gt;Hello, world!&lt;/title&gt;&lt;body&gt;Hello, world!&lt;/body&gt;&lt;/html&gt;")
response.completed()
</code></pre>

<p>})
```</p>

<p>æœ€ã‚‚å˜ç´”ãªGETãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã­ã€‚<br/>
ã§ã¯ã€<code>ID: 100</code>ã®ãƒ¦ãƒ¼ã‚¶æƒ…å ±ã‚’å–å¾—ã™ã‚‹GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã©ã†å—ã‘ä»˜ã‘ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚</p>

<p>```javascript
// main.swift
var routes = Routes()
routes.add(method: .get, uri: &ldquo;/user/{id}&rdquo;, handler: {</p>

<pre><code>request, response in
response.setHeader(.contentType, value: "text/html")
response.appendBody(string: "&lt;html&gt;&lt;title&gt;Sample&lt;/title&gt;&lt;body&gt;You GET UserInfo with \(request.urlVariables)&lt;/body&gt;&lt;/html&gt;")
response.completed()
</code></pre>

<p>})
```</p>

<p>ãŸã£ãŸã®ã“ã‚Œã ã‘ã§ã™ã€‚<br/>
ã§ã¯ã€POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å—ã‘ä»˜ã‘ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚</p>

<p>```javascript
// main.swift
var routes = Routes()
routes.add(method: .post, uri: &ldquo;/user&rdquo;, handler: {</p>

<pre><code>request, response in
response.appendBody(string: "&lt;html&gt;&lt;title&gt;Sample&lt;/title&gt;&lt;body&gt;You POSTed user data to catch your POST request.&lt;/body&gt;&lt;/html&gt;")
response.completed()
</code></pre>

<p>})
```</p>

<p>ã“ã‚Œã‚‚ç°¡å˜ã§ã™ã­ã€‚<br/>
æ›¸ãæ–¹ã«è‹¥å¹²ã®é•ã„ã¯ã‚ã‚Œã©ã€æœ€æ—©Node.jsã¨ãã‚“ãªã«å¤‰ã‚ã‚‰ã‚“&hellip;</p>

<p>ãŠã¾ã‘ã§ã€POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å±Šã„ãŸJSONStringã‚’ãƒãƒ©ãƒãƒ©ã£ã¨åˆ†è§£ã—ã¦è¿”å´ã—ã¦ã¿ã¾ã—ãŸã€‚<br/>
ãã®ãŸã‚ã«ã¾ãšã¯JSONStringã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>

<p>```javascript
// decode.swift
import PerfectHTTPServer
import PerfectLib</p>

<p>func decode(postBody: String?) &ndash;> [String: Any]? {</p>

<pre><code>do {
    guard let decoded = try postBody?.jsonDecode() as? [String:Any] else {
        return [:]
    }
    print(decoded)
    return decoded
} catch {
    return [:]
}
</code></pre>

<p>}
```</p>

<p>ã“ã‚Œã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«åˆ©ç”¨ã—ã¾ã™ã€‚</p>

<p>```javascript
// main.swift
var routes = Routes()
routes.add(method: .post, uri: &ldquo;/user&rdquo;, handler: {</p>

<pre><code>request, response in

var userInfo = ""
let decodedParam = decode(postBody: request.postBodyString)
for (key, value) in decodedParam! {
    switch key {
        case "name":
            userInfo = userInfo + "name is \(value as! String).\n"
        case "email":
            userInfo = userInfo + "email is \(value as! String)."
        default:
            break
    }
}
response.appendBody(string: "&lt;html&gt;&lt;body&gt;POST handler: \(userInfo)&lt;/body&gt;&lt;/html&gt;")
response.completed()
</code></pre>

<p>})
```</p>

<p>ã•ã¦ã€å®Ÿè£…ã§ããŸã®ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã¿ã¾ã™ã€‚</p>

<p><code>
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¾ã™
curl http://localhost:8181/user -X POST -H "Content-Type: application/json" -d '{"name":"Ichiro", "email": "xxx@gmail.com"}'
// çµæœ
&lt;html&gt;&lt;body&gt;POST handler: name is Ichiro.
email is xxx@gmail.com.&lt;/body&gt;&lt;/html&gt;xxxx:PerfectTemplate
</code></p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦ä»Šå›ã¯<code>Perfect</code>ã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã‚’è¦‹ã¦ã¿ã¾ã—ãŸã€‚<br/>
ã¾ã ã¾ã åŸºæœ¬çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å—ä»˜ã—ã‹ã¿ã¦ã„ã¾ã›ã‚“ãŒã€æ—¢ã«ã„ã‚ã„ã‚ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ç¶™ç¶šçš„ã«è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ã‚„ã£ã±ã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚‹ãªã‚‰ã€æœ€æ–°ã®çŠ¶æ³ã«ã¤ã„ã¦ã„ã‹ãªã„ã¨è¦‹æ¨ã¦ã‚‰ã‚Œã‚‹ãªã€œã¨æ€ã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚<br/>
(ä»Šå›ã§è¨€ã†ã¨ã€Swift3ã‚„Xcode8ã¨ã‹ã§ã™ã­ã€‚)</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Node.jsã§routerãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/10/30/node-router/"/>
    <updated>2016-10-30T00:00:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/10/30/node-router</id>
    <content type="html"><![CDATA[<h3>Expressãªã—ã§ç°¡å˜ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã—ã‚ˆã†ï¼</h3>

<p>ã•ã¦ã€ä¹…ã—ã¶ã‚Šã«Node.jsã«ã¤ã„ã¦æ›¸ãã¾ã™ã€‚<br/>
ç­†è€…ãŒæœ¬æ ¼çš„ã«Node.jsã‚’åˆ©ç”¨ã—ã¦ã„ãŸã®ã¯3ã€œ4å¹´å‰ã ã£ãŸãŸã‚ã€Expressã‚’ã‚ˆãåˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚<br/>
ãã®å¾Œã€Expressã‚’åˆ©ç”¨ã™ã‚‹ã»ã©ã®ãƒªãƒƒãƒãªæ©Ÿèƒ½ã‚’å¿…è¦ã¨ã—ãªã„ã€ç°¡æ˜“çš„ãªãƒ‡ãƒ¢ç”¨ã®ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®ä»•çµ„ã¿ã‚’ä½œã‚‹ã®ã«ãƒãƒªãƒãƒªè‡ªä½œãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚<br/>
ã—ã‹ã—ã€ã“ã“ã«ãã¦Expressã‚’åˆ©ç”¨ã™ã‚‹ã§ã‚‚ãªãã€ã‹ã¨è¨€ã£ã¦è‡ªä½œã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‡¦ç†ã‚’æ›¸ãã®ã‚‚è‹¥å¹²é¢å€’ã ã¨æ„Ÿã˜ã‚‹ã¨ãæœãŸã—ã¦ã©ã†ã™ã‚Œã°è‰¯ã„ã®ã‹ãµã¨æ°—ã«ãªã‚Šã¾ã—ãŸã€‚<br/>
ã€Œãã£ã¨ä»Šã®ä¸–ã®ä¸­ãªã‚‰ä½•ã‚‰ã‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå‡ºã¦ã„ã‚‹ã¯ãšï¼ã€ã¨æ€ã£ãŸç­†è€…ã¯æ—©é€Ÿæ¢ã—ã¦ã¿ã‚‹ã“ã¨ã«&hellip;</p>

<p>ãã“ã§è¦‹ã¤ã‘ãŸã®ãŒ<a href="https://github.com/pillarjs/router">router</a>ã§ã™ã€‚<br/>
ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚Œã°ã€æ¬¡ã®ã‚ˆã†ã«ç°¡å˜ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- more -->


<p>```javascript
// server.js
var http = require(&ldquo;http&rdquo;);
var Router = require(&ldquo;router&rdquo;);
var finalhandler = require(&lsquo;finalhandler&rsquo;);
var bodyParser   = require(&lsquo;body-parser&rsquo;);</p>

<p>function start(route) {</p>

<pre><code>var opts = { mergeParams: true }
var router = Router(opts);
var server = http.createServer(function onRequest(req, res) {
    router(req, res, finalhandler(req, res));
});

// GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
var user = Router(opts);
router.use('/users/:path', user);

user.get('/', function (req, res) {
    res.statusCode = 200
    res.setHeader('Content-Type', 'text/plain; charset=utf-8')
    res.end(req.params.path + '\n')
});

// POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
var users = Router();
router.use('/users', users);
users.use(bodyParser.json());

users.post('/', function (req, res) {
    if (req.body.value) {
        res.statusCode = 200;
        res.setHeader('Content-Type', 'text/plain; charset=utf-8');
        res.end(req.body.value + '\n');
    } else {
        res.statusCode = 400;
        res.setHeader('Content-Type', 'text/plain; charset=utf-8');
        res.end('Invalid API Syntax\n');
    }
});

server.listen(8888);
console.log("server has started.");
</code></pre>

<p>}</p>

<p>exports.start = start;
```</p>

<p>å› ã¿ã«ã€ <code>server.js</code> ã¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚<br/>
å®Ÿéš›ã«ã¯ <code>app.js</code> ã§å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>

<p><code>javascript
// app.js
var server = require("./server");
server.start();
</code></p>

<p>ãŸã ã€ä»Šå¾ŒãŸãã•ã‚“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŒãã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€ã‚‚ã†å°‘ã—ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã”ã¨ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ãŸæ–¹ãŒè‰¯ã„ã§ã™ã‚ˆã­&hellip;<br/>
ã¨è¨€ã†ã“ã¨ã§å°‘ã€…ä¿®æ­£ã—ã¾ã™ã€‚</p>

<p>```javascript
// server.js
var http = require(&ldquo;http&rdquo;);
var Router = require(&ldquo;router&rdquo;);
var finalhandler = require(&lsquo;finalhandler&rsquo;);
var bodyParser   = require(&lsquo;body-parser&rsquo;);
var users = require(&ldquo;./users&rdquo;);</p>

<p>/<em>*
 *  ã‚µãƒ¼ãƒèµ·å‹•å‡¦ç†
 </em>/
function start() {</p>

<pre><code>var opts = { mergeParams: true };
var router = Router(opts);
var server = http.createServer(function onRequest(req, res) {
    router(req, res, finalhandler(req, res));
});

router.use(bodyParser.json());
router.use('/users/:path', users);  // GETãƒªã‚¯ã‚¨ã‚¹ãƒˆ
router.use('/users', users);        // POST, PUT, DELETEãƒªã‚¯ã‚¨ã‚¹ãƒˆ

server.listen(8888);
console.log("server has started.");
</code></pre>

<p>}</p>

<p>exports.start = start;</p>

<p>```</p>

<p>ä¸Šè¨˜ã®ã‚ˆã†ã«<code>server.js</code>ã¯ã‚µãƒ¼ãƒèµ·å‹•ã ã‘ã«çµã‚Šã¾ã—ãŸã€‚<br/>
ãã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ãŸã‚ã¨ã®å‡¦ç†ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«<code>users.js</code>ã«æ›¸ãã¾ã™ã€‚</p>

<p>```javascript
// users.js
var Router = require(&ldquo;router&rdquo;);
var opts = { mergeParams: true };
var router = Router(opts);</p>

<p>router.get(&ldquo;/&rdquo;, function(req, res) {</p>

<pre><code>res.statusCode = 200;
res.setHeader("Content-Type", "text/plain; charset=utf-8");
res.end(req.params.path + "\n");
</code></pre>

<p>});</p>

<p>router.post(&ldquo;/&rdquo;, function(req, res) {</p>

<pre><code>if (req.body.value) {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain; charset=utf-8');
    res.end(req.body.value + '\n');
} else {
    res.statusCode = 400;
    res.setHeader('Content-Type', 'text/plain; charset=utf-8');
    res.end('Invalid API Syntax\n');
}
</code></pre>

<p>});</p>

<p>module.exports = router;</p>

<p>```</p>

<p>ã“ã®ã‚ˆã†ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã§å¯èª­æ€§é«˜ããªã‚‹ã®ã§ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ„å‘³ã‚‚å‡ºã¦ãã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã­ã€‚<br/>
å› ã¿ã«ã€GETã¨POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Œã°ä¸‹è¨˜ã®ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>

<p>```
// GETãƒªã‚¯ã‚¨ã‚¹ãƒˆ
curl <a href="http://localhost:8888/users/20161029">http://localhost:8888/users/20161029</a>
// çµæœ
20161029</p>

<p>// POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆ
curl <a href="http://localhost:8888/users">http://localhost:8888/users</a> -X POST -H &ldquo;Content-Type: application/json&rdquo; -d &lsquo;{&ldquo;value&rdquo;:&ldquo;Sample&rdquo;}&rsquo;
// çµæœ
Sample
```</p>

<h3>Node.jsã§ãƒ‡ãƒãƒƒã‚°</h3>

<p>ç­†è€…ã¯ã“ã‚Œã¾ã§ <code>node-inspector</code> ã‚’åˆ©ç”¨ã—ã¦ã„ãŸã®ã§ã™ãŒã€ä½•ã¨v6.3.0ã‹ã‚‰ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ãŒæ¨™æº–è£…å‚™ã•ã‚Œã¦ã„ã‚‹ã‚‰ã—ã„ã§ã™ã­ï¼<br/>
æ—©é€Ÿã§ã™ãŒä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚</p>

<p>```
// Node.jsã§ãƒ‡ãƒãƒƒã‚°èµ·å‹•
node &mdash;inspect app.js
Debugger listening on port 9229.
Warning: This is an experimental feature and could change at any time.
To start debugging, open the following URL in Chrome:</p>

<pre><code>chrome-devtools://devtools/remote/serve_file/@60cd6e859b9f557d2312f5bf532f6aec5f284980/inspector.html?experiments=true&amp;v8only=true&amp;ws=localhost:9229/f1478fd8-33f2-4bca-8ab4-4ac9be3515cb
</code></pre>

<p>server has started.
Debugger attached.
```</p>

<p>å‡ºåŠ›ã•ã‚Œã‚‹ <code>chrome-devtools://devtools/remote/serve_file/@....</code> ã®éƒ¨åˆ†ã‚’Chromeã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«è²¼ã‚Šã¾ã—ã‚‡ã†ï¼<br/>
<code>node-inspcetor</code> ã•ãªãŒã‚‰ã®ãƒ‡ãƒãƒƒã‚°ãŒã§ãã‚‹ã¯ãšã§ã™ã€‚</p>

<p>å› ã¿ã«ã€èµ·å‹•æ™‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦ <code>--debug-brk</code> ã‚’ã¤ã‘ã‚‹ã¨å¿…ãš1è¡Œç›®ã§ãƒ‡ãƒãƒƒã‚°ãŒåœæ­¢ã—ã¾ã™ã€‚<br/>
ä¸€åº¦åœã‚ãŸã„å ´åˆã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚</p>

<h3>ã¾ã¨ã‚</h3>

<p>ä»Šå›ã¯Node.jsã«è§¦ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸãŸã‚ã€ã©ã†ã™ã‚Œã°ç°¡å˜ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå®Ÿè£…ã§ãã‚‹ã®ã‹èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚<br/>
Expressã‚’ä½¿ã£ã¦ã‚‚è‰¯ã‹ã£ãŸã®ã§ã™ãŒã€æ¥µåŠ›ä¸è¦ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å–ã‚Šè¾¼ã¿ãŸããªã„æ°—æŒã¡ãŒã‚ã£ãŸã®ã§å‰²ã‚Šã¨æœ€ä½é™ã«ã§ãã¦è‰¯ã‹ã£ãŸãªã¨æ€ã„ã¾ã—ãŸã€‚<br/>
Node.jsã¯å°‘ã—ãšã¤ãƒªãƒãƒ“ãƒªã—ãªãŒã‚‰æ€ã„å‡ºã—ã¦ã„ãã“ã¨ã«ã—ã‚ˆã†ã‹ãªã€‚<br/>
ã¨è¨€ã£ãŸã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swift Expressã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/07/10/swift-express/"/>
    <updated>2016-07-10T22:56:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/07/10/swift-express</id>
    <content type="html"><![CDATA[<h3>ä»Šæ³¨ç›®ã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swift</h3>

<p>æœ¬æ—¥ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swiftã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã§ã‚ã‚‹<a href="https://github.com/crossroadlabs/Express">Swift Express</a>ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
è¿‘å¹´ã€Appleã‹ã‚‰Swiftã®OSSåŒ–ãŒç™ºè¡¨ã•ã‚ŒãŸã“ã¨ã§ä¸€æ°—ã«å‹•ãå‡ºã—ãŸã®ãŒGitHubä¸Šã§ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä½œæˆåˆæˆ¦ã§ã™ã€‚<br/>
ç­†è€…ãŒçŸ¥ã£ã¦ã„ã‚‹ã ã‘ã§ã‚‚ã€</p>

<ul>
<li><a href="https://github.com/PerfectlySoft/Perfect">Perfect</a></li>
<li><a href="https://github.com/qutheory/vapor">Vapor</a></li>
<li><a href="https://github.com/IBM-Swift/Kitura-Starter-Bluemix">Kitura</a></li>
<li><a href="https://github.com/slimane-swift">Sliman</a></li>
</ul>


<p>ãªã©ãŒä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>ãã‚“ãªä¸­ã€ç­†è€…ã®ç›®ã«æ­¢ã¾ã£ãŸã®ãŒã€ <strong>Swift Express</strong> ã§ã—ãŸã€‚<br/>
æœ¬ãƒ–ãƒ­ã‚°ã§ã‚‚åº¦ã€… <strong>Node.js</strong> ã‚’è§¦ã£ãŸã“ã¨ãŒã‚ã‚‹ã¨è¿°ã¹ã¦ããŸã‚ˆã†ã«ã€ç­†è€…ã¯ <strong>Node.js</strong> ã§ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰å®Ÿè£…ã®çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚<br/>
ãã®éš›ã«åˆ©ç”¨ã—ã¦ã„ãŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«<a href="http://expressjs.com/">Express</a>ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚<br/>
Expressã¯ <strong>Node.js</strong> ã§ã„ã¨ã‚‚ç°¡å˜ã«ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰å®Ÿè£…ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚</p>

<p>Swiftã®çµŒé¨“ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã®å®Ÿè£…çµŒé¨“ãŒãªã„ç­†è€…ã«ã¨ã£ã¦ã¯ã€é¡˜ã£ã¦ã‚‚ãªã„Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã˜ã‚ƒãªã„ã‹ï¼ã€ã¨ã„ã†ã“ã¨ã§ <strong>Swift Express</strong> ã«æƒ¹ã‹ã‚ŒãŸã®ã§ã™ã€‚<br/>
ã•ã¦ã€æœ¬æ—¥ã¯ãã‚“ãª <strong>Swift Express</strong> ã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h3>Swift Expressã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†</h3>

<p>ã¾ãšã¯ã€Swift Expressã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã¾ã™ã€‚<br/>
<code>homebrew</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
brew tap crossroadlabs/tap</p>

<p>// æ‰‹é †(2)
brew install swift-express
```</p>

<p>æ‰‹é †(1)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p><code>javascript
==&gt; Tapping crossroadlabs/tap
Cloning into '/usr/local/Library/Taps/crossroadlabs/homebrew-tap'...
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 8 (delta 0), reused 6 (delta 0), pack-reused 0
Unpacking objects: 100% (8/8), done.
Checking connectivity... done.
Tapped 2 formulae (34 files, 72.7K)
</code></p>

<p>ç¶šã„ã¦ã€æ‰‹é †(2)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p>```javascript
==> Installing swift-express from crossroadlabs/tap
==> Installing dependencies for crossroadlabs/tap/swift-express: openssl, cmake, libevent, libevhtp, carthage
==> Installing crossroadlabs/tap/swift-express dependency: openssl
==> Downloading <a href="https://homebrew.bintray.com/bottles/openssl-1.0.2h_1.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/openssl-1.0.2h_1.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring openssl-1.0.2h_1.el_capitan.bottle.tar.gz
==> Caveats
A CA file has been bootstrapped using certificates from the system
keychain. To add additional certificates, place .pem files in
  /usr/local/etc/openssl/certs</p>

<p>  and run</p>

<pre><code>/usr/local/opt/openssl/bin/c_rehash

This formula is keg-only, which means it was not symlinked into /usr/local.

Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/openssl/lib
    CPPFLAGS: -I/usr/local/opt/openssl/include
</code></pre>

<p>==> Summary
ğŸº  /usr/local/Cellar/openssl/1.0.2h_1: 1,691 files, 12M
==> Installing crossroadlabs/tap/swift-express dependency: cmake
==> Downloading <a href="https://homebrew.bintray.com/bottles/cmake-3.6.0.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/cmake-3.6.0.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring cmake-3.6.0.el_capitan.bottle.tar.gz
==> Caveats
Emacs Lisp files have been installed to:
  /usr/local/share/emacs/site-lisp/cmake
  ==> Summary
  ğŸº  /usr/local/Cellar/cmake/3.6.0: 2,028 files, 27.8M
  ==> Installing crossroadlabs/tap/swift-express dependency: libevent
  ==> Downloading <a href="https://homebrew.bintray.com/bottles/libevent-2.0.22.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/libevent-2.0.22.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring libevent-2.0.22.el_capitan.bottle.tar.gz
ğŸº  /usr/local/Cellar/libevent/2.0.22: 53 files, 1.6M
==> Installing crossroadlabs/tap/swift-express dependency: libevhtp
==> Downloading <a href="https://github.com/ellzey/libevhtp/archive/1.2.10.tar.gz">https://github.com/ellzey/libevhtp/archive/1.2.10.tar.gz</a>
==> Downloading from <a href="https://codeload.github.com/ellzey/libevhtp/tar.gz/1.2.10">https://codeload.github.com/ellzey/libevhtp/tar.gz/1.2.10</a></p>

<h6>################################################################## 100.0%</h6>

<p>Warning: SHA1 support is deprecated and will be removed in a future version.
Please switch this formula to SHA256.
==> cmake . -DEVHTP_DISABLE_REGEX:STRING=ON -DEVHTP_BUILD_SHARED:STRING=ON -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DCMAKE_INSTALL_PREFIX=/usr/local/Cell
==> make install
ğŸº  /usr/local/Cellar/libevhtp/1.2.10: 9 files, 151.5K, built in 48 seconds
==> Installing crossroadlabs/tap/swift-express dependency: carthage
==> Downloading <a href="https://homebrew.bintray.com/bottles/carthage-0.17.2.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/carthage-0.17.2.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring carthage-0.17.2.el_capitan.bottle.tar.gz
ğŸº  /usr/local/Cellar/carthage/0.17.2: 45 files, 11.9M
==> Installing crossroadlabs/tap/swift-express
==> Cloning <a href="https://github.com/crossroadlabs/ExpressCommandLine.git">https://github.com/crossroadlabs/ExpressCommandLine.git</a>
Cloning into &lsquo;/Users/kato_takahiro/Library/Caches/Homebrew/swift-express&mdash;git&rsquo;&hellip;
remote: Counting objects: 67, done.
remote: Compressing objects: 100% (63/63), done.
remote: Total 67 (delta 21), reused 25 (delta 1), pack-reused 0
Unpacking objects: 100% (67/67), done.
Checking connectivity&hellip; done.
Note: checking out &lsquo;fae821f4d52c9dfb4e4c34ab0a4297ea700c9db1&rsquo;.</p>

<p>You are in &lsquo;detached HEAD&rsquo; state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.</p>

<p>If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:</p>

<pre><code>  git checkout -b &lt;new-branch-name&gt;

==&gt; Checking out tag 0.2.2
==&gt; carthage update --platform Mac --no-use-binaries --no-build
==&gt; rm -rf Carthage/Checkouts/Commandant/Carthage/Checkouts/Nimble Carthage/Checkouts/Commandant/Carthage/Checkouts/Quick
==&gt; carthage build --platform Mac
==&gt; xcodebuild SYMROOT=build
==&gt; Caveats
.app bundles were installed.
Run `brew linkapps swift-express` to symlink these to /Applications.
==&gt; Summary
ğŸº  /usr/local/Cellar/swift-express/0.2.2: 30 files, 7.3M, built in 3 minutes 5 seconds
</code></pre>

<p>```</p>

<p>ã•ã¦ã€è¦‹éã”ã—ãŒã¡ã§ã™ãŒã€<br/>
æœ€å¾Œã®æ–¹ã«ã€<code>brew linkapps swift-express</code> to symlink these to /Applications.ã€ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€</p>

<p><code>brew linkapps swift-express</code>ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>

<p>ã“ã“ã¾ã§æ¥ãŸã‚‰ã€<code>swift-express</code>ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>

<p>```javascript
Available commands:</p>

<p>bootstrap   download and build Express project dependencies
build       build Express project
help        Display general or command-specific help
init        Creates new Express application project
run         run Express project
update      update and build Express project dependencies
version     Display the current version of Swift Express Command Line
```</p>

<p>ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ç¨®åˆ¥ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€æ­£ã—ã <strong>Swift Express</strong> ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸè¨¼æ‹ ã§ã™ã€‚</p>

<h3>Swift Expressã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚ã†ï¼</h3>

<p>Swift Expressã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã®ã§ã€æ—©é€Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
swift-express init &lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå></p>

<p>// æ‰‹é †(2)
cd &lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå></p>

<p>// æ‰‹é †(3)
swift-express bootstrap
```</p>

<p>æ‰‹é †(1)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p><code>javascript
Cloning into '/var/folders/hj/p9y9d00s3sb5nn_x04961z2m0000gn/T/swift-express-827699'...
remote: Counting objects: 124, done.
remote: Total 124 (delta 0), reused 0 (delta 0), pack-reused 124
Receiving objects: 100% (124/124), 79.66 KiB | 0 bytes/s, done.
Resolving deltas: 100% (33/33), done.
Checking connectivity... done.
Task: "init" done.
</code></p>

<p>ç¶šã„ã¦ã€æ‰‹é †(2)ã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«ç§»å‹•ã™ã‚‹ã¨ã€</p>

<p><code>javascript
HelloExpress
  â”£â”â” Cartfile
  â”£â”â” HelloExpress.xcodeproj
  â”£â”â” Info.plist
  â”£â”â” Package.swift
  â”£â”â” app
  â”ƒ    â”—â”â” main.swift
  â”£â”â” dist
  â”£â”â” public
  â”ƒ    â”£â”â” css
  â”ƒ    â”ƒ    â”—â”â” main.css
  â”ƒ    â”—â”â” logo.png
  â”—â”â” views
</code></p>

<p>ã¨ã„ã£ãŸå½¢ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

<p>æœ€å¾Œã«æ‰‹é †(3)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br/>
(ã“ã“ãŒæœ€ã‚‚æ™‚é–“ã®ã‹ã‹ã‚‹å·¥ç¨‹ã«ãªã‚Šã¾ã™ã€‚)</p>

<p>```javascript
<strong><em> No Cartfile.resolved found, updating dependencies
</em></strong> Cloning Express
<strong><em> Cloning Stencil
</em></strong> Cloning GRMustache.swift
<strong><em> Cloning CEVHTP
</em></strong> Cloning PathToRegex
<strong><em> Cloning Regex
</em></strong> Cloning TidyJSON
<strong><em> Cloning BrightFutures
</em></strong> Cloning PathKit
<strong><em> Cloning ExecutionContext
</em></strong> Cloning Result
<strong><em> Checking out CEVHTP at &ldquo;0.1.0&rdquo;
</em></strong> Checking out ExecutionContext at &ldquo;0.3.1&rdquo;
<strong><em> Checking out Result at &ldquo;1.0.3&rdquo;
</em></strong> Checking out GRMustache.swift at &ldquo;bf7d6031d7e0dd862519eaba2b36b2e11a0d25a9&rdquo;
<strong><em> Checking out Regex at &ldquo;0.5.2&rdquo;
</em></strong> Checking out PathToRegex at &ldquo;0.2.2&rdquo;
<strong><em> Checking out PathKit at &ldquo;0.6.1&rdquo;
</em></strong> Checking out BrightFutures at &ldquo;0.4.0&rdquo;
<strong><em> Checking out Stencil at &ldquo;0.5.3&rdquo;
</em></strong> Checking out Express at &ldquo;0.3.6&rdquo;
*** Checking out TidyJSON at &ldquo;1.1.0&rdquo;</p>

<p>&lt;çœç•¥></p>

<p>/Users/<strong><strong>**/</strong></strong>/HelloExpress/Carthage/Checkouts/Express/Express/Content.swift:39:5: warning: use of &lsquo;typealias&rsquo; to declare associated types is deprecated; use &lsquo;associatedtype&rsquo; instead
Task: &ldquo;bootstrap&rdquo; done.
```</p>

<p>ã“ã‚Œã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¯å®Œäº†ã§ã™ã€‚</p>

<h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼</h3>

<p>å…ˆã»ã©ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
swift-express build</p>

<p>// æ‰‹é †(2)
swift-express run
```</p>

<p>æ—©é€Ÿã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«æ‰‹é †(1)ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ãã ã•ã„ã€‚<br/>
ã™ã‚‹ã¨ã€</p>

<p>```javascript
Building HelloExpress in Debug mode&hellip;</p>

<p>&lt;çœç•¥></p>

<p>=== BUILD TARGET HelloExpress OF PROJECT HelloExpress WITH CONFIGURATION Debug ===</p>

<p>&lt;çœç•¥></p>

<p><strong> BUILD SUCCEEDED </strong></p>

<p>Task: &ldquo;build&rdquo; done.
```</p>

<p>ã¨ã„ã†çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br/>
å•é¡ŒãŒãªã‘ã‚Œã°<code>BUILD SUCCEEDED</code>ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p>

<p>ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã‚‰ã€æ‰‹é †(2)ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚<br/>
ã™ã‚‹ã¨ã€</p>

<p><code>javascript
Running HelloExpress...
Express was successfully launched on port 9999
</code></p>

<p>ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒãƒ¼ãƒˆç•ªå·ãŒ <strong>9999</strong> ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br/>
<code>http://localhost:9999</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã¨ã€</p>

<p><img src="/images/swift-express-1.png" alt="Swift Express TOPãƒšãƒ¼ã‚¸" /></p>

<p>ã¨ã„ã†ç”»é¢ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>

<p>å› ã¿ã«ã§ã™ãŒã€Xcodeã‹ã‚‰ã‚‚<code>Build</code>ï¼†<code>Run</code>ã¯ã§ãã¾ã™ã€‚</p>

<p><img src="/images/swift-express-2.png" alt="Xcodeã‹ã‚‰Build &amp; Run" /></p>

<h3>Swift Expressã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã†ï¼</h3>

<p>æœ€å¾Œã«ã–ã£ãã‚Šä¸­èº«ã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚<br/>
Swift Expressã®ãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ã§ã‚ã‚‹<code>main.swift</code>ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p>

<p>```javascript
// app/main.swift</p>

<p>import Express</p>

<p>let app = express()</p>

<p>// (1)
app.views.register(StencilViewEngine())</p>

<p>// (2)
app.get(&ldquo;/assets/:file+&rdquo;, action: StaticAction(path: &ldquo;public&rdquo;, param:&ldquo;file&rdquo;))</p>

<p>// (3)
app.get(&ldquo;/&rdquo;) { (request:Request<AnyContent>)&ndash;>Action<AnyContent> in</p>

<pre><code>return Action&lt;AnyContent&gt;.render("index", context: ["hello": "Hello,", "swift": "Swift", "express": "Express!"])
</code></pre>

<p>}</p>

<p>// (4)
app.listen(9999).onSuccess { server in</p>

<pre><code>print("Express was successfully launched on port", server.port)
</code></pre>

<p>}</p>

<p>app.run()
```</p>

<p>ã“ã‚Œã¯ <strong>Node.js</strong> çµŒé¨“è€…ã¨ã—ã¦ã¯ã‹ãªã‚ŠExpressã«é…·ä¼¼ã—ã¦ã‚‹ãªã¨æ„Ÿã˜ã¾ã™ã€‚<br/>
é †ã«è¿½ã£ã¦ã¿ã¦ã„ãã¾ã™ã€‚</p>

<p>(1): æç”»ã‚¨ãƒ³ã‚¸ãƒ³ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p><code>javascript
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');
</code></p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(2): é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®æ ¼ç´å ´æ‰€ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p><code>javascript
app.use(express.static(path.join(__dirname, 'public')));
</code></p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(3): ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ã¨å‡¦ç†ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p>```javascript
// app.js
app.use(&lsquo;/&rsquo;, routes);</p>

<p>// route/index.js
router.get(&lsquo;/&rsquo;, function(req, res, next) {</p>

<pre><code>res.render('index', { title: 'Express' }); 
</code></pre>

<p>}
```</p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(4): ãƒãƒ¼ãƒˆç•ªå·ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p>```javascript
// bin/www
var port = normalizePort(process.env.PORT || &lsquo;3000&rsquo;);
app.set(&lsquo;port&rsquo;, port);</p>

<p>var server = http.createServer(app);</p>

<p>server.listen(port);</p>

<p>server.on(&lsquo;listening&rsquo;, onListening);</p>

<p>function onListening() {</p>

<pre><code>var addr = server.address();
var bind = typeof addr === 'string'
    ? 'pipe ' + addr
    : 'port ' + addr.port;
debug('Listening on ' + bind);
</code></pre>

<p>}
```</p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦å¦‚ä½•ã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
ã“ã‚Œã ã‘Node.jsã®Expressã«ä¼¼ã¦ã„ã‚‹ã®ã§ã™ã‹ã‚‰ã€<br/>
<strong>Swift Express</strong> ã¯ã“ã‚Œã‹ã‚‰ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã‚’å­¦ã‚“ã§ã„ãä¸Šã§å¼·åŠ›ãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br/>
æ–°ã—ãNode.jsã‚’å­¦ã¶äººã‚‚å°†æ¥çš„ã«ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã‚’è§¦ã‚‹æ©Ÿä¼šãŒå‡ºã¦ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã®ã§çŸ¥ã£ã¦ãŠã„ã¦æã¯ãªã„ã§ã—ã‚‡ã†ã€‚<br/>
ç­†è€…ã‚‚ã“ã‚Œã¾ã‚‰ç›Šã€…æ³¨ç›®ã•ã‚Œã‚‹ã§ã‚ã‚ã†ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã®æƒ…å ±ã¯è¿½ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ˜”é–¢ã‚ã£ãŸNode.jsã‚’æ€ã„å‡ºã—ã¦ã¿ã‚‹]]></title>
    <link href="http://grandbig.github.io/blog/2016/07/09/remember-node-js/"/>
    <updated>2016-07-09T22:20:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/07/09/remember-node-js</id>
    <content type="html"><![CDATA[<h3>ã¯ã˜ã‚ã«</h3>

<p>æœ¬æ—¥ã¯ä¹…ã—ã¶ã‚Šã«Node.jsã«ã¤ã„ã¦æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ç­†è€…ãŒæœ¬æ ¼çš„ã«Node.jsã‚’è§¦ã£ã¦ã„ãŸã®ã¯ã€3ã€œ4å¹´ã»ã©å‰ã§ã€å½“æ™‚ã¯ä»Šã»ã©å­˜åœ¨ãŒæµ¸é€ã—ã¦ã¯ã„ã¾ã›ã‚“ã§ã—ãŸã€‚<br/>
ãã‚ŒãŒä»Šã‚„ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®å‡¦ç†ä½œæˆã®é¸æŠè‚¢ã®1ã¤ã¨ã—ã¦æ™®é€šã«æ¤œè¨ã•ã‚Œã‚‹æ™‚ä»£ã«ãªã‚Šã¾ã—ãŸã€‚<br/>
æ­£ç›´ãªã¨ã“ã‚ã€æœ€æ–°ã®Node.jsã‚’è¿½ãˆã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã™ãŒã€<br/>
ãã®æœ¬è³ªã¯ä»Šã‚‚æ˜”ã‚‚å¤§ããã¯å¤‰ã‚ã£ã¦ã„ãªã„ã ã‚ã†ã¨æ€ã„ã¤ã¤ã€ç­†è€…ã®çµŒé¨“ã‚’å…ƒã«Node.jsã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h3>Node.jsã¨ã¯</h3>

<p>Node.jsã¯2009å¹´ã«ãƒ©ã‚¤ã‚¢ãƒ³ãƒ»ãƒ€ãƒ¼ãƒ«ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸã€JavaScriptã‚’ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œå¯èƒ½ã«ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€ã§ã™ã€‚<br/>
JavaScriptã‚¨ãƒ³ã‚¸ãƒ³ã¯ <strong>Google V8 JavaScript ã‚¨ãƒ³ã‚¸ãƒ³</strong> ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚<br/>
å› ã¿ã«ã€ <strong>Google V8 JavaScript ã‚¨ãƒ³ã‚¸ãƒ³</strong> ã¨ã¯ã€</p>

<ul>
<li>ECMAScript5ã«æº–æ‹ </li>
<li>C++ã§è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹</li>
<li>ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ¼ãƒ³ã§å‹•ä½œå¯èƒ½</li>
<li>Google Chromeã§ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹</li>
</ul>


<p>ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚<br/>
ã“ã‚Œã‚’è¦‹ãŸã ã‘ã§ã‚‚ä½•ã¨ãªãã™ã”ã„ãªã€œã¨æ€ã£ã¦ã—ã¾ã„ã¾ã™ã­ç¬‘ã€‚</p>

<p>Node.jsã®å…¬å¼ã‚µã‚¤ãƒˆã¯<a href="https://nodejs.org/en/">ã“ã¡ã‚‰</a>ã§ã™ã€‚<br/>
æ—¥æœ¬ãƒ¦ãƒ¼ã‚¶ã‚°ãƒ«ãƒ¼ãƒ—ã‚µã‚¤ãƒˆã‚‚ã‚ã‚Šã¾ã™ãŒã€ä»Šã¯æ´»å‹•çš„ã«æ›´æ–°ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>

<h3>Node.jsã®ç‰¹å¾´</h3>

<p>ç¶šã„ã¦ã€Node.jsã®ç‰¹å¾´ã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚<br/>
Node.jsã®ç‰¹å¾´ã¯ã€ä½•ã¨è¨€ã£ã¦ã‚‚</p>

<ul>
<li>ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ãƒ¢ãƒ‡ãƒ«</li>
<li>Non-blocking I/O</li>
<li>ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰</li>
</ul>


<p>ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚<br/>
ç­†è€…ãŒNode.jsã‚’è§¦ã£ã¦ã„ãŸæ™‚ã¯æ­£ç›´å…¨ãç†è§£ã—ã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒã€<br/>
ã“ã‚Œã‚‰ã“ããŒNode.jsã®æœ¬è³ªã§ã—ã‚‡ã†ã€‚</p>

<h4>ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ãƒ¢ãƒ‡ãƒ«</h4>

<p>ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ãƒ¢ãƒ‡ãƒ«ã¨ä¸€è¨€èãã¨ã€ã€Œãªã‚“ãã‚„ï¼ï¼Ÿã€ã¨ãªã£ã¦ã—ã¾ã„ãã†ã§ã™ãŒã€</p>

<ul>
<li>ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºç«ã‚’å¸¸ã«ç›£è¦–ã—ã¦ã„ã‚‹ãƒ«ãƒ¼ãƒ—</li>
<li>ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºç«ã‚’å—ã‘ä»˜ã‘ã‚‹ã¨ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã«æ ¼ç´ã•ã‚Œã‚‹</li>
<li>å—ä»˜é †ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã—ã¦ã„ã</li>
</ul>


<p>ã¨ã„ã†æ–¹å¼ã®ã“ã¨ã§ã™ã€‚</p>

<h4>Non-blocking I/O</h4>

<p>I/Oå‡¦ç†ã‚’å—ã‘ä»˜ã‘ãŸå ´åˆã€I/Oå‡¦ç†ãŒå®Œäº†ã™ã‚‹ã¾ã§å¾…ã¤(Blockã•ã‚Œã‚‹)ã®ãŒé€šå¸¸ã§ã™ã€‚<br/>
Node.jsã§ã¯I/Oå‡¦ç†ã‚’æŠ•ã’ã¤ã‘ãŸé–“ã€ä»–ã«ã‚„ã‚‹ã¹ãå‡¦ç†ãŒã‚ã‚Œã°é€²ã‚“ã§å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚<br/>
ã‚ˆã£ã¦ <strong>Non-blocking I/O</strong> ã¨å‘¼ã°ã‚Œã¦ã„ã¾ã™ã€‚</p>

<h4>ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰</h4>

<p>è¨€è‘‰ã®ã¨ãŠã‚Šã§ã™ãŒã€è¤‡æ•°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’1ã¤ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚<br/>
è¤‡æ•°ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã‚ã‘ã§ã¯ãªã„ãŸã‚ã€ãƒ¡ãƒ¢ãƒªæ¶ˆè²»ã‚’æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚</p>

<h3>Node.jsã®ãƒ¡ãƒªãƒƒãƒˆ/ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</h3>

<p>Node.jsãŒå…¨ã¦ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æœ€é©ãªã®ã‹ã¨è¨€ã†ã¨ãã‚“ãªã“ã¨ã¯å½“ç„¶ã‚ã‚Šã¾ã›ã‚“ã€‚<br/>
Node.jsã®ãƒ¡ãƒªãƒƒãƒˆ/ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ç†è§£ã—ãŸä¸Šã§ã€æ¡ç”¨ã‚’æ¤œè¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ã€‚</p>

<h4>Node.jsã®ãƒ¡ãƒªãƒƒãƒˆ</h4>

<p>ã¾ãšã¯ãƒ¡ãƒªãƒƒãƒˆã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>

<ol>
<li>å¤§é‡ã®è»½é‡ãªåŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŒãã®ãŒå¾—æ„</li>
<li>NoSQLã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„</li>
<li>JavaScriptã§æ›¸ã‘ã‚‹</li>
<li>å……å®Ÿã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå­˜åœ¨ã—ã¦ã„ã‚‹</li>
</ol>


<p>ç­†è€…ã®çµŒé¨“ã«åŸºã¥ããƒ¡ãƒªãƒƒãƒˆã‚’4ã¤ä¸Šã’ã•ã›ã¦é ‚ãã¾ã—ãŸã€‚</p>

<p>1ã¤ç›®ã® <strong>å¤§é‡ã®è»½é‡ãªåŒæ™‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŒãã®ãŒå¾—æ„</strong> ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã§ã™ãŒã€<br/>
ã“ã‚Œã¯Node.jsã®ç‰¹å¾´ã§ä¸Šã’ãŸã“ã¨ãŒé–¢ã‚ã£ã¦ãã¾ã™ã€‚<br/>
Non-blocking I/Oãªã®ã§ã€I/Oãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„ã¨ã¯è¨€ã†ã‚‚ã®ã®ã€Node.jsã¯ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ãªã‚“ã§ã™ã€‚<br/>
ãªã®ã§ã€1ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ä¸­ã«éå¸¸ã«æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ã€ãã“ãŒãƒãƒƒã‚¯ã¨ãªã£ã¦ã—ã¾ã„å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¾…ãŸã›ã¦ã—ã¾ã„ã¾ã™ã€‚<br/>
å ´åˆã«ã‚ˆã£ã¦ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§è¨­å®šã—ãŸã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“ã‚’ä¸Šå›ã‚ŠæœŸå¾…ã—ãŸçµæœã‚’ãƒ¦ãƒ¼ã‚¶ãŒå¾—ã‚‰ã‚Œãªããªã‚‹ã§ã—ã‚‡ã†ã€‚</p>

<p>ãªã®ã§1ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆ(1å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ)ã§éå¸¸ã«é‡ã„å‡¦ç†ã‚’å®Ÿè¡Œã•ã›ãªãã¦ã¯ãªã‚‰ãªã„ä»•æ§˜ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯å‘ãã¾ã›ã‚“ã€‚<br/>
é€†ã«ã€ç´°ã‹ãã‚¤ãƒ™ãƒ³ãƒˆã‚’åˆ†å‰²ã§ãã¦ã€è¤‡æ•°å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ã£ã¦ã‚‚å•é¡Œã®ãªã„ä»•æ§˜ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯é©åˆ‡ã¨è¨€ãˆã¾ã™ã€‚</p>

<p>2ã¤ç›®ã® <strong>NoSQLã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„</strong> ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã§ã™ãŒã€<br/>
ç­†è€…ã¯ä¸»ã« <strong>MongoDB</strong> ã¨ä¸€ç·’ã«åˆ©ç”¨ã—ã¦ãã¾ã—ãŸã€‚<br/>
MongoDBã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŒ‡å‘ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ãŸã‚ã€JSONå‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾çªã£è¾¼ã‚ã‚‹ãŸã‚éå¸¸ã«ä½¿ã„ã‚„ã™ã„ã®ã§ã™ã€‚<br/>
ã‚¹ã‚­ãƒ¼ãƒãƒ¬ã‚¹ã‹ã¤ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã®ç‰¹å¾´ã‚’å­˜åˆ†ã«æ´»ã‹ã—ãŸã„å ´åˆã¯NoSQLã‚’é¸æŠã™ã‚‹ã¨æ€ã„ã¾ã™ãŒã€<br/>
ãã“ã‹ã‚‰é¡ã£ã¦Node.jsã‚’é¸æŠã—ã¦ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>

<p>3ã¤ç›®ã¨4ã¤ç›®ã®ãƒ¡ãƒªãƒƒãƒˆã§ã™ãŒã€<br/>
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚ã‚Œã°ã€åŸºæœ¬çš„ã«ã¯JavaScriptã‚’æ‰±ãˆã‚‹ã¨ã„ã†äººã‚‚ãŸãã•ã‚“ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚<br/>
ã§ã‚ã‚Œã°åŒã˜è¨€èªã®JavaScriptã§æ›¸ã‘ã‚‹Node.jsã‚’æ¡ç”¨ã—ãªã„æ‰‹ã¯ãªã„ã§ã—ã‚‡ã†ã€‚<br/>
ã¾ãŸã€MongoDBã‚‚Node.jsã‚‚JavaScriptã«ã‚‚è¨€ãˆã‚‹ã“ã¨ã§ã™ãŒã€åˆå¿ƒè€…ã‚’å‰²ã‚Šã¨ã™ã‚“ãªã‚Šå—ã‘å…¥ã‚Œã¦ãã‚Œã‚‹åœŸå°ãŒæ•´ã£ã¦ã„ã‚‹ãŸã‚ã€<br/>
1äººã§ã‚µãƒ¼ãƒ“ã‚¹ææ¡ˆæ™‚ã®ãƒ¢ãƒƒã‚¯ä½œæˆã‚’ã—ãªãã¦ã¯ãªã‚‰ãªã„ã¨ããªã©ã«æœ€é©ã§ã™ã€‚<br/>
(èª¤è§£ã•ã‚ŒãŸããªã„ã®ãŒã€ã©ã®æŠ€è¡“ã‚‚æ¥µã‚ã‚‹ã«ã¯ã‹ãªã‚Šå¤§å¤‰ã¨ã„ã†ã“ã¨ã«å¤‰ã‚ã‚Šã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚)</p>

<h4>Node.jsã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</h4>

<p>ç¶šã„ã¦ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>

<ol>
<li>é‡ã„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŒãã®ãŒè‹¦æ‰‹</li>
<li>ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯åœ°ç„</li>
</ol>


<p>1ã¤ç›®ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¯ãƒ¡ãƒªãƒƒãƒˆã§æ›¸ã„ãŸå†…å®¹ã§ã™ã€‚<br/>
2ã¤ç›®ã¯ã¾ã•ã«ç­†è€…ãŒ3ã€œ4å¹´å‰ã«æ„Ÿã˜ã¦ã„ãŸãƒ‡ãƒ¡ãƒªãƒƒãƒˆã§ã™ã€‚<br/>
Non-blocking I/Oã®ç‰¹å¾´ã‚’æŒã¤ä»£ã‚ã‚Šã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸéš›ã«è¤‡æ•°å›ãƒã‚¹ãƒˆã™ã‚‹ã“ã¨ãŒå°‘ãªãã‚ã‚Šã¾ã›ã‚“ã€‚<br/>
(ã‚µãƒ¼ãƒãƒ€ã‚¦ãƒ³ã‚’é˜²ããŸã‚ã«<code>try-catch</code>ã‚’å…¥ã‚Œã‚ˆã†ã‚‚ã®ãªã‚‰å°šæ›´ã§ã™ã€‚)</p>

<p>ãŸã ã—ã€v0.12ã‹ã‚‰<code>yield</code>ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã—ã€<br/>
ä»Šã‚„Webã«é™ã‚‰ãšã‚¹ãƒãƒ›ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ä¸–ç•Œã§ã‚‚<code>Promise</code>ã®åˆ©ç”¨ãŒçã—ãã¯ãªã„ãŸã‚ã€æœ€æ—©ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¨ã‚‚è¨€ãˆãªããªã£ãŸã¨æ€ã‚ã‚Œã¾ã™ã€‚</p>

<p>ã¾ãŸã€ç­†è€…çš„ã«ã¯<br/>
HTML, CSS, JavaScriptã‚„ç”»åƒãªã©ã®é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿”å´ã™ã‚‹ã‚ˆã†ãªWebã‚µãƒ¼ãƒã¨ã—ã¦ã®å½¹å‰²ã¯Nginxã‚„Apacheã«ä»»ã›ã¦ã—ã¾ã£ã¦è‰¯ã„ã¨ã„ã†æ„Ÿè¦šã§ã™ã€‚<br/>
ã‚€ã‹ã€œã—ã€è¨ˆæ¸¬ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå¼·ãæ®‹ã£ã¦ã„ã‚‹ã‹ã‚‰ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒ&hellip;</p>

<h3>Nodeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</h3>

<p>ä»Šã‚‚å¿˜ã‚Œãªã„å½“æ™‚ä½¿ã£ã¦ã„ãŸ or åŠ©ã‘ã‚‰ã‚ŒãŸNodeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚</p>

<h4>Express</h4>

<p>ã“ã‚Œã¯æœ€ã‚‚æœ‰åãªNodeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
( <strong>Express</strong> ã®å…¬å¼ã‚µã‚¤ãƒˆã¯<a href="http://expressjs.com/">ã“ã¡ã‚‰</a>ã§ã™ã€‚)</p>

<p><strong>Express</strong> ã¯Webã‚¢ãƒ—ãƒªã‚±ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚Šã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚<br/>
ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚’éå¸¸ã«ç°¡å˜ã«ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã™ã€‚<br/>
(ç„äººã«ãªã‚Œã°ãªã‚‹ã»ã©ã‚¢ãƒ³ãƒExpressãŒå¤šã„æ°—ã‚‚ã—ã¾ã™ãŒ&hellip;)</p>

<h4>node-inspector</h4>

<p>ç¶šã„ã¦ã€ã“ã¡ã‚‰ã‚‚ä½¿ã‚ãªã„äººã®æ–¹ãŒå°‘ãªã„ã®ã§ã¯ï¼Ÿã¨æ€ã†ãã‚‰ã„é‡è¦ãª <strong>node-inspector</strong> ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚<br/>
(GitHubã¯<a href="https://github.com/node-inspector/node-inspector">ã“ã¡ã‚‰</a>ã§ã™ã€‚)</p>

<p>ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯eclipse, IntelliJãªã©ã®IDEã‚’åˆ©ç”¨ã—ã¦é–‹ç™ºã™ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br/>
IDEã‚’åˆ©ç”¨ã™ã‚‹ç†ç”±ã¯æ§˜ã€…ã§ã™ãŒã€ãã®ä¸­ã®1ã¤ã«ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚<br/>
<strong>node-inspector</strong> ã¯ã¾ã‚‹ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã‹ã®ã”ã¨ãã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚</p>

<h4>forever</h4>

<p>æ¬¡ã¯ã€ <strong>forever</strong> ã®ç´¹ä»‹ã§ã™ã€‚<br/>
Node.jsã§ã¯æƒ³å®šå¤–ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã«ã‚µãƒ¼ãƒãŒãƒ€ã‚¦ãƒ³ã—ã¦ã—ã¾ã„ã¾ã™ã€‚<br/>
ã‚µãƒ¼ãƒãŒãƒ€ã‚¦ãƒ³ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ãŒåœæ­¢ã—ã¦ã—ã¾ã†ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚<br/>
ãã®ãŸã‚ã€ã‚µãƒ¼ãƒã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ãŒã€ã“ã‚Œã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒ <strong>forever</strong> ã§ã™ã€‚<br/>
(GitHubã¯<a href="https://github.com/foreverjs/forever">ã“ã¡ã‚‰</a>ã§ã™ã€‚)</p>

<h4>log4js-node</h4>

<p>å…ˆã»ã©ã‚‚èª¬æ˜ã—ãŸé€šã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯æ‰€è©®ã€äººé–“ãŒä½œã‚Šä¸Šã’ãŸã‚‚ã®ãªã®ã§ã€æƒ³å®šå¤–ãªã“ã¨ã¯èµ·ã“ã‚Šãˆã¾ã™ã€‚<br/>
ãã‚Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã¯å¤±æ•—ã‚’ãŸã ã®å¤±æ•—ã¨ã—ã¦æ”¾ç½®ã™ã‚‹ã®ã§ã¯ãªãã€çµŒé¨“ã¨ã—ã¦è“„ç©ã—ã€æ¬¡ã«æ´»ã‹ã™ã®ã§ã™ã€‚<br/>
ãã®æ‰‹åŠ©ã‘ã¨ãªã‚‹ã®ãŒãƒ­ã‚°ã§ã™ã€‚</p>

<p><strong>log4js-node</strong> ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€<code>info</code>, <code>debug</code>, <code>warn</code>, <code>error</code>ãªã©å„ç¨®ãƒ­ã‚°ã‚’ä»•è¾¼ã‚€ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚</p>

<h4>async</h4>

<p>å®Ÿã¯ç­†è€…ãŒæœ€ã‚‚æ€ã„å‡ºæ·±ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã“ã® <strong>async</strong> ã§ã™ã€‚<br/>
Node.jsã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã§ç´¹ä»‹ã—ã¾ã—ãŸãŒã€ç­†è€…ãŒNode.jsã‚’ãƒ¡ã‚¤ãƒ³ã§è§¦ã£ã¦ã„ãŸ3ã€œ4å¹´å‰ã¯ã¾ã•ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯åœ°ç„ã§ã—ãŸã€‚<br/>
ã¾ãŸã€1å›ã®ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«å†…ã§éåŒæœŸå‡¦ç†ã‚’ç¹°ã‚Šè¿”ã—é †ç•ªã«å®Ÿè¡Œã—ãŸã„è¦æœ›ãŒã‚ã‚Šã€éå¸¸ã«æ‰‹ã‚’ç„¼ãã¾ã—ãŸã€‚<br/>
ã“ã‚Œã‚’æ•‘ã£ã¦ãã‚ŒãŸã®ãŒ <strong>async</strong> ãªã®ã§ã™ã€‚</p>

<p>ç‰¹ã«ã€<code>async.waterfall</code>, <code>async.parallel</code>, <code>async.series</code>, <code>async.eachSeries</code>ã¯å¿…è¦‹ã®ä¾¡å€¤ã‚ã‚Šã§ã™ã€‚<br/>
(GitHubã¯<a href="https://github.com/caolan/async">ã“ã¡ã‚‰</a>ã§ã™ã€‚)</p>

<h4>ãã®ä»–</h4>

<p>ãã®ä»–ã«ã‚‚ä¾¿åˆ©ãªã‚‚ã®ãŒãŸãã•ã‚“ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§å¿…è¦ã«å¿œã˜ã¦åˆ©ç”¨ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>

<ul>
<li><a href="https://github.com/mochajs/mocha">mocha</a>: Node.jsã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</li>
<li><a href="http://socket.io/">socket.io</a>: WebSocketæ©Ÿèƒ½ã‚’å®Ÿè£…ã§ãã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</li>
<li><a href="http://mongoosejs.com/">mongoose</a>: Node.jsã‹ã‚‰MongoDBã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</li>
<li><a href="https://github.com/mysqljs/mysql">mysql</a>: Node.jsã‹ã‚‰MySQLã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</li>
<li><a href="https://github.com/balderdashy/sails">sails</a>: Ruby on Railsãƒ©ã‚¤ã‚¯ãªMVCãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</li>
</ul>


<h3>Node.jsã‚’å‹‰å¼·ã™ã‚‹ãŸã‚ã®è¿‘é“</h3>

<p>æœ€å¾Œã«Node.jsã®å‹‰å¼·æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ç­†è€…çš„ã«ã¯ã€ã¾ãšã¯ <strong>JavaScript</strong> ã‚’ãã¡ã‚“ã¨å­¦ã¶ã“ã¨ãŒå¿…è¦ã ã¨æ€ã„ã¾ã™ã€‚<br/>
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‹ã‚‰å§‹ã‚ã¦ã‚‚ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã‹ã‚‰å§‹ã‚ã¦ã‚‚æ§‹ã‚ãªã„ã®ã§ã™ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‹ã‚‰ã®æ–¹ãŒå§‹ã‚ã‚„ã™ã„ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p>

<p>ã¾ãŸã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã§Node.jsã¨ã„ã†ã‚‚ã®ãŒä½•ã‹ã‚’å­¦ã¶ã®ã§ã‚ã‚Œã°ã€<br/>
<a href="http://www.nodebeginner.org/index-jp.html">Nodeãƒ“ã‚®ãƒŠãƒ¼ã‚ºãƒ–ãƒƒã‚¯</a>ã‚’1å›ã¯èª­ã‚“ã§ãŠãã“ã¨ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚<br/>
å¸‚è²©ã•ã‚Œã¦ã„ã‚‹æœ¬ã‚’èª­ã‚€ã‚ˆã‚Šã‚‚æœ¬è³ªçš„ãªéƒ¨åˆ†ã‚’ç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚<br/>
(ã‚ã¨ã€æœªã ã«Node.jsé–¢é€£ã®æœ¬ã£ã¦å…¨ç„¶ãªã„ã®ã§&hellip;ã€‚)</p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
Node.jsã¯ã¾ã ã¾ã æ–°ã—ã„æŠ€è¡“ã§ã™ã—ã€ã“ã‚Œã‹ã‚‰ã‚‚ã£ã¨å­¦ã¶ã¹ãã“ã¨ãŒå¢—ãˆã¦ãã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚<br/>
ç­†è€…ã‚‚æ¥µåŠ›æœ€æ–°ã‚’è¿½ãˆã‚‹ã‚ˆã†ã«ç²¾é€²ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ã¨è¨€ã£ãŸã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<p>å‚è€ƒ:</p>

<ul>
<li><a href="http://www.atmarkit.co.jp/ait/articles/1103/23/news101_2.html">naveã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼†ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—è©³èª¬ </a></li>
<li><a href="http://www.slideshare.net/shigeki_ohtsu/processnext-tick-nodejs">ãã†ã ã£ãŸã®ã‹ï¼ ã‚ˆãã‚ã‹ã‚‹ process.nextTick() node.jsã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã‚’ç†è§£ã™ã‚‹</a></li>
</ul>


<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[BrightFutureã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/03/bright-future/"/>
    <updated>2016-04-03T17:11:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/03/bright-future</id>
    <content type="html"><![CDATA[<h4>Swiftã§Promiseãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã¿ã‚ˆã†</h4>

<p>æœ€è¿‘ã¯æ›´æ–°é »åº¦ãŒè½ã¡ã¦ã—ã¾ã£ã¦ã„ã¾ã™ãŒã€ä¹…ã€…ã«æ›´æ–°ã—ã¾ã™ã€‚<br/>
(iPhoneSEãŒç™ºè¡¨ã•ã‚ŒãŸã“ã¨ã§ã™ã—ç¬‘)</p>

<p>ã•ã¦ã€æœ¬æ—¥ã¯Swiftç‰ˆPromiseãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã¯å‰²ã¨æœ‰åãª <strong>BrightFuture</strong> ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ç­†è€…ã¯ã€æ–°ã—ã„ã“ã¨ã«å–ã‚Šçµ„ã‚€éš›ã¯ã€JSã§ä¾‹ã‚’è¦‹ãŸæ–¹ãŒã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã‚Šã™ã‚‹ã®ã§ã€Node.jsã®Promiseã¨äº¤ãˆãªãŒã‚‰ç´¹ä»‹ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>Promiseã¨ã¯</h4>

<p>ã¾ãšã¯ã€Promiseã®å­˜åœ¨ã«ã¤ã„ã¦è»½ãè§¦ã‚Œã¦ãŠãã¾ã™ã€‚<br/>
<a href="http://azu.github.io/promises-book/">JS Promiseã®æœ¬</a>ã«ã‚ˆã‚‹ã¨ã€Promiseã¨ã¯ã€éåŒæœŸå‡¦ç†ã‚’æŠ½è±¡åŒ–ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãã‚Œã‚’æ“ä½œã™ã‚‹ä»•çµ„ã¿ã€ã®ã“ã¨ã ãã†ã§ã™ã€‚<br/>
ã“ã‚Œã ã‘èª­ã‚€ã¨ç†è§£ã—ãŒãŸã„ã¨æ€ã†ã®ã§ã€ç­†è€…ãŒæ„Ÿã˜ã‚‹Promiseã®è‰¯ã•ã‚’ã–ã£ãã‚Šæ›¸ãã¨&hellip;</p>

<ul>
<li>éåŒæœŸå‡¦ç†ã‚’ç¹°ã‚Šè¿”ã™å ´åˆã§ã‚‚ã€æ·±ã„ãƒã‚¹ãƒˆã«ãªã‚‰ãªã„</li>
<li>éåŒæœŸå‡¦ç†ã‚’ç¹°ã‚Šè¿”ã™å ´åˆã§ã‚‚ã€è¦‹ã‹ã‘ä¸Šã€ç›´åˆ—çš„ã«å‡¦ç†ã‚’æ›¸ã‘ã‚‹</li>
</ul>


<p>ã¨ã„ã†ã“ã¨ã«ã¤ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>

<p>å…·ä½“çš„ãªä¾‹ã«ã¤ã„ã¦ã¯ã€Node.jsã§èª¬æ˜ã—ã¾ã™ã€‚</p>

<h4>Node.jsã§ã®Promiseã®ä¾‹</h4>

<p>æ—©é€Ÿã€è¦‹ã¦ã„ãã¾ã™ã€‚<br/>
Node.jsã§éåŒæœŸå‡¦ç†ã‚’å®šç¾©ã™ã‚‹å ´åˆã€</p>

<p>```javascript
// éåŒæœŸå‡¦ç†ã‚’æŒã£ãŸãƒ¡ã‚½ãƒƒãƒ‰
function p(msg, callback) {</p>

<pre><code>setTimeout(function() {
    callback(msg);
}, 1000);
</code></pre>

<p>}
```</p>

<p>ã¨ãªã‚Šã¾ã™ã€‚<br/>
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã™ã‚‹å ´åˆã€</p>

<p>```javascript
p(&ldquo;Hello&rdquo;, function(msg1) {</p>

<pre><code>console.log(msg1 + ", date: " + new Date());
p("Good Evening", function(msg2) {
    console.log(msg2 + ", date: " + new Date());
    p("Good Bye", function(msg3) {
        console.log(msg3 + ", date: " + new Date());
    });
});
</code></pre>

<p>});
```</p>

<p>ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br/>
ãƒã‚¹ãƒˆæ·±ã„ã§ã™ã­&hellip;ã€‚</p>

<p>ã“ã‚Œã‚’Promiseã‚’ç”¨ã„ã¦æ›¸ãç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<br/>
ã¾ãšã¯ãƒ¡ã‚½ãƒƒãƒ‰ã®å®šç¾©ã«Promiseã‚’é©ç”¨ã—ã¾ã™ã€‚</p>

<p>```javascript
function p(msg) {</p>

<pre><code>return new Promise(function(resolve) {
    setTimeout(function() {
        resolve(msg);
    }, 1000);
});
</code></pre>

<p>}
```</p>

<p>ã“ã†ã™ã‚‹ã“ã¨ã§ã€å‘¼ã³å‡ºã—å´ã§ä¸‹è¨˜ã®ã‚ˆã†ã«æµ…ã„ãƒã‚¹ãƒˆã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<p>```javascript
p(&ldquo;Hello&rdquo;).then(function(msg1) {</p>

<pre><code>console.log(msg1 + ", date: " + new Date());
return p("Good Evening");
</code></pre>

<p>})
.then(function(msg2) {</p>

<pre><code>console.log(msg2 + ", date: " + new Date());
return p("Good Bye")
</code></pre>

<p>})
.then(function(msg3) {</p>

<pre><code>console.log(msg3 + ", date: " + new Date());
</code></pre>

<p>});
```</p>

<p>ã†ã‚€ã€‚ã‹ãªã‚Šæµ…ããªã‚Šã¾ã—ãŸã­ã€‚<br/>
ã“ã‚Œã‚’Swiftã§æ›¸ãã¨ã©ã†ãªã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>

<h4>Swiftã§ã®Promiseã®ä¾‹</h4>

<p>Swiftã§ã‚‚éåŒæœŸå‡¦ç†ã‚’å®šç¾©ã™ã‚‹å ´åˆã€</p>

<p>```objective-c
func p(msg: String, closure: (String &ndash;> ())) {</p>

<pre><code>let queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
dispatch_async(queue, {
    sleep(1)
    dispatch_sync(dispatch_get_main_queue(), {
        closure(msg)
    })
})
</code></pre>

<p>}
```</p>

<p>ã®ã‚ˆã†ã«æ›¸ã‘ãŸã‚Šã—ã¾ã™ã€‚<br/>
ã“ã‚Œã‚’è¤‡æ•°å›å‘¼ã³å‡ºã™å ´åˆã€</p>

<p>```objective-c
p(&ldquo;Hello&rdquo;) { (msg1) in</p>

<pre><code>print(msg1 + ", date: \(NSDate())")
p("Good Evening") { (msg2) in
    print(msg2 + ", date: \(NSDate())")
    p("Good Bye") { (msg3) in
        print(msg3 + ", date: \(NSDate())")
    }
}
</code></pre>

<p>}
```</p>

<p>ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br/>
åŒæ§˜ã«ãƒã‚¹ãƒˆãŒæ·±ããªã‚Šã¾ã™ã­&hellip;ã€‚</p>

<p>ã§ã¯ã€Promiseã§ãƒã‚¹ãƒˆã‚’æ”¹å–„ã—ã¾ã—ã‚‡ã†ã€‚<br/>
Swiftã§ã¯ã€OSSã®<a href="https://github.com/Thomvis/BrightFutures">BrightFuture</a>ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚<br/>
å°å…¥ã¯ã„ã¤ã‚‚é€šã‚ŠCocoaPodsã‚’ä½¿ã„ã¾ã—ãŸã€‚</p>

<p>1ï¼ Podfileã«ä¸‹è¨˜ã‚’è¨˜è¼‰</p>

<p>```objective-c
source &lsquo;<a href="https://github.com/CocoaPods/Specs.git">https://github.com/CocoaPods/Specs.git</a>&rsquo;
platform :ios, &lsquo;8.0&rsquo;
use_frameworks!</p>

<p>pod &lsquo;BrightFutures&rsquo;
```</p>

<p>2ï¼<code>pod install</code>ã‚’å®Ÿè¡Œ</p>

<p>å°å…¥ãŒå®Œäº†ã—ãŸã‚‰ã€å‡¦ç†ã‚’æ›¸ãæ›ãˆã¦ã„ãã¾ã™ã€‚<br/>
ãƒ¡ã‚½ãƒƒãƒ‰ã«Promiseã‚’é©ç”¨ã—ã¾ã—ã‚‡ã†ã€‚</p>

<p>```objective-c
func p_future(msg: String) &ndash;> Future&lt;String, NoError> {</p>

<pre><code>let promise = Promise&lt;String, NoError&gt;()
let queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

dispatch_async(queue, {
    sleep(1)
    dispatch_sync(dispatch_get_main_queue(), {
        promise.success(msg)
    })
})

return promise.future
</code></pre>

<p>}
```</p>

<p>ã“ã‚Œã‚’å‘¼ã³å‡ºã™ã¨ãã¯ä¸‹è¨˜ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚</p>

<p>```objective-c
p_future(&ldquo;Hello&rdquo;).flatMap { msg1 in</p>

<pre><code>print(msg1 + ", date: \(NSDate())")
p_future("Good Evening")
</code></pre>

<p>}.flatMap { msg2 in</p>

<pre><code>print(msg2 + ", date: \(NSDate())")
p_future("Good Bye")
</code></pre>

<p>}.onSuccess { (msg3) in</p>

<pre><code>print(msg3)
</code></pre>

<p>}
```</p>

<p>ãƒã‚¹ãƒˆãŒæµ…ããªã‚Šã¾ã—ãŸã­ã€‚<br/>
ã“ã†ã—ã¦æ¯”è¼ƒã—ã¦ã¿ã‚‹ã¨ã€Node.jsã¨Swiftã§å‘¼ã³å‡ºã—å´ã®æ›¸ãæ–¹ã¯ã‹ãªã‚Šä¼¼ã¦ã„ã¾ã™ã­ã€‚<br/>
Swiftã ã‘ã‚’çœºã‚ã¦ã¿ã¦ã‚‚ã‚ˆãã‚ã‹ã‚‰ãªã„ã¨ã„ã†æ–¹ã¯Node.jsã®æ–¹ã‚‚è¦‹ã¦ã¿ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>ä»Šå›ã¯ã‹ãªã‚ŠåŸºæœ¬çš„ãªä¾‹ã‚’æ›¸ã‹ã›ã¦é ‚ãã¾ã—ãŸãŒã€å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚<br/>
ã¨ã„ã£ãŸã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
</feed>
