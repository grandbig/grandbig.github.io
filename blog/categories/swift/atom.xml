<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: swift | Takahiro Octopress Blog]]></title>
  <link href="http://grandbig.github.io/blog/categories/swift/atom.xml" rel="self"/>
  <link href="http://grandbig.github.io/"/>
  <updated>2016-08-30T19:07:36+09:00</updated>
  <id>http://grandbig.github.io/</id>
  <author>
    <name><![CDATA[Takahiro]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[RxSwiftã‚’å‹‰å¼·ã—ã‚ˆã†ï¼(3)]]></title>
    <link href="http://grandbig.github.io/blog/2016/08/30/rxswift-3/"/>
    <updated>2016-08-30T16:42:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/08/30/rxswift-3</id>
    <content type="html"><![CDATA[<h3>RxSwiftã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¦‹ã¦ã¿ã‚ˆã†</h3>

<p>å‰å›ã«å¼•ãç¶šãRxSwiftã‚’å‹‰å¼·ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ä»Šå›ã¯<a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/API.md">GitHub: Reactive/RxSwift APIä¸€è¦§</a>ã‹ã‚‰ãƒ¡ã‚¤ãƒ³ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h4>asObservable</h4>

<p>ã“ã‚Œã¯<code>ReactiveX</code>ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹<code>From</code>ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã¨åŒç¾©ã§ã™ã€‚<br/>
æ§˜ã€…ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚</p>

<p>åˆ©ç”¨ä¾‹ã¯ä¸‹è¨˜ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let array: [Int] = [1, 2, 3, 4, 5]
let variable = Variable(array)
variable.asObservable.subscribe { (event) in</p>

<pre><code>print("Event is \(event)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>variable.value = [6, 7, 8]</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Event is Next([1, 2, 3, 4, 5])
Event is Next([6, 7, 8])
Event is Completed
```</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>create</h4>

<p>0ã‹ã‚‰<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source = Observable.create { (observer: AnyObserver<Int>) &ndash;> Disposable in</p>

<pre><code>observer.onNext(1)
observer.onCompleted()

return AnonymousDisposable {
    print("Disposed")
}
</code></pre>

<p>}</p>

<p>source.subscribeNext { (elem) in</p>

<pre><code>print("Event is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™
Event is 1
Disposed
```</p>

<h4>deferred</h4>

<p>Subscribeã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source = Observable.deferred { () &ndash;> Observable<Int> in</p>

<pre><code>return Observable.just(1)
</code></pre>

<p>}
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™
Event is 1
```</p>

<h4>empty</h4>

<p>ç©ºã®(ä½•ã®å€¤ã‚‚æŒãŸãªã„)<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
é€šå¸¸é€šã‚Šã€çµ‚äº†å‡¦ç†ã¯å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source: Observable<Int> = Observable.empty()
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
// ç©ºã®ãŸã‚ä½•ã‚‚å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“
```</p>

<h4>never</h4>

<p>ç©ºã®(ä½•ã®å€¤ã‚‚æŒãŸãªã„)<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>empty</code>ã¨ç•°ãªã‚‹ã®ã¯çµ‚äº†å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œãªã„ã“ã¨ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source: Observable<Int> = Observable.never()
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
// ç©ºã®ãŸã‚ä½•ã‚‚å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“
```</p>

<h4>error</h4>

<p>ç©ºã®(ä½•ã®å€¤ã‚‚æŒãŸãªã„)<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>empty</code>, <code>never</code>ã¨ç•°ãªã‚Šã€ã‚¨ãƒ©ãƒ¼ã‚’æŒã£ãŸçµ‚äº†å‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let error = NSError(domain: &ldquo;test&rdquo;, code: -1, userInfo: nil)
let source: Observable<Int> = Observable.error(error)
source.subscribeError { (error) in</p>

<pre><code>print("Error is \(error)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Error is Error Domain=test Code=-1 &ldquo;(null)&rdquo;
```</p>

<h4>toObservable</h4>

<p>æ§˜ã€…ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>asObservable</code>ã¨ã¯åˆ©ç”¨æ–¹æ³•ãŒç•°ãªã‚Šã¾ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let array: [Int] = [1, 2, 3]
array.toObservable().subscribeNext { (elem) in</p>

<pre><code>print("Number is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Number is 1
Number is 2
Number is 3
```</p>

<h4>interval</h4>

<p>ä¸€å®šæœŸé–“ã‚ã‘ã¦å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>JavaScript</code>ã§è¨€ã†ã¨ã“ã‚ã®<code>setTimeInterval</code>ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let timer: Observable<Int> = Observable.interval(5.0, scheduler: MainScheduler.instance)
timer.subscribeNext { (count) in</p>

<pre><code>print("log output")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
// 5ç§’å¾Œã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
log output
```</p>

<h4>just</h4>

<p>å¼•æ•°ã«æŒ‡å®šã—ãŸç‰¹å®šã®å‹ã‚’è¿”å´ã™ã‚‹<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source = Observable.just(1)
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Elem is 1
```</p>

<h4>of</h4>

<p>æ§˜ã€…ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’<code>Observable</code>å‹ã®ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>asObservable</code>ã‚„<code>toObservable</code>ã¨ã¯åˆ©ç”¨æ–¹æ³•ãŒç•°ãªã‚Šã¾ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source = Observable.of(1)
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Elem is 1
```</p>

<h4>range</h4>

<p>ç‰¹å®šã®ç¯„å›²ã®<code>Int</code>å‹ã‚’æŒã¤<code>Observable</code>å‹ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source: Observable<Int> = Observable.range(start: 1, count: 3)
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Elem is 1
Elem is 2
Elem is 3
```</p>

<h4>repeatElement</h4>

<p>æŒ‡å®šã—ãŸå›æ•°ã€å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«åˆ©ç”¨ã™ã‚‹<code>Observable</code>å‹ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>take</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¦å›æ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>

<p>```objective-c
let disposeBag = DisposeBag()   // è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦</p>

<p>let source = Observable.repeatElement(1).take(3)
source.subscribeNext { (elem) in</p>

<pre><code>print("Elem is \(elem)")
</code></pre>

<p>}.addDisposableTo(disposeBag)</p>

<p>// çµæœã¯ä¸‹è¨˜ã§ã™ã€‚
Elem is 1
Elem is 1
Elem is 1
```</p>

<h4>timer</h4>

<p>ä¸€å®šæ™‚é–“çµŒéå¾Œã«å‡¦ç†ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆã«åˆ©ç”¨ã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
<code>JavaScript</code>ã§è¨€ã†ã¨ã“ã‚ã®<code>setTimeout</code>ã§ã™ã€‚</p>

<p>```objective-c
let timer: Observable<Int> = Observable.timer(5.0, scheduler: MainScheduler.instance)
timer.subscribeNext { (count) in</p>

<pre><code>print("log output")
</code></pre>

<p>}.addDisposableTo(disposeBag)
```</p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦ã€ä»Šå›ã¯<code>Creating Observables</code>ã®ã¿ã‚’å–ã‚Šä¸Šã’ã•ã›ã¦é ‚ãã¾ã—ãŸãŒã€ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
ç­†è€…ã‚‚ã‚¤ãƒã‚¤ãƒä½¿ã„æ–¹ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãŒãŸãã•ã‚“ã‚ã£ãŸã®ã§ã€å¤šå°‘ãªã‚Šã¨ã‚‚ä½¿ãˆãã†ãªæ°—ãŒã—ã¦ãã¾ã—ãŸã€‚<br/>
<code>Transforming Observables</code>, <code>Filtering Observables</code> &hellip;. ã¨å…¨ã¦è¦‹ã¦ã„ã‘ã‚‹ã¨è‰¯ã„ã®ã§ã™ãŒã€çµæ§‹æ•°ãŒå¤šã„ã§ã™ã­ã€‚<br/>
æ™‚é–“ãŒã‚ã‚‹ã¨ãã«ç¶šãã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>ã¨è¨€ã£ãŸã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RxSwiftã‚’å‹‰å¼·ã—ã¦ã¿ã‚ˆã†ï¼(2)]]></title>
    <link href="http://grandbig.github.io/blog/2016/08/29/rxswift-2/"/>
    <updated>2016-08-29T22:40:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/08/29/rxswift-2</id>
    <content type="html"><![CDATA[<h3>RxSwiftã®å…¬å¼Exampleã‚’è¦—ã„ã¦ã¿ã‚‹(2)</h3>

<p>å‰å›ã«å¼•ãç¶šãRxSwiftã®å…¬å¼Exampleã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
å…¬å¼ã‚½ãƒ¼ã‚¹ã¯<a href="https://github.com/ReactiveX/RxSwift">GitHub: ReactiveX/RxSwift</a>ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>

<h4>GeolocationExample</h4>

<p>ä½ç½®æƒ…å ±ã‚’ç”¨ã„ãŸã¨ãã®Rxã®æœ‰åŠ¹æ€§ãŒè¡¨ç¾ã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
æ—©é€Ÿè¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>ã¾ãšã¯ã€<code>CoreLocation</code>ã®ã‚³ã‚¢éƒ¨åˆ†ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã‚‹<code>GeolocationService</code>ã§ã™ã€‚</p>

<p>```objective-c
import Foundation
import CoreLocation
import RxSwift
import RxCocoa</p>

<p>class GeolocationService {</p>

<pre><code>static let instance = GeolocationService()
// (1)
private (set) var authorized: Driver&lt;Bool&gt;
private (set) var location: Driver&lt;CLLocationCoordinate2D&gt;

private let locationManager = CLLocationManager()

private init() {
    locationManager.distanceFilter = kCLDistanceFilterNone
    locationManager.desiredAccuracy = kCLLocationAccuracyBestForNavigation

    // (2)
    authorized = Observable.deferred { [weak locationManager] in
        let status = CLLocationManager.authorizationStatus()
        guard let locationManager = locationManager else {
            // (3)
            return Observable.just(status)
        }
        return locationManager
            .rx_didChangeAuthorizationStatus
            .startWith(status) // (4)
        }
        .asDriver(onErrorJustReturn: CLAuthorizationStatus.NotDetermined) // (5)
        .map {
            switch $0 {
                case .AuthorizedAlways:
                    return true
                default:
                    return false
            }
        }
}
</code></pre>

<p>}
```</p>

<p>ä¸Šè¨˜ã‚½ãƒ¼ã‚¹ã§ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹éƒ¨åˆ†ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚</p>

<p>(1): <code>Driver</code><br/>
æœ«å°¾ã«å‚è€ƒURLã¨ã—ã¦ä¸Šã’ã•ã›ã¦é ‚ã„ãŸè¨˜äº‹ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€<br/>
<code>Driver</code>å‹ã§å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®å‡¦ç†<code>asDriver</code>ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ç¶šã‘ã¦æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚</p>

<p>(2): <code>deferred</code><br/>
ObserverãŒSubscribe(è³¼èª­)ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å‹•çš„ã«Observableã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br/>
â€» å› ã¿ã«æ–°è¦Observableã‚’Subscribeã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ¯å›ç”Ÿæˆã—ã¾ã™ã€‚</p>

<p>(3): <code>just</code><br/>
å¼•æ•°ã«å–ã£ãŸç‰¹å®šã®å‹ã‚’è¿”å´ã™ã‚‹Observableã‚’ç”Ÿæˆã—ã¾ã™ã€‚<br/>
ã“ã®å ´åˆã¯<code>CLAuthorizationStatus</code>å‹ã®Observableã§ã™ã€‚</p>

<p>(4): <code>startWith</code><br/>
æƒ³å®šã—ãŸemitå¯¾è±¡å€¤ã®å‰ã«ä½•ã‚‰ã‹ã®å€¤ã‚’emitã—ãŸã„å ´åˆã«åˆ©ç”¨ã—ã¾ã™ã€‚<br/>
ã“ã®å ´åˆã€<code>rx_didChangeAuthoricationStatus</code>ã‚’emitã™ã‚‹å‰ã«ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚<br/>
(ã“ã‚ŒãŒæã‚‰ãã€ä¸€ç•ªã‚ã‹ã‚Šã‚„ã™ã„ä¾‹ã§ã™ â†’ <a href="http://www.introtorx.com/Content/v1.0.10621.0/12_CombiningSequences.html#StartWith">Introduction to Rx: startWith</a>)</p>

<p>(5): <code>asDriver</code><br/>
(1)ã§èª¬æ˜ã—ãŸ<code>Driver</code>ã«é–¢ä¿‚ã™ã‚‹ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚<br/>
ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã«<code>onErrorJustReturn</code>ã§æŒ‡å®šã—ãŸå€¤ã‚’è¿”å´ã—ã¦å‡¦ç†ã‚’ç¶šã‘ã¾ã™ã€‚</p>

<p>ç¶šã„ã¦ã€<code>GeolocationService</code>ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹<code>GeolocationViewController</code>ã§ã™ã€‚</p>

<p>```objective-c
import Foundation
import UIKit
import RxSwift
import RxCocoa</p>

<p>// (6)
private extension UILabel {</p>

<pre><code>var rx_driveCoordinates: AnyObserver&lt;CLLocationCoordinate2D&gt; {
    return UIBindingObserver(UIElement: self) { label, location in
        label.text = "Lat: \(location.latitude)\nLon: \(location.longitude)"
    }.asObserver()
}
</code></pre>

<p>}</p>

<p>// (7)
private extension UIView {</p>

<pre><code>var rx_driveAuthorization: AnyObserver&lt;Bool&gt; {
    return UIBindingObserver(UIElement: self) { view, authorized in
        if authorized {
            view.hidden = true
            view.superview?.sendSubviewToBack(view)
        }
        else {
            view.hidden = false
            view.superview?.bringSubviewToFront(view)
        }
    }.asObserver()
}
</code></pre>

<p>}</p>

<p>class GeolocationViewController: ViewController {</p>

<pre><code>@IBOutlet weak private var noGeolocationView: UIView!
@IBOutlet weak private var button: UIButton!
@IBOutlet weak private var button2: UIButton!
@IBOutlet weak var label: UILabel!

override func viewDidLoad() {
    super.viewDidLoad()

    let geolocationService = GeolocationService.instance

    geolocationService.authorized
        .drive(noGeolocationView.rx_driveAuthorization) // (8)
        .addDisposableTo(disposeBag)

    geolocationService.location
        .drive(label.rx_driveCoordinates) // (8)
        .addDisposableTo(disposeBag)

    button.rx_tap
        .bindNext { [weak self] in
            self?.openAppPreferences()
        }
        .addDisposableTo(disposeBag)

    button2.rx_tap
        .bindNext { [weak self] in
            self?.openAppPreferences()
        }
        .addDisposableTo(disposeBag)
}

private func openAppPreferences() {
    UIApplication.sharedApplication().openURL(NSURL(string: UIApplicationOpenSettingsURLString)!)
}
</code></pre>

<p>}
```</p>

<p>(6): <code>rx_driveCoordinates</code><br/>
è¦‹ã¦ã®é€šã‚Šã“ã“ã§<code>UILabel</code>ã®<code>extension</code>ã‚’ã—ã¦ã„ã¾ã™ã€‚<br/>
<code>UILabel</code>ã®<code>text</code>å†…å®¹ã‚’ä»»æ„ã®å€¤ã§è¿”å´ã™ã‚‹ãŸã‚ã«ä½œæˆã—ã¦ã„ã¾ã™ã€‚<br/>
(<code>asObserver</code>ã‚’ã¤ã‘ã‚‹ã“ã¨ã§<code>rx_driveCoordinates</code>ã¨ã„ã†<code>AnyObserver</code>å‹ã®å¤‰æ•°å®šç¾©ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚)</p>

<p>(7): <code>rx_driveAuthorization</code><br/>
åŒã˜ã<code>UIView</code>ã®<code>extension</code>ã‚’ã—ã¦ã„ã¾ã™ã€‚<br/>
<code>authorized</code>ã®å€¤ã§Viewã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚</p>

<p>(8): <code>drive</code><br/>
ã“ã“ã§æ–°ãŸã«Subscriptionã‚’ç”Ÿæˆã—ã¦ã€å¼•æ•°ã«å–ã£ãŸObserverã«å‡¦ç†ã®å®Ÿè¡Œã‚’è¦è«‹ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ä»Šå›ã®Exampleã‚’è¦‹ã¦ã¿ã‚‹ã¨ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒæ„Ÿã˜ã‚‰ã‚Œã¾ã™ã€‚</p>

<ul>
<li>Rxã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§éåŒæœŸå‡¦ç†ã‚’ç›´åˆ—çš„ã«æ›¸ã‘ã‚‹</li>
<li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ç›´åˆ—çš„ã«æ›¸ã‘ã‚‹ã“ã¨ã§å¾Œå‡¦ç†ã‚‚ç›´åˆ—çš„ã«çµ±ä¸€ã—ã¦è¦‹ã‚Œã‚‹(<code>jQuery</code>ã®<code>ajax</code>ãƒ¡ã‚½ãƒƒãƒ‰ã®<code>always</code>çš„ãªã‚¤ãƒ¡ãƒ¼ã‚¸)</li>
<li>å‡¦ç†ã®æ‹¡å¼µãŒRxã§ç”¨æ„ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã§æ¯”è¼ƒçš„ã«å®¹æ˜“ã«æ›¸ã‘ã‚‹</li>
</ul>


<h3>Rxã§æŠŠæ¡ã—ã¦ãŠããŸã„APIä¸€è¦§</h3>

<p>RxSwiftã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ä¸­ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚<br/>
<a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/API.md">API.md</a>ã‚’èª­ã‚€ã ã‘ã§ã‚‚ã‹ãªã‚Šç†è§£ãŒé€²ã‚€ã¨æ€ã‚ã‚Œã¾ã™ã€‚</p>

<p>ç‰¹ã«è¨€èªãŒSwiftã§ã‚ã‚‹ãŒæ•…ã«ä»–ã®Rxãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã¯ãƒ¡ã‚½ãƒƒãƒ‰åãŒç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br/>
(<code>defer</code>ã§ãªã<code>deferred</code>ã€<code>repeat</code>ã§ãªã<code>repeatElement</code>ãªã©)</p>

<p>ä¸€åº¦ã¯ç›®ã‚’é€šã—ã¦ãŠãã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br/>
ã¨è¨€ã„ã¤ã¤ã€ç­†è€…ã‚‚å…¨ç„¶è¦‹ã‚Œã¦ã„ã¾ã›ã‚“ãŒ&hellip;</p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦ã€ä»Šå›ã¯å…¬å¼Exampleã®1ã¤ã‚’è¦‹ã‚‹ã ã‘ã«ç•™ã¾ã‚Šã¾ã—ãŸãŒå¦‚ä½•ã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
ç­†è€…ã¨ã—ã¦ã¯Rxã®ä½¿ã„æ–¹ã®ç†è§£ãŒã ã„ã¶é€²ã‚“ã æ°—ãŒã—ã¦ãŠã‚Šã¾ã™ã€‚<br/>
å¼•ãç¶šãRxã«é–¢ã™ã‚‹å‹‰å¼·ã¯ç¶šã‘ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
ã¨è¨€ã£ãŸã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<p>å‚è€ƒ:</p>

<ul>
<li><a href="http://qiita.com/yuzushioh/items/0a4483502c5c8569790a">RxSwift/RxCocoa Driver Unitã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ãŸã€‚</a></li>
</ul>


<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RxSwiftã‚’å‹‰å¼·ã—ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/08/21/rxswift-1/"/>
    <updated>2016-08-21T18:09:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/08/21/rxswift-1</id>
    <content type="html"><![CDATA[<h3>RxSwiftã¨ã¯</h3>

<p>Reactive Extensions(ä»¥ä¸‹ã€Rx)ã®Swiftç‰ˆã§ã™ã€‚<br/>
ã¨ä¸€è¨€ã§è¨€ã£ã¦ã‚‚ã€ã€ŒRxã¨ã¯ãªã‚“ãã‚„ï¼Ÿï¼Ÿã€ã¨ãªã£ã¦ã—ã¾ã†ã‹ã¨æ€ã„ã¾ã™ã€‚<br/>
(å¤šåˆ†ã«æ¼ã‚Œãšã€ç­†è€…ã‚‚ãã†ã§ã™&hellip;)<br/>
ãã“ã§ã€ã„ã‚ã„ã‚ã¨èª¿ã¹ã¦ã¿ã‚‹ã¨ã€</p>

<ul>
<li>ã€ŒéåŒæœŸ/ã‚¤ãƒ™ãƒ³ãƒˆ/æ™‚é–“ã«é–¢ã™ã‚‹å‡¦ç†ã‚’LINQã®å½¢å¼ã§ç°¡æ½”ã‹ã¤å®£è¨€çš„ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã€ãŒã§ãã‚‹ã®ãŒç‰¹å¾´</li>
<li>è¦³æ¸¬å¯èƒ½ (observable) ãªã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¨ LINQ ã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¯ã‚¨ãƒªæ¼”ç®—å­ã‚’ä½¿ã£ã¦ã€éåŒæœŸãªã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’åˆæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª</li>
</ul>


<p>ãªã‚“ã¦è©±ãŒå‡ºã¦ãã¾ã™ã€‚<br/>
ç¢ºã‹ã«éåŒæœŸå‡¦ç†ã¯ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘ã«ãªã‚Šã‚„ã™ã„ã®ã§ã€ä½•ã¨ãªãRxã¯è‰¯ã•ãã†ãªæ°—ãŒã—ã¦ãã¾ã—ãŸã€‚<br/>
ä»Šå›ã¯ã¾ãšè§¦ã£ã¦æ…£ã‚Œã¦ã¿ã‚ˆã†ã¨ã„ã†ã“ã¨ã§è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h3>RxSwiftã§UI</h3>

<p>ã¾ãšã¯RxSwiftã®æ›¸ãæ–¹ã‚’è¦šãˆã‚‹ãŸã‚ã«UIé–¢é€£ã‹ã‚‰è¦‹ã¦ãã¾ã—ã‚‡ã†ã€‚</p>

<h4>ã‚µãƒ³ãƒ—ãƒ«ç”»é¢</h4>

<p>ä¸‹è¨˜ã®ã‚ˆã†ã«ç”»é¢ã‚’ä½œæˆã—ã¾ã™ã€‚<br/>
<img src="/images/rxswift_1.png" alt="ã‚µãƒ³ãƒ—ãƒ«ç”»é¢" /></p>

<h4>RxSwiftã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h4>

<p>ä¸‹è¨˜ã®ã‚ˆã†ã«<code>Podfile</code>ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

<p>```objective-c
use_frameworks!</p>

<p>target &lsquo;RxSwiftSample&rsquo; do</p>

<pre><code>pod 'RxSwift',    '~&gt; 2.0'
pod 'RxCocoa',    '~&gt; 2.0'
</code></pre>

<p>end</p>

<p>target &lsquo;RxSwiftSampleTests&rsquo; do</p>

<pre><code>pod 'RxBlocking', '~&gt; 2.0'
pod 'RxTests',    '~&gt; 2.0'
</code></pre>

<p>end</p>

<p>target &lsquo;RxSwiftSampleUITests&rsquo; do</p>

<pre><code>pod 'RxBlocking', '~&gt; 2.0'
pod 'RxTests',    '~&gt; 2.0'
</code></pre>

<p>end
```</p>

<p>ãã—ã¦ã€<code>pod install</code>ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>

<h4>RxSwiftã‚’ç”¨ã„ãŸUIã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…</h4>

<p>ä¸‹è¨˜ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>

<p>```objective-c
// ViewController.swift
import UIKit
import RxSwift
import RxCocoa</p>

<p>class ViewController: UIViewController {</p>

<pre><code>// UIéƒ¨å“
@IBOutlet weak var sampleBtn: UIButton!
@IBOutlet weak var sampleTextField: UITextField!
@IBOutlet weak var sampleLabel: UILabel!

// è‡ªå‹•unsubscribeã®ãŸã‚ã«å¿…è¦
let disposeBag = DisposeBag()

override func viewDidLoad() {
    super.viewDidLoad()

    // ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    self.sampleBtn.rx_tap.subscribeNext { [unowned self] _ in
        self.showAlert()
    }.addDisposableTo(disposeBag)

    // ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å…¥åŠ›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    self.sampleTextField.rx_text
        .map { "Your Text is \($0)" }
        .bindTo(self.sampleTextField.rx_text)
        .addDisposableTo(disposeBag)
}

&lt;çœç•¥&gt;

func showAlert() {
    let alert = UIAlertController(title: "Sample Alert", message: "Can you see a sample alert?", preferredStyle: .Alert)
    let ok = UIAlertAction(title: "OK", style: .Default) { (action) in
        // ç‰¹ã«ä½•ã‚‚ã—ãªã„
    }
    alert.addAction(ok)
    presentViewController(alert, animated: true, completion: nil)
}
</code></pre>

<p>}
```</p>

<p>ä¸Šè¨˜ã®UIã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚ã¾ã‚Šã«ã‚‚å˜ç´”ãªä¾‹ã§ã‚ã‚‹ãŸã‚ã€æ©æµã‚’å—ã‘ã‚‰ã‚Œã¦ã„ã‚‹æ°—ã¯ã—ãªã„ã§ã™ã­&hellip;<br/>
ã„ã¤ã‚‚ã®ã‚ˆã†ã«Xcodeã§ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¹‹ã’ã¦ã„ã‚‹ã®ã¨åŒã˜æ°—ãŒã™ã‚‹&hellip;</p>

<h3>RxSwiftã®å…¬å¼Exampleã‚’è¦—ã„ã¦ã¿ã‚‹</h3>

<p>å…ˆã»ã©ã®ä¾‹ã§ã¯ã‚¤ãƒã‚¤ãƒè‰¯ã•ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§ã€å…¬å¼ã®Exampleã‚’è¦—ã„ã¦ã¿ã¾ã™ã€‚<br/>
å…¬å¼ã®Exampleã¯<a href="https://github.com/ReactiveX/RxSwift">GitHub: ReactiveX/RxSwift</a>ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>

<h4>NumbersViewController</h4>

<p>æœ€ã‚‚ç°¡å˜ãªExampleã¯ã“ã‚Œã«ãªã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚</p>

<p>```objective-c
import Foundation
import UIKit
import RxSwift
import RxCocoa</p>

<p>class NumbersViewController: ViewController {</p>

<pre><code>@IBOutlet weak var number1: UITextField!
@IBOutlet weak var number2: UITextField!
@IBOutlet weak var number3: UITextField!

@IBOutlet weak var result: UILabel!

override func viewDidLoad() {
    super.viewDidLoad()
    // æ³¨ç›®ï¼ï¼
    Observable.combineLatest(number1.rx_text, number2.rx_text, number3.rx_text) { textValue1, textValue2, textValue3 -&gt; Int in
        return (Int(textValue1) ?? 0) + (Int(textValue2) ?? 0) + (Int(textValue3) ?? 0)
    }
    .map { $0.description }
    .bindTo(result.rx_text)
    .addDisposableTo(disposeBag)
}
</code></pre>

<p>}
```</p>

<p>ã“ã“ã§æ³¨ç›®ã—ãŸã„ã®ã¯<code>Observable.combineLatest</code>ã§ã™ã€‚<br/>
Exampleã§ã¯ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ä¸€æ°—ã«3ã¤ã®<code>UITextField</code>ã‹ã‚‰å€¤ã‚’å–å¾—ã—ã¦ã€åˆè¨ˆå€¤ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚<br/>
<code>Obsertvable.combineLatest</code>ã¯åå‰ã‹ã‚‰å¯Ÿã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€3ã¤ã®<code>UITextField</code>ã®ã„ãšã‚Œã‹ã®å€¤ãŒå¤‰ã‚ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§åˆè¨ˆå€¤ãŒå†è¨ˆç®—ã•ã‚Œã¾ã™ã€‚</p>

<p>ã“ã‚Œã ã‘ã§ã‚‚å°‘ã—ä¾¿åˆ©ãªæ„Ÿã˜ãŒä¼ã‚ã£ã¦ãã¾ã—ãŸã€‚</p>

<h4>SimpleValidationViewController</h4>

<p>ç¶šã„ã¦ç€æ‰‹ã—ã‚„ã™ã„Exampleã¯ã“ã¡ã‚‰ã«ãªã‚Šãã†ã§ã™ã€‚</p>

<p>```objective-c
import Foundation
import UIKit
import RxSwift
import RxCocoa</p>

<p>let minimalUsernameLength = 5
let minimalPasswordLength = 5</p>

<p>class SimpleValidationViewController : ViewController {</p>

<pre><code>@IBOutlet weak var usernameOutlet: UITextField!
@IBOutlet weak var usernameValidOutlet: UILabel!
@IBOutlet weak var passwordOutlet: UITextField!
@IBOutlet weak var passwordValidOutlet: UILabel!
@IBOutlet weak var doSomethingOutlet: UIButton!

override func viewDidLoad() {
    super.viewDidLoad()

    usernameValidOutlet.text = "Username has to be at least \(minimalUsernameLength) characters"
    passwordValidOutlet.text = "Password has to be at least \(minimalPasswordLength) characters"

    // æ³¨ç›®ï¼ï¼
    let usernameValid = usernameOutlet.rx_text
        .map { $0.characters.count &gt;= minimalUsernameLength }
        .shareReplay(1)

    let passwordValid = passwordOutlet.rx_text
        .map { $0.characters.count &gt;= minimalPasswordLength }
        .shareReplay(1)

    let everythingValid = Observable.combineLatest(usernameValid, passwordValid) { $0 &amp;&amp; $1 }
        .shareReplay(1)

    usernameValid
        .bindTo(passwordOutlet.rx_enabled)
        .addDisposableTo(disposeBag)

    usernameValid
        .bindTo(usernameValidOutlet.rx_hidden)
        .addDisposableTo(disposeBag)

    passwordValid
        .bindTo(passwordValidOutlet.rx_hidden)
        .addDisposableTo(disposeBag)

    everythingValid
        .bindTo(doSomethingOutlet.rx_enabled)
        .addDisposableTo(disposeBag)

    doSomethingOutlet.rx_tap
        .subscribeNext { [weak self] in self?.showAlert() }
        .addDisposableTo(disposeBag)
}

func showAlert() {
    let alertView = UIAlertView(
        title: "RxExample",
        message: "This is wonderful",
        delegate: nil,
        cancelButtonTitle: "OK"
    )

    alertView.show()
}
</code></pre>

<p>}
```</p>

<p>ã“ã“ã§æ³¨ç›®ã—ãŸã„ã®ã¯<code>shareReplay(1)</code>ã¨ã„ã†è¨˜è¿°ã§ã™ã€‚<br/>
ã“ã®Exampleã§ã¯ã€<br/>
<code>username</code>ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªã‚¢ã—ã¦ã„ã‚Œã°ã€<code>passwordOutlet.rx_enabled</code>ã¨<code>usernameValidOutlet.rx_hidden</code>ã®2ã¤ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

<p>é€šå¸¸ã ã¨ã€<code>usernameValid</code>ãŒ2å›å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã†ã¨ã“ã‚ã‚’<code>shareReplay(1)</code>ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€æœ€é©ãªå›æ•°ã ã‘å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚<br/>
è©³ã—ãã¯ã€<a href="http://qiita.com/kazu0620/items/bde4a65e82a10bd33f88">hareReplayã‚’ã¡ã‚ƒã‚“ã¨æ›¸ã„ã¦ãŠè¡Œå„€è‰¯ãã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­ã—ã‚ˆã†</a>ã‚’èª­ã‚€ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚</p>

<p>ã“ã“ã¾ã§æ¥ã‚‹ã¨<code>RxSwift</code>ã®æœ‰åŠ¹æ€§ã‚’è¨±å®¹ã›ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã­ã€‚</p>

<h3>ã¾ã¨ã‚</h3>

<p>ä»Šå›ç°¡å˜ã«è§¦ã£ãŸã ã‘ã§ã‚‚ã€Rxã¯ã‹ãªã‚Šæœ‰åŠ¹ãªã‚‚ã®ã§ã‚ã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚<br/>
éåŒæœŸå‡¦ç†ã‚„äº’ã„ã«é–¢é€£æ€§ã‚’æŒã¤è¤‡é›‘ãªå‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹éš›ã«ã¯ãœã²Rxã‚’ä½¿ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚</p>

<p>æœ¬å½“ã¯ã‚‚ã£ã¨Exampleã‚’è¿½ã£ã¦ã„ããŸã„ã®ã§ã™ãŒã€ä¸€æ—¦ã“ã“ã¾ã§ã¨ã•ã›ã¦é ‚ãã¾ã™ã€‚<br/>
(å˜ãªã‚‹æ™‚é–“åˆ‡ã‚Œãªã®ã§ã€ç¶šãã¯å¿…ãšæ›¸ããŸã„ã‚’æ€ã£ã¦ã„ã¾ã™ã€‚)</p>

<p>ã¨ã„ã†ã“ã¨ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<p>å‚è€ƒ:</p>

<ul>
<li><a href="https://github.com/ReactiveX/RxSwift">GitHub: ReactiveX/RxSwift</a></li>
<li><a href="http://qiita.com/nakailand/items/8b54dc9b4b39b0809c57">RxSwiftã®é“æ¨™</a></li>
<li><a href="http://qiita.com/usamik26/items/2bbd0b8d304ab42b2279">RxSwift ã§ UIKit ã‚’æ‰±ã†åŸºæœ¬</a></li>
<li><a href="http://okapies.hateblo.jp/entry/2015/03/04/031148">é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒã®ãŸã‚ã® Rx å…¥é–€ï¼ˆå‰ç·¨ï¼‰</a></li>
</ul>


<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swift Expressã§Ajaxé€šä¿¡ã—ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/07/31/swift-express-2/"/>
    <updated>2016-07-31T23:40:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/07/31/swift-express-2</id>
    <content type="html"><![CDATA[<h3>Swift Expressã§POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆæŠ•ã’ã¦ã¿ã‚ˆã†ï¼</h3>

<p>ã•ã¦ã€æœ¬æ—¥ã¯<a href="https://github.com/crossroadlabs/Express">Swift Express</a>ã®ç¶šãã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚<br/>
<a href="http://grandbig.github.io/blog/2016/07/10/swift-express/">å‰å›</a>ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»é¢ã®è¡¨ç¤ºã¾ã§ã‚’ç´¹ä»‹ã—ã¾ã—ãŸãŒã€<br/>
ä»Šå›ã¯Ajaxé€šä¿¡ã«ã‚ˆã‚‹POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h4>ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®å¯¾å¿œ</h4>

<p>ã¾ãšã¯ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã®æº–å‚™ã§ã™ã€‚<br/>
<code>main.swift</code>ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>```objective-c
import Express</p>

<p>let app = express()</p>

<p>app.views.register(StencilViewEngine())</p>

<!-- ã“ã“ã‚’è¿½åŠ  -->


<p>app.views.register(JsonView())</p>

<p>app.get(&ldquo;/assets/:file+&rdquo;, action: StaticAction(path: &ldquo;public&rdquo;, param:&ldquo;file&rdquo;))</p>

<p>app.get(&ldquo;/&rdquo;) { (request:Request<AnyContent>)&ndash;>Action<AnyContent> in</p>

<pre><code>return Action&lt;AnyContent&gt;.render("index", context: ["hello": "Hello,", "swift": "Swift", "express": "Express!"])
</code></pre>

<p>}</p>

<!-- ã“ã“ã‚’è¿½åŠ  -->


<p>app.post(&ldquo;/:param&rdquo;) { (request:Request<AnyContent>)&ndash;>Action<AnyContent> in</p>

<pre><code>let response = ["status": "ok", "description": "Post Request Succesfully"]
    return Action.render(JsonView.name, context: response)
</code></pre>

<p>}</p>

<p>app.listen(9999).onSuccess { server in</p>

<pre><code>print("Express was successfully launched on port", server.port)
</code></pre>

<p>}</p>

<p>app.run()
```</p>

<p><code>app.views.register(JsonView())</code>ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€JSONå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿”å´ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚<br/>
ã¾ãŸã€è¿”å´ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯<code>dictionary</code>å‹ã§æ›¸ã‘ã°OKãªã‚ˆã†ã§ã™ã€‚</p>

<h4>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®å¯¾å¿œ</h4>

<p>ç¶šã„ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®æº–å‚™ã§ã™ã€‚<br/>
æ‰‹ã£å–ã‚Šæ—©ãjQueryä½¿ã„ã¾ã—ã‚‡ã†ã€‚<br/>
<a href="https://jquery.com/">ã“ã¡ã‚‰ã®ãƒšãƒ¼ã‚¸</a>ã‹ã‚‰æœ€æ–°ã®jQueryã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã¾ã™ã€‚</p>

<p>ãã—ã¦ã€<code>index.js</code>ã‚’ã•ãã£ã¨ä½œã£ã¡ã‚ƒã„ã¾ã—ã‚‡ã†ã€‚</p>

<p>```javascript
$(function() {</p>

<pre><code>$("#touch").on("click", function() {
    // Ajaxé€šä¿¡
    ajax();
});

function ajax() {
    $.ajax({
        type: "POST",
        url: "http://localhost:9999/1",
        dataType: "json"
    }).done(function(data) {
        alert(data.status + "\n" + data.description);
    }).fail(function(data) {
        alert("error!!");
    });
}
</code></pre>

<p>});
```</p>

<p>ã“ã‚Œã‚‰jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚</p>

<p>```html
// index.stencil
<html></p>

<pre><code>&lt;head&gt;
    &lt;title&gt;{{hello}} {{swift}} {{express}}&lt;/title&gt;
    &lt;link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:700italic,700' rel='stylesheet' type='text/css'&gt;
    &lt;link href='http://grandbig.github.io/assets/css/main.css' rel='stylesheet' type='text/css'&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;img class="logo" src="http://grandbig.github.io/assets/logo.png"/&gt;
    &lt;h1&gt;{{hello}} &lt;i&gt;&lt;span class="swift"&gt;{{swift}}&lt;/span&gt; {{express}}&lt;/i&gt;&lt;/h1&gt;
    &lt;div id="touch"&gt;ã“ã“ã‚’ã‚¿ãƒƒãƒï¼ï¼&lt;/div&gt;

    &lt;script src="http://grandbig.github.io/assets/js/jquery-3.1.0.min.js"&gt;&lt;/script&gt;
    &lt;script src="http://grandbig.github.io/assets/js/index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>

<p></html>
```</p>

<p>ã“ã‚Œã ã‘ã§ä¸‹å›³ã®ã‚ˆã†ã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€šã‚Šã¾ã—ãŸã€‚</p>

<p><img src="/images/swift-express-3.png" alt="POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆ" /></p>

<p>ã¨ã„ã†ã¨ã“ã‚ã§æœ¬æ—¥ã¯ã“ã“ã¾ã§ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swift Expressã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ï¼]]></title>
    <link href="http://grandbig.github.io/blog/2016/07/10/swift-express/"/>
    <updated>2016-07-10T22:56:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/07/10/swift-express</id>
    <content type="html"><![CDATA[<h3>ä»Šæ³¨ç›®ã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swift</h3>

<p>æœ¬æ—¥ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰Swiftã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã§ã‚ã‚‹<a href="https://github.com/crossroadlabs/Express">Swift Express</a>ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚<br/>
è¿‘å¹´ã€Appleã‹ã‚‰Swiftã®OSSåŒ–ãŒç™ºè¡¨ã•ã‚ŒãŸã“ã¨ã§ä¸€æ°—ã«å‹•ãå‡ºã—ãŸã®ãŒGitHubä¸Šã§ã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä½œæˆåˆæˆ¦ã§ã™ã€‚<br/>
ç­†è€…ãŒçŸ¥ã£ã¦ã„ã‚‹ã ã‘ã§ã‚‚ã€</p>

<ul>
<li><a href="https://github.com/PerfectlySoft/Perfect">Perfect</a></li>
<li><a href="https://github.com/qutheory/vapor">Vapor</a></li>
<li><a href="https://github.com/IBM-Swift/Kitura-Starter-Bluemix">Kitura</a></li>
<li><a href="https://github.com/slimane-swift">Sliman</a></li>
</ul>


<p>ãªã©ãŒä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>ãã‚“ãªä¸­ã€ç­†è€…ã®ç›®ã«æ­¢ã¾ã£ãŸã®ãŒã€ <strong>Swift Express</strong> ã§ã—ãŸã€‚<br/>
æœ¬ãƒ–ãƒ­ã‚°ã§ã‚‚åº¦ã€… <strong>Node.js</strong> ã‚’è§¦ã£ãŸã“ã¨ãŒã‚ã‚‹ã¨è¿°ã¹ã¦ããŸã‚ˆã†ã«ã€ç­†è€…ã¯ <strong>Node.js</strong> ã§ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰å®Ÿè£…ã®çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚<br/>
ãã®éš›ã«åˆ©ç”¨ã—ã¦ã„ãŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«<a href="http://expressjs.com/">Express</a>ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã—ãŸã€‚<br/>
Expressã¯ <strong>Node.js</strong> ã§ã„ã¨ã‚‚ç°¡å˜ã«ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰å®Ÿè£…ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚</p>

<p>Swiftã®çµŒé¨“ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã®å®Ÿè£…çµŒé¨“ãŒãªã„ç­†è€…ã«ã¨ã£ã¦ã¯ã€é¡˜ã£ã¦ã‚‚ãªã„Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã˜ã‚ƒãªã„ã‹ï¼ã€ã¨ã„ã†ã“ã¨ã§ <strong>Swift Express</strong> ã«æƒ¹ã‹ã‚ŒãŸã®ã§ã™ã€‚<br/>
ã•ã¦ã€æœ¬æ—¥ã¯ãã‚“ãª <strong>Swift Express</strong> ã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<h3>Swift Expressã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚ˆã†</h3>

<p>ã¾ãšã¯ã€Swift Expressã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã¾ã™ã€‚<br/>
<code>homebrew</code>ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
brew tap crossroadlabs/tap</p>

<p>// æ‰‹é †(2)
brew install swift-express
```</p>

<p>æ‰‹é †(1)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p><code>javascript
==&gt; Tapping crossroadlabs/tap
Cloning into '/usr/local/Library/Taps/crossroadlabs/homebrew-tap'...
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 8 (delta 0), reused 6 (delta 0), pack-reused 0
Unpacking objects: 100% (8/8), done.
Checking connectivity... done.
Tapped 2 formulae (34 files, 72.7K)
</code></p>

<p>ç¶šã„ã¦ã€æ‰‹é †(2)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p>```javascript
==> Installing swift-express from crossroadlabs/tap
==> Installing dependencies for crossroadlabs/tap/swift-express: openssl, cmake, libevent, libevhtp, carthage
==> Installing crossroadlabs/tap/swift-express dependency: openssl
==> Downloading <a href="https://homebrew.bintray.com/bottles/openssl-1.0.2h_1.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/openssl-1.0.2h_1.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring openssl-1.0.2h_1.el_capitan.bottle.tar.gz
==> Caveats
A CA file has been bootstrapped using certificates from the system
keychain. To add additional certificates, place .pem files in
  /usr/local/etc/openssl/certs</p>

<p>  and run</p>

<pre><code>/usr/local/opt/openssl/bin/c_rehash

This formula is keg-only, which means it was not symlinked into /usr/local.

Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/openssl/lib
    CPPFLAGS: -I/usr/local/opt/openssl/include
</code></pre>

<p>==> Summary
ğŸº  /usr/local/Cellar/openssl/1.0.2h_1: 1,691 files, 12M
==> Installing crossroadlabs/tap/swift-express dependency: cmake
==> Downloading <a href="https://homebrew.bintray.com/bottles/cmake-3.6.0.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/cmake-3.6.0.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring cmake-3.6.0.el_capitan.bottle.tar.gz
==> Caveats
Emacs Lisp files have been installed to:
  /usr/local/share/emacs/site-lisp/cmake
  ==> Summary
  ğŸº  /usr/local/Cellar/cmake/3.6.0: 2,028 files, 27.8M
  ==> Installing crossroadlabs/tap/swift-express dependency: libevent
  ==> Downloading <a href="https://homebrew.bintray.com/bottles/libevent-2.0.22.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/libevent-2.0.22.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring libevent-2.0.22.el_capitan.bottle.tar.gz
ğŸº  /usr/local/Cellar/libevent/2.0.22: 53 files, 1.6M
==> Installing crossroadlabs/tap/swift-express dependency: libevhtp
==> Downloading <a href="https://github.com/ellzey/libevhtp/archive/1.2.10.tar.gz">https://github.com/ellzey/libevhtp/archive/1.2.10.tar.gz</a>
==> Downloading from <a href="https://codeload.github.com/ellzey/libevhtp/tar.gz/1.2.10">https://codeload.github.com/ellzey/libevhtp/tar.gz/1.2.10</a></p>

<h6>################################################################## 100.0%</h6>

<p>Warning: SHA1 support is deprecated and will be removed in a future version.
Please switch this formula to SHA256.
==> cmake . -DEVHTP_DISABLE_REGEX:STRING=ON -DEVHTP_BUILD_SHARED:STRING=ON -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DCMAKE_INSTALL_PREFIX=/usr/local/Cell
==> make install
ğŸº  /usr/local/Cellar/libevhtp/1.2.10: 9 files, 151.5K, built in 48 seconds
==> Installing crossroadlabs/tap/swift-express dependency: carthage
==> Downloading <a href="https://homebrew.bintray.com/bottles/carthage-0.17.2.el_capitan.bottle.tar.gz">https://homebrew.bintray.com/bottles/carthage-0.17.2.el_capitan.bottle.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Pouring carthage-0.17.2.el_capitan.bottle.tar.gz
ğŸº  /usr/local/Cellar/carthage/0.17.2: 45 files, 11.9M
==> Installing crossroadlabs/tap/swift-express
==> Cloning <a href="https://github.com/crossroadlabs/ExpressCommandLine.git">https://github.com/crossroadlabs/ExpressCommandLine.git</a>
Cloning into &lsquo;/Users/kato_takahiro/Library/Caches/Homebrew/swift-express&mdash;git&rsquo;&hellip;
remote: Counting objects: 67, done.
remote: Compressing objects: 100% (63/63), done.
remote: Total 67 (delta 21), reused 25 (delta 1), pack-reused 0
Unpacking objects: 100% (67/67), done.
Checking connectivity&hellip; done.
Note: checking out &lsquo;fae821f4d52c9dfb4e4c34ab0a4297ea700c9db1&rsquo;.</p>

<p>You are in &lsquo;detached HEAD&rsquo; state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.</p>

<p>If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:</p>

<pre><code>  git checkout -b &lt;new-branch-name&gt;

==&gt; Checking out tag 0.2.2
==&gt; carthage update --platform Mac --no-use-binaries --no-build
==&gt; rm -rf Carthage/Checkouts/Commandant/Carthage/Checkouts/Nimble Carthage/Checkouts/Commandant/Carthage/Checkouts/Quick
==&gt; carthage build --platform Mac
==&gt; xcodebuild SYMROOT=build
==&gt; Caveats
.app bundles were installed.
Run `brew linkapps swift-express` to symlink these to /Applications.
==&gt; Summary
ğŸº  /usr/local/Cellar/swift-express/0.2.2: 30 files, 7.3M, built in 3 minutes 5 seconds
</code></pre>

<p>```</p>

<p>ã•ã¦ã€è¦‹éã”ã—ãŒã¡ã§ã™ãŒã€<br/>
æœ€å¾Œã®æ–¹ã«ã€<code>brew linkapps swift-express</code> to symlink these to /Applications.ã€ã¨æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€</p>

<p><code>brew linkapps swift-express</code>ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚</p>

<p>ã“ã“ã¾ã§æ¥ãŸã‚‰ã€<code>swift-express</code>ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚</p>

<p>```javascript
Available commands:</p>

<p>bootstrap   download and build Express project dependencies
build       build Express project
help        Display general or command-specific help
init        Creates new Express application project
run         run Express project
update      update and build Express project dependencies
version     Display the current version of Swift Express Command Line
```</p>

<p>ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ç¨®åˆ¥ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€æ­£ã—ã <strong>Swift Express</strong> ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸè¨¼æ‹ ã§ã™ã€‚</p>

<h3>Swift Expressã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚ã†ï¼</h3>

<p>Swift Expressã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã®ã§ã€æ—©é€Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
swift-express init &lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå></p>

<p>// æ‰‹é †(2)
cd &lt;ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå></p>

<p>// æ‰‹é †(3)
swift-express bootstrap
```</p>

<p>æ‰‹é †(1)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>

<p><code>javascript
Cloning into '/var/folders/hj/p9y9d00s3sb5nn_x04961z2m0000gn/T/swift-express-827699'...
remote: Counting objects: 124, done.
remote: Total 124 (delta 0), reused 0 (delta 0), pack-reused 124
Receiving objects: 100% (124/124), 79.66 KiB | 0 bytes/s, done.
Resolving deltas: 100% (33/33), done.
Checking connectivity... done.
Task: "init" done.
</code></p>

<p>ç¶šã„ã¦ã€æ‰‹é †(2)ã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«ç§»å‹•ã™ã‚‹ã¨ã€</p>

<p><code>javascript
HelloExpress
  â”£â”â” Cartfile
  â”£â”â” HelloExpress.xcodeproj
  â”£â”â” Info.plist
  â”£â”â” Package.swift
  â”£â”â” app
  â”ƒ    â”—â”â” main.swift
  â”£â”â” dist
  â”£â”â” public
  â”ƒ    â”£â”â” css
  â”ƒ    â”ƒ    â”—â”â” main.css
  â”ƒ    â”—â”â” logo.png
  â”—â”â” views
</code></p>

<p>ã¨ã„ã£ãŸå½¢ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

<p>æœ€å¾Œã«æ‰‹é †(3)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¸‹è¨˜ã®çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br/>
(ã“ã“ãŒæœ€ã‚‚æ™‚é–“ã®ã‹ã‹ã‚‹å·¥ç¨‹ã«ãªã‚Šã¾ã™ã€‚)</p>

<p>```javascript
<strong><em> No Cartfile.resolved found, updating dependencies
</em></strong> Cloning Express
<strong><em> Cloning Stencil
</em></strong> Cloning GRMustache.swift
<strong><em> Cloning CEVHTP
</em></strong> Cloning PathToRegex
<strong><em> Cloning Regex
</em></strong> Cloning TidyJSON
<strong><em> Cloning BrightFutures
</em></strong> Cloning PathKit
<strong><em> Cloning ExecutionContext
</em></strong> Cloning Result
<strong><em> Checking out CEVHTP at &ldquo;0.1.0&rdquo;
</em></strong> Checking out ExecutionContext at &ldquo;0.3.1&rdquo;
<strong><em> Checking out Result at &ldquo;1.0.3&rdquo;
</em></strong> Checking out GRMustache.swift at &ldquo;bf7d6031d7e0dd862519eaba2b36b2e11a0d25a9&rdquo;
<strong><em> Checking out Regex at &ldquo;0.5.2&rdquo;
</em></strong> Checking out PathToRegex at &ldquo;0.2.2&rdquo;
<strong><em> Checking out PathKit at &ldquo;0.6.1&rdquo;
</em></strong> Checking out BrightFutures at &ldquo;0.4.0&rdquo;
<strong><em> Checking out Stencil at &ldquo;0.5.3&rdquo;
</em></strong> Checking out Express at &ldquo;0.3.6&rdquo;
*** Checking out TidyJSON at &ldquo;1.1.0&rdquo;</p>

<p>&lt;çœç•¥></p>

<p>/Users/<strong><strong>**/</strong></strong>/HelloExpress/Carthage/Checkouts/Express/Express/Content.swift:39:5: warning: use of &lsquo;typealias&rsquo; to declare associated types is deprecated; use &lsquo;associatedtype&rsquo; instead
Task: &ldquo;bootstrap&rdquo; done.
```</p>

<p>ã“ã‚Œã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¯å®Œäº†ã§ã™ã€‚</p>

<h3>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼</h3>

<p>å…ˆã»ã©ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>```javascript
// æ‰‹é †(1)
swift-express build</p>

<p>// æ‰‹é †(2)
swift-express run
```</p>

<p>æ—©é€Ÿã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«æ‰‹é †(1)ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å©ã„ã¦ãã ã•ã„ã€‚<br/>
ã™ã‚‹ã¨ã€</p>

<p>```javascript
Building HelloExpress in Debug mode&hellip;</p>

<p>&lt;çœç•¥></p>

<p>=== BUILD TARGET HelloExpress OF PROJECT HelloExpress WITH CONFIGURATION Debug ===</p>

<p>&lt;çœç•¥></p>

<p><strong> BUILD SUCCEEDED </strong></p>

<p>Task: &ldquo;build&rdquo; done.
```</p>

<p>ã¨ã„ã†çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br/>
å•é¡ŒãŒãªã‘ã‚Œã°<code>BUILD SUCCEEDED</code>ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚</p>

<p>ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã—ãŸã‚‰ã€æ‰‹é †(2)ã‚’å®Ÿè¡Œã—ã¾ã—ã‚‡ã†ã€‚<br/>
ã™ã‚‹ã¨ã€</p>

<p><code>javascript
Running HelloExpress...
Express was successfully launched on port 9999
</code></p>

<p>ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒãƒ¼ãƒˆç•ªå·ãŒ <strong>9999</strong> ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚<br/>
<code>http://localhost:9999</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã¨ã€</p>

<p><img src="/images/swift-express-1.png" alt="Swift Express TOPãƒšãƒ¼ã‚¸" /></p>

<p>ã¨ã„ã†ç”»é¢ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚</p>

<p>å› ã¿ã«ã§ã™ãŒã€Xcodeã‹ã‚‰ã‚‚<code>Build</code>ï¼†<code>Run</code>ã¯ã§ãã¾ã™ã€‚</p>

<p><img src="/images/swift-express-2.png" alt="Xcodeã‹ã‚‰Build &amp; Run" /></p>

<h3>Swift Expressã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã†ï¼</h3>

<p>æœ€å¾Œã«ã–ã£ãã‚Šä¸­èº«ã®ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚<br/>
Swift Expressã®ãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ã§ã‚ã‚‹<code>main.swift</code>ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚</p>

<p>```javascript
// app/main.swift</p>

<p>import Express</p>

<p>let app = express()</p>

<p>// (1)
app.views.register(StencilViewEngine())</p>

<p>// (2)
app.get(&ldquo;/assets/:file+&rdquo;, action: StaticAction(path: &ldquo;public&rdquo;, param:&ldquo;file&rdquo;))</p>

<p>// (3)
app.get(&ldquo;/&rdquo;) { (request:Request<AnyContent>)&ndash;>Action<AnyContent> in</p>

<pre><code>return Action&lt;AnyContent&gt;.render("index", context: ["hello": "Hello,", "swift": "Swift", "express": "Express!"])
</code></pre>

<p>}</p>

<p>// (4)
app.listen(9999).onSuccess { server in</p>

<pre><code>print("Express was successfully launched on port", server.port)
</code></pre>

<p>}</p>

<p>app.run()
```</p>

<p>ã“ã‚Œã¯ <strong>Node.js</strong> çµŒé¨“è€…ã¨ã—ã¦ã¯ã‹ãªã‚ŠExpressã«é…·ä¼¼ã—ã¦ã‚‹ãªã¨æ„Ÿã˜ã¾ã™ã€‚<br/>
é †ã«è¿½ã£ã¦ã¿ã¦ã„ãã¾ã™ã€‚</p>

<p>(1): æç”»ã‚¨ãƒ³ã‚¸ãƒ³ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p><code>javascript
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade');
</code></p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(2): é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã®æ ¼ç´å ´æ‰€ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p><code>javascript
app.use(express.static(path.join(__dirname, 'public')));
</code></p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(3): ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ‘ã‚¹ã¨å‡¦ç†ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p>```javascript
// app.js
app.use(&lsquo;/&rsquo;, routes);</p>

<p>// route/index.js
router.get(&lsquo;/&rsquo;, function(req, res, next) {</p>

<pre><code>res.render('index', { title: 'Express' }); 
</code></pre>

<p>}
```</p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<p>(4): ãƒãƒ¼ãƒˆç•ªå·ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p>Node.jsã®Expressã§è¨€ã†ã¨ã“ã‚ã®ã€</p>

<p>```javascript
// bin/www
var port = normalizePort(process.env.PORT || &lsquo;3000&rsquo;);
app.set(&lsquo;port&rsquo;, port);</p>

<p>var server = http.createServer(app);</p>

<p>server.listen(port);</p>

<p>server.on(&lsquo;listening&rsquo;, onListening);</p>

<p>function onListening() {</p>

<pre><code>var addr = server.address();
var bind = typeof addr === 'string'
    ? 'pipe ' + addr
    : 'port ' + addr.port;
debug('Listening on ' + bind);
</code></pre>

<p>}
```</p>

<p>ã«è©²å½“ã—ã¾ã™ã€‚</p>

<h3>ã¾ã¨ã‚</h3>

<p>ã•ã¦å¦‚ä½•ã§ã—ãŸã§ã—ã‚‡ã†ã‹ï¼Ÿ<br/>
ã“ã‚Œã ã‘Node.jsã®Expressã«ä¼¼ã¦ã„ã‚‹ã®ã§ã™ã‹ã‚‰ã€<br/>
<strong>Swift Express</strong> ã¯ã“ã‚Œã‹ã‚‰ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã‚’å­¦ã‚“ã§ã„ãä¸Šã§å¼·åŠ›ãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br/>
æ–°ã—ãNode.jsã‚’å­¦ã¶äººã‚‚å°†æ¥çš„ã«ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã‚’è§¦ã‚‹æ©Ÿä¼šãŒå‡ºã¦ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã®ã§çŸ¥ã£ã¦ãŠã„ã¦æã¯ãªã„ã§ã—ã‚‡ã†ã€‚<br/>
ç­†è€…ã‚‚ã“ã‚Œã¾ã‚‰ç›Šã€…æ³¨ç›®ã•ã‚Œã‚‹ã§ã‚ã‚ã†ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰Swiftã®æƒ…å ±ã¯è¿½ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
</feed>
