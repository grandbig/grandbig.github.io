<div class="highlight"><pre><span class="c1">// OAuth2Client.h</span>
<span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>

<span class="k">@interface</span> <span class="nc">OAuth2Client</span> : <span class="nc">NSObject</span>

<span class="c1">/// シングルトンのインスタンス取得</span>
<span class="k">+</span> <span class="p">(</span><span class="n">OAuth2Client</span> <span class="o">*</span><span class="p">)</span><span class="nf">sharedInstance</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> OAuth2.0認証に必要なパラメータを設定する処理</span>
<span class="cm"> @param clientId クライアントID</span>
<span class="cm"> @param clientSecret クライアントシークレット</span>
<span class="cm"> @param scope アクセス範囲</span>
<span class="cm"> @param authorizationURL OAuth2.0 認証先URL</span>
<span class="cm"> @param tokenURL OAuth2.0 トークン取得先URL</span>
<span class="cm"> */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setUpOAuth2AccountClientId:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">clientId</span> <span class="nf">clientSecret:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">clientSecret</span> <span class="nf">scope:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">scope</span> <span class="nf">authorizationURL:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">authorizationURL</span> <span class="nf">tokenURL:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">tokenURL</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> OAuth2.0認証に必要なリクエストを生成する処理</span>
<span class="cm"> @param withPreparedAuthorizationURLHandler OAuth2.0認証に必要なリクエストを返すBlock構文</span>
<span class="cm"> */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">requestAccessToAccount:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">preparedURL</span><span class="p">))</span><span class="nv">withPreparedAuthorizationURLHandler</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> OAuth2.0認証のリダイレクトURIの一致の有無を確認する処理</span>
<span class="cm"> @param request リクエスト</span>
<span class="cm"> @return リダイレクトURIの一致の有無</span>
<span class="cm"> */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">checkRedirectURI:</span><span class="p">(</span><span class="n">NSURLRequest</span> <span class="o">*</span><span class="p">)</span><span class="nv">request</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> アクセストークンを取得する処理</span>
<span class="cm"> @param request アクセストークンの取得に必要なリクエスト</span>
<span class="cm"> @param completionHandler アクセストークンの取得処理が完了したら実行される処理</span>
<span class="cm"> */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getAccessToken:</span><span class="p">(</span><span class="n">NSURLRequest</span> <span class="o">*</span><span class="p">)</span><span class="nv">request</span> <span class="nf">completionHandler:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">accessToken</span><span class="p">))</span><span class="nv">completionHandler</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> リフレッシュトークンから新しいアクセストークンを取得する処理</span>
<span class="cm"> @param success 処理が成功した場合に実行(返却データはアクセストークン)</span>
<span class="cm"> @param failure 処理が失敗した場合に実行(返却データはエラーオブジェクト)</span>
<span class="cm"> */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">getRefreshAccessToken:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">accessToken</span><span class="p">))</span><span class="nv">success</span> <span class="nf">failure:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">))</span><span class="nv">failure</span><span class="p">;</span>
</pre></div>