<div class="highlight"><pre><span class="err">#</span> <span class="nx">When</span> <span class="nx">a</span> <span class="nx">slave</span> <span class="nx">loses</span> <span class="nx">its</span> <span class="nx">connection</span> <span class="kd">with</span> <span class="nx">the</span> <span class="nx">master</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">when</span> <span class="nx">the</span> <span class="nx">replication</span>
<span class="err">#</span> <span class="nx">is</span> <span class="nx">still</span> <span class="k">in</span> <span class="nx">progress</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">can</span> <span class="nx">act</span> <span class="k">in</span> <span class="nx">two</span> <span class="nx">different</span> <span class="nx">ways</span><span class="o">:</span>
<span class="err">#</span>
<span class="err">#</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="nx">slave</span><span class="o">-</span><span class="nx">serve</span><span class="o">-</span><span class="nx">stale</span><span class="o">-</span><span class="nx">data</span> <span class="nx">is</span> <span class="nx">set</span> <span class="nx">to</span> <span class="s1">&#39;yes&#39;</span> <span class="p">(</span><span class="nx">the</span> <span class="k">default</span><span class="p">)</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">will</span>
<span class="err">#</span>    <span class="nx">still</span> <span class="nx">reply</span> <span class="nx">to</span> <span class="nx">client</span> <span class="nx">requests</span><span class="p">,</span> <span class="nx">possibly</span> <span class="kd">with</span> <span class="nx">out</span> <span class="nx">of</span> <span class="nx">date</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">or</span> <span class="nx">the</span>
<span class="err">#</span>    <span class="nx">data</span> <span class="nx">set</span> <span class="nx">may</span> <span class="nx">just</span> <span class="nx">be</span> <span class="nx">empty</span> <span class="k">if</span> <span class="k">this</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">first</span> <span class="nx">synchronization</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="nx">slave</span><span class="o">-</span><span class="nx">serve</span><span class="o">-</span><span class="nx">stale</span><span class="o">-</span><span class="nx">data</span> <span class="nx">is</span> <span class="nx">set</span> <span class="nx">to</span> <span class="s1">&#39;no&#39;</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">will</span> <span class="nx">reply</span> <span class="kd">with</span>
<span class="err">#</span>    <span class="nx">an</span> <span class="nx">error</span> <span class="s2">&quot;SYNC with master in progress&quot;</span> <span class="nx">to</span> <span class="nx">all</span> <span class="nx">the</span> <span class="nx">kind</span> <span class="nx">of</span> <span class="nx">commands</span>
<span class="err">#</span>    <span class="nx">but</span> <span class="nx">to</span> <span class="nx">INFO</span> <span class="nx">and</span> <span class="nx">SLAVEOF</span><span class="p">.</span>
<span class="err">#</span>
<span class="nx">slave</span><span class="o">-</span><span class="nx">serve</span><span class="o">-</span><span class="nx">stale</span><span class="o">-</span><span class="nx">data</span> <span class="nx">yes</span>
</pre></div>