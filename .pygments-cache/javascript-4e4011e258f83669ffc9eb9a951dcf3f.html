<div class="highlight"><pre><span class="c1">// main.swift</span>
<span class="kd">var</span> <span class="nx">routes</span> <span class="o">=</span> <span class="nx">Routes</span><span class="p">()</span>
<span class="nx">routes</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">method</span><span class="o">:</span> <span class="p">.</span><span class="nx">post</span><span class="p">,</span> <span class="nx">uri</span><span class="o">:</span> <span class="s2">&quot;/user&quot;</span><span class="p">,</span> <span class="nx">handler</span><span class="o">:</span> <span class="p">{</span>
	<span class="nx">request</span><span class="p">,</span> <span class="nx">response</span> <span class="k">in</span>

	<span class="kd">var</span> <span class="nx">userInfo</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
	<span class="kd">let</span> <span class="nx">decodedParam</span> <span class="o">=</span> <span class="nx">decode</span><span class="p">(</span><span class="nx">postBody</span><span class="o">:</span> <span class="nx">request</span><span class="p">.</span><span class="nx">postBodyString</span><span class="p">)</span>
	<span class="k">for</span> <span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="k">in</span> <span class="nx">decodedParam</span><span class="o">!</span> <span class="p">{</span>
		<span class="k">switch</span> <span class="nx">key</span> <span class="p">{</span>
			<span class="k">case</span> <span class="s2">&quot;name&quot;</span><span class="o">:</span>
				<span class="nx">userInfo</span> <span class="o">=</span> <span class="nx">userInfo</span> <span class="o">+</span> <span class="s2">&quot;name is \(value as! String).\n&quot;</span>
			<span class="k">case</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span>
				<span class="nx">userInfo</span> <span class="o">=</span> <span class="nx">userInfo</span> <span class="o">+</span> <span class="s2">&quot;email is \(value as! String).&quot;</span>
			<span class="k">default</span><span class="o">:</span>
				<span class="k">break</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">response</span><span class="p">.</span><span class="nx">appendBody</span><span class="p">(</span><span class="nx">string</span><span class="o">:</span> <span class="s2">&quot;&lt;html&gt;&lt;body&gt;POST handler: \(userInfo)&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">)</span>
	<span class="nx">response</span><span class="p">.</span><span class="nx">completed</span><span class="p">()</span>
<span class="p">})</span>
</pre></div>