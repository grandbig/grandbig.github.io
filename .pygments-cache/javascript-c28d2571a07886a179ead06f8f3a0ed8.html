<div class="highlight"><pre><span class="err">#</span> <span class="nx">Disable</span> <span class="nx">TCP_NODELAY</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">socket</span> <span class="nx">after</span> <span class="nx">SYNC</span><span class="o">?</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">If</span> <span class="nx">you</span> <span class="nx">select</span> <span class="s2">&quot;yes&quot;</span> <span class="nx">Redis</span> <span class="nx">will</span> <span class="nx">use</span> <span class="nx">a</span> <span class="nx">smaller</span> <span class="nx">number</span> <span class="nx">of</span> <span class="nx">TCP</span> <span class="nx">packets</span> <span class="nx">and</span>
<span class="err">#</span> <span class="nx">less</span> <span class="nx">bandwidth</span> <span class="nx">to</span> <span class="nx">send</span> <span class="nx">data</span> <span class="nx">to</span> <span class="nx">slaves</span><span class="p">.</span> <span class="nx">But</span> <span class="k">this</span> <span class="nx">can</span> <span class="nx">add</span> <span class="nx">a</span> <span class="nx">delay</span> <span class="k">for</span>
<span class="err">#</span> <span class="nx">the</span> <span class="nx">data</span> <span class="nx">to</span> <span class="nx">appear</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">side</span><span class="p">,</span> <span class="nx">up</span> <span class="nx">to</span> <span class="mi">40</span> <span class="nx">milliseconds</span> <span class="kd">with</span>
<span class="err">#</span> <span class="nx">Linux</span> <span class="nx">kernels</span> <span class="nx">using</span> <span class="nx">a</span> <span class="k">default</span> <span class="nx">configuration</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">If</span> <span class="nx">you</span> <span class="nx">select</span> <span class="s2">&quot;no&quot;</span> <span class="nx">the</span> <span class="nx">delay</span> <span class="k">for</span> <span class="nx">data</span> <span class="nx">to</span> <span class="nx">appear</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">slave</span> <span class="nx">side</span> <span class="nx">will</span>
<span class="err">#</span> <span class="nx">be</span> <span class="nx">reduced</span> <span class="nx">but</span> <span class="nx">more</span> <span class="nx">bandwidth</span> <span class="nx">will</span> <span class="nx">be</span> <span class="nx">used</span> <span class="k">for</span> <span class="nx">replication</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">By</span> <span class="k">default</span> <span class="nx">we</span> <span class="nx">optimize</span> <span class="k">for</span> <span class="nx">low</span> <span class="nx">latency</span><span class="p">,</span> <span class="nx">but</span> <span class="k">in</span> <span class="nx">very</span> <span class="nx">high</span> <span class="nx">traffic</span> <span class="nx">conditions</span>
<span class="err">#</span> <span class="nx">or</span> <span class="nx">when</span> <span class="nx">the</span> <span class="nx">master</span> <span class="nx">and</span> <span class="nx">slaves</span> <span class="nx">are</span> <span class="nx">many</span> <span class="nx">hops</span> <span class="nx">away</span><span class="p">,</span> <span class="nx">turning</span> <span class="k">this</span> <span class="nx">to</span> <span class="s2">&quot;yes&quot;</span> <span class="nx">may</span>
<span class="err">#</span> <span class="nx">be</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">idea</span><span class="p">.</span>
<span class="nx">repl</span><span class="o">-</span><span class="nx">disable</span><span class="o">-</span><span class="nx">tcp</span><span class="o">-</span><span class="nx">nodelay</span> <span class="nx">no</span>
</pre></div>