<div class="highlight"><pre><span class="c1">// ViewController.m</span>
<span class="c1">// 書き込みテスト用のメソッド</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">writeDataTestMethod:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
	<span class="c1">// ① majorの値を4661に設定</span>
	<span class="n">NSInteger</span> <span class="n">writeInt</span> <span class="o">=</span> <span class="mi">4661</span><span class="p">;</span>
	<span class="c1">// ② 10進数を16進数に変換して文字列にする</span>
	<span class="n">NSString</span> <span class="o">*</span><span class="n">witeString</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="s">@&quot;%lX&quot;</span><span class="p">,(</span><span class="kt">long</span><span class="p">)</span><span class="n">writeInt</span><span class="p">];</span>
	<span class="c1">// ③ 16進数のNSString型をNSData型に変換する処理</span>
	<span class="n">NSData</span> <span class="o">*</span><span class="n">writeData</span> <span class="o">=</span> <span class="p">[</span><span class="n">witeString</span> <span class="n">dataFromHexString</span><span class="p">];</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;writeData: %@&quot;</span><span class="p">,</span> <span class="n">writeData</span><span class="p">);</span>
	
	<span class="c1">// ④ データの書込み処理</span>
	<span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">connectedPeripheral</span> <span class="nl">writeValue:</span><span class="n">writeData</span> <span class="nl">forCharacteristic:</span><span class="n">self</span><span class="p">.</span><span class="n">majorChar</span> <span class="nl">type:</span><span class="n">CBCharacteristicWriteWithResponse</span><span class="p">];</span>
	
<span class="p">}</span>
</pre></div>