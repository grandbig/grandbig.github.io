<div class="highlight"><pre><span class="c1">// 元の画像。ここではtest.pngという画像があるとします。</span>
<span class="n">let</span> <span class="n">image</span> <span class="o">=</span> <span class="n">UIImage</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="nl">named:</span> <span class="s">&quot;test&quot;</span><span class="p">)</span>

<span class="n">let</span> <span class="n">imgSize</span> <span class="o">=</span> <span class="n">CGSize</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="nl">width:</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="nl">height:</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
<span class="c1">// Contextを開く</span>
<span class="n">UIGraphicsBeginImageContextWithOptions</span><span class="p">(</span><span class="n">imgSize</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
<span class="n">let</span> <span class="nl">context:</span> <span class="n">CGContext</span> <span class="o">=</span> <span class="n">UIGraphicsGetCurrentContext</span><span class="p">()</span><span class="o">!</span>
<span class="c1">// 回転の中心点を移動</span>
<span class="n">context</span><span class="p">.</span><span class="n">translateBy</span><span class="p">(</span><span class="nl">x:</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nl">y:</span> <span class="n">image</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="c1">// Y軸方向を補正</span>
<span class="n">context</span><span class="p">.</span><span class="n">scaleBy</span><span class="p">(</span><span class="nl">x:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="nl">y:</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c1">// ラジアンに変換(45°回転させたい場合)</span>
<span class="n">let</span> <span class="nl">radian:</span> <span class="n">CGFloat</span> <span class="o">=</span> <span class="mi">45</span> <span class="o">*</span> <span class="n">CGFloat</span><span class="p">(</span><span class="n">Double</span><span class="p">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">/</span> <span class="mf">180.0</span>
<span class="n">context</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="nl">by:</span> <span class="n">radian</span><span class="p">)</span>
<span class="c1">// 回転画像の描画</span>
<span class="n">context</span><span class="p">.</span><span class="n">draw</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">cgImage</span><span class="o">!</span><span class="p">,</span> <span class="k">in</span><span class="o">:</span> <span class="n">CGRect</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="nl">x:</span> <span class="o">-</span><span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nl">y:</span> <span class="o">-</span><span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="nl">width:</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="nl">height:</span> <span class="n">self</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">))</span>

<span class="c1">// Contextを閉じる</span>
<span class="n">let</span> <span class="nl">rotatedImage:</span> <span class="n">UIImage</span> <span class="o">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">()</span><span class="o">!</span>
<span class="n">UIGraphicsEndImageContext</span><span class="p">()</span>

<span class="c1">// UIImageViewに回転後の画像を設定</span>
<span class="n">let</span> <span class="n">imageView</span> <span class="o">=</span> <span class="n">UIImageView</span><span class="p">.</span><span class="n">init</span><span class="p">()</span>
<span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">rotatedImage</span>
</pre></div>