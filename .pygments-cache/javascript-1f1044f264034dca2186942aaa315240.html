<div class="highlight"><pre><span class="err">#</span> <span class="nx">TCP</span> <span class="nx">keepalive</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">If</span> <span class="nx">non</span><span class="o">-</span><span class="nx">zero</span><span class="p">,</span> <span class="nx">use</span> <span class="nx">SO_KEEPALIVE</span> <span class="nx">to</span> <span class="nx">send</span> <span class="nx">TCP</span> <span class="nx">ACKs</span> <span class="nx">to</span> <span class="nx">clients</span> <span class="k">in</span> <span class="nx">absence</span>
<span class="err">#</span> <span class="nx">of</span> <span class="nx">communication</span><span class="p">.</span> <span class="nx">This</span> <span class="nx">is</span> <span class="nx">useful</span> <span class="k">for</span> <span class="nx">two</span> <span class="nx">reasons</span><span class="o">:</span>
<span class="err">#</span>
<span class="err">#</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">Detect</span> <span class="nx">dead</span> <span class="nx">peers</span><span class="p">.</span>
<span class="err">#</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">Take</span> <span class="nx">the</span> <span class="nx">connection</span> <span class="nx">alive</span> <span class="nx">from</span> <span class="nx">the</span> <span class="nx">point</span> <span class="nx">of</span> <span class="nx">view</span> <span class="nx">of</span> <span class="nx">network</span>
<span class="err">#</span>    <span class="nx">equipment</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">middle</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">On</span> <span class="nx">Linux</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">specified</span> <span class="nx">value</span> <span class="p">(</span><span class="k">in</span> <span class="nx">seconds</span><span class="p">)</span> <span class="nx">is</span> <span class="nx">the</span> <span class="nx">period</span> <span class="nx">used</span> <span class="nx">to</span> <span class="nx">send</span> <span class="nx">ACKs</span><span class="p">.</span>
<span class="err">#</span> <span class="nx">Note</span> <span class="nx">that</span> <span class="nx">to</span> <span class="nx">close</span> <span class="nx">the</span> <span class="nx">connection</span> <span class="nx">the</span> <span class="kr">double</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">time</span> <span class="nx">is</span> <span class="nx">needed</span><span class="p">.</span>
<span class="err">#</span> <span class="nx">On</span> <span class="nx">other</span> <span class="nx">kernels</span> <span class="nx">the</span> <span class="nx">period</span> <span class="nx">depends</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">kernel</span> <span class="nx">configuration</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">A</span> <span class="nx">reasonable</span> <span class="nx">value</span> <span class="k">for</span> <span class="k">this</span> <span class="nx">option</span> <span class="nx">is</span> <span class="mi">60</span> <span class="nx">seconds</span><span class="p">.</span>
<span class="nx">tcp</span><span class="o">-</span><span class="nx">keepalive</span> <span class="mi">0</span>
</pre></div>