<div class="highlight"><pre><span class="c1">// main.swift</span>
<span class="n">routes</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="nl">method:</span> <span class="p">.</span><span class="n">delete</span><span class="p">,</span> <span class="nl">uri:</span> <span class="s">&quot;/mongo/{oid}&quot;</span><span class="p">,</span> <span class="nl">handler:</span> <span class="p">{</span>
  <span class="n">request</span><span class="p">,</span> <span class="n">response</span> <span class="k">in</span>
	<span class="c1">// BSON型オブジェクトの初期化(クエリとして渡す)</span>
  <span class="n">let</span> <span class="n">bson</span> <span class="o">=</span> <span class="n">BSON</span><span class="p">()</span>
  <span class="n">defer</span> <span class="p">{</span>
		<span class="c1">// 処理完了時にBSONオブジェクトを削除</span>
    <span class="n">bson</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="n">var</span> <span class="nl">oid:</span> <span class="n">bson_oid_t</span> <span class="o">=</span> <span class="n">bson_oid_t</span><span class="p">()</span>
  <span class="n">bson_oid_init_from_string</span><span class="p">(</span><span class="o">&amp;</span><span class="n">oid</span><span class="p">,</span> <span class="n">request</span><span class="p">.</span><span class="n">urlVariables</span><span class="p">[</span><span class="s">&quot;oid&quot;</span><span class="p">])</span>
  <span class="n">bson</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nl">key:</span> <span class="s">&quot;_id&quot;</span><span class="p">,</span> <span class="nl">oid:</span> <span class="n">oid</span><span class="p">)</span>

	<span class="c1">// データ削除</span>
  <span class="n">mongoHandler</span><span class="p">.</span><span class="n">delete</span><span class="p">(</span><span class="nl">query:</span> <span class="n">bson</span><span class="p">,</span> <span class="nl">request:</span> <span class="n">request</span><span class="p">,</span> <span class="nl">response:</span> <span class="n">response</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>