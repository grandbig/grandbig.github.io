<div class="highlight"><pre><span class="c1">// ViewController.m</span>
<span class="cp">#import &quot;ViewController.h&quot;</span>
<span class="cp">#import &quot;KontaktSDK.h&quot;</span>

<span class="k">@interface</span> <span class="nc">ViewController</span> <span class="p">()</span><span class="o">&lt;</span><span class="n">KTKLocationManagerDelegate</span><span class="o">&gt;</span>

<span class="k">@property</span><span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">KTKLocationManager</span> <span class="o">*</span><span class="n">lm</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>

	<span class="n">_lm</span> <span class="o">=</span> <span class="p">[</span><span class="n">KTKLocationManager</span> <span class="n">new</span><span class="p">];</span>
	<span class="n">_lm</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">([</span><span class="n">KTKLocationManager</span> <span class="n">canMonitorBeacons</span><span class="p">])</span> <span class="p">{</span>
		<span class="n">KTKRegion</span> <span class="o">*</span><span class="n">region</span> <span class="o">=</span> <span class="p">[</span><span class="n">KTKRegion</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
		<span class="n">region</span><span class="p">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="s">@&quot;AF41A130-E105-4F13-9483-316B7101B0A9&quot;</span><span class="p">;</span>
		<span class="p">[</span><span class="n">_lm</span> <span class="nl">setRegions:</span><span class="err">@</span><span class="p">[</span><span class="n">region</span><span class="p">]];]</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidAppear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="nl">viewDidAppear:</span><span class="n">animated</span><span class="p">];</span>

	<span class="p">[</span><span class="n">_lm</span> <span class="n">startMonitoringBeacons</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidDisappear:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="nl">viewDidDisappear:</span><span class="n">animated</span><span class="p">];</span>
	
	<span class="p">[</span><span class="n">_lm</span> <span class="n">stopMonitoringBeacons</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">didReceiveMemoryWarning</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="n">didReceiveMemoryWarning</span><span class="p">];</span>
<span class="p">}</span>

<span class="cp">#pragma mark - KTKLocationManagerDelegate</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">locationManager:</span><span class="p">(</span><span class="n">KTKLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nv">locationManager</span> <span class="nf">didChangeState:</span><span class="p">(</span><span class="n">KTKLocationManagerState</span><span class="p">)</span><span class="nv">state</span> <span class="nf">withError:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span> <span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">KTKLocationManagerStateFailed</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Something went wrong with your Location Services settings. Check OS settings.&quot;</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">locationManager:</span><span class="p">(</span><span class="n">KTKLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nv">locationManager</span> <span class="nf">didEnterRegion:</span><span class="p">(</span><span class="n">KTKRegion</span> <span class="o">*</span><span class="p">)</span><span class="nv">region</span> <span class="p">{</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Enter region %@&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">.</span><span class="n">uuid</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">locationManager:</span><span class="p">(</span><span class="n">KTKLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nv">locationManager</span> <span class="nf">didExitRegion:</span><span class="p">(</span><span class="n">KTKRegion</span> <span class="o">*</span><span class="p">)</span><span class="nv">region</span> <span class="p">{</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Exit region %@&quot;</span><span class="p">,</span> <span class="n">region</span><span class="p">.</span><span class="n">uuid</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">locationManager:</span><span class="p">(</span><span class="n">KTKLocationManager</span> <span class="o">*</span><span class="p">)</span><span class="nv">locationManager</span> <span class="nf">didRangeBeacons:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">beacons</span> <span class="p">{</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Ranged beacons count: %lu&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">beacons</span> <span class="n">count</span><span class="p">]);</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>