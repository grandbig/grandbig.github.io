<div class="highlight"><pre><span class="err">#</span> <span class="nx">Active</span> <span class="nx">rehashing</span> <span class="nx">uses</span> <span class="mi">1</span> <span class="nx">millisecond</span> <span class="nx">every</span> <span class="mi">100</span> <span class="nx">milliseconds</span> <span class="nx">of</span> <span class="nx">CPU</span> <span class="nx">time</span> <span class="k">in</span>
<span class="err">#</span> <span class="nx">order</span> <span class="nx">to</span> <span class="nx">help</span> <span class="nx">rehashing</span> <span class="nx">the</span> <span class="nx">main</span> <span class="nx">Redis</span> <span class="nx">hash</span> <span class="nx">table</span> <span class="p">(</span><span class="nx">the</span> <span class="nx">one</span> <span class="nx">mapping</span> <span class="nx">top</span><span class="o">-</span><span class="nx">level</span>
<span class="err">#</span> <span class="nx">keys</span> <span class="nx">to</span> <span class="nx">values</span><span class="p">).</span> <span class="nx">The</span> <span class="nx">hash</span> <span class="nx">table</span> <span class="nx">implementation</span> <span class="nx">Redis</span> <span class="nx">uses</span> <span class="p">(</span><span class="nx">see</span> <span class="nx">dict</span><span class="p">.</span><span class="nx">c</span><span class="p">)</span>
<span class="err">#</span> <span class="nx">performs</span> <span class="nx">a</span> <span class="nx">lazy</span> <span class="nx">rehashing</span><span class="o">:</span> <span class="nx">the</span> <span class="nx">more</span> <span class="nx">operation</span> <span class="nx">you</span> <span class="nx">run</span> <span class="nx">into</span> <span class="nx">a</span> <span class="nx">hash</span> <span class="nx">table</span>
<span class="err">#</span> <span class="nx">that</span> <span class="nx">is</span> <span class="nx">rehashing</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">more</span> <span class="nx">rehashing</span> <span class="s2">&quot;steps&quot;</span> <span class="nx">are</span> <span class="nx">performed</span><span class="p">,</span> <span class="nx">so</span> <span class="k">if</span> <span class="nx">the</span>
<span class="err">#</span> <span class="nx">server</span> <span class="nx">is</span> <span class="nx">idle</span> <span class="nx">the</span> <span class="nx">rehashing</span> <span class="nx">is</span> <span class="nx">never</span> <span class="nx">complete</span> <span class="nx">and</span> <span class="nx">some</span> <span class="nx">more</span> <span class="nx">memory</span> <span class="nx">is</span> <span class="nx">used</span>
<span class="err">#</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">hash</span> <span class="nx">table</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">The</span> <span class="k">default</span> <span class="nx">is</span> <span class="nx">to</span> <span class="nx">use</span> <span class="k">this</span> <span class="nx">millisecond</span> <span class="mi">10</span> <span class="nx">times</span> <span class="nx">every</span> <span class="nx">second</span> <span class="k">in</span> <span class="nx">order</span> <span class="nx">to</span>
<span class="err">#</span> <span class="nx">active</span> <span class="nx">rehashing</span> <span class="nx">the</span> <span class="nx">main</span> <span class="nx">dictionaries</span><span class="p">,</span> <span class="nx">freeing</span> <span class="nx">memory</span> <span class="nx">when</span> <span class="nx">possible</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">If</span> <span class="nx">unsure</span><span class="o">:</span>
<span class="err">#</span> <span class="nx">use</span> <span class="s2">&quot;activerehashing no&quot;</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">have</span> <span class="nx">hard</span> <span class="nx">latency</span> <span class="nx">requirements</span> <span class="nx">and</span> <span class="nx">it</span> <span class="nx">is</span>
<span class="err">#</span> <span class="nx">not</span> <span class="nx">a</span> <span class="nx">good</span> <span class="nx">thing</span> <span class="k">in</span> <span class="nx">your</span> <span class="nx">environment</span> <span class="nx">that</span> <span class="nx">Redis</span> <span class="nx">can</span> <span class="nx">reply</span> <span class="nx">form</span> <span class="nx">time</span> <span class="nx">to</span> <span class="nx">time</span>
<span class="err">#</span> <span class="nx">to</span> <span class="nx">queries</span> <span class="kd">with</span> <span class="mi">2</span> <span class="nx">milliseconds</span> <span class="nx">delay</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">use</span> <span class="s2">&quot;activerehashing yes&quot;</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">don</span><span class="err">â€˜</span><span class="nx">t</span> <span class="nx">have</span> <span class="nx">such</span> <span class="nx">hard</span> <span class="nx">requirements</span> <span class="nx">but</span>
<span class="err">#</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">free</span> <span class="nx">memory</span> <span class="nx">asap</span> <span class="nx">when</span> <span class="nx">possible</span><span class="p">.</span>
<span class="nx">activerehashing</span> <span class="nx">yes</span>
</pre></div>