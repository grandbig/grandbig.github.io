<div class="highlight"><pre><span class="n">import</span> <span class="n">UIKit</span>

<span class="n">protocol</span> <span class="n">SampleViewPresentationLogic</span> <span class="p">{</span>
  <span class="n">func</span> <span class="n">presentSomething</span><span class="p">(</span><span class="nl">response:</span> <span class="n">SampleView</span><span class="p">.</span><span class="n">Something</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">class</span> <span class="nl">SampleViewPresenter:</span> <span class="n">SampleViewPresentationLogic</span> <span class="p">{</span>
  <span class="n">weak</span> <span class="n">var</span> <span class="nl">viewController:</span> <span class="n">SampleViewDisplayLogic</span><span class="o">?</span>

  <span class="c1">// MARK: Present something</span>

  <span class="n">func</span> <span class="n">presentSomething</span><span class="p">(</span><span class="nl">response:</span> <span class="n">SampleView</span><span class="p">.</span><span class="n">Something</span><span class="p">.</span><span class="n">Response</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ② 受け取ったレスポンスをModel.ViewModel形式に変換する</span>
    <span class="n">let</span> <span class="n">viewModel</span> <span class="o">=</span> <span class="n">ShopList</span><span class="p">.</span><span class="n">FetchMyShop</span><span class="p">.</span><span class="n">ViewModel</span><span class="p">(</span><span class="nl">object:</span> <span class="n">response</span><span class="p">.</span><span class="n">object</span><span class="p">)</span>

    <span class="c1">// ① 受け取ったレスポンスを元に最適な表示(成功/失敗などの表示)になるようハンドリングする </span>
    <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">isError</span> <span class="p">{</span>
      <span class="c1">// エラーがある場合</span>
      <span class="c1">// ③ ViewControllerにModel.ViewModelを渡して描画を依頼する  </span>
      <span class="n">viewController</span><span class="o">?</span><span class="p">.</span><span class="n">displayError</span><span class="p">(</span><span class="nl">viewModel:</span> <span class="n">viewModel</span><span class="p">)</span>
      <span class="k">return</span>
    <span class="p">}</span>

    <span class="c1">// ③ ViewControllerにModel.ViewModelを渡して描画を依頼する</span>
    <span class="n">viewController</span><span class="o">?</span><span class="p">.</span><span class="n">displaySomething</span><span class="p">(</span><span class="nl">viewModel:</span> <span class="n">viewModel</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>