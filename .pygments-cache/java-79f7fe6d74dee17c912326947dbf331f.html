<div class="highlight"><pre><span class="o">&lt;</span><span class="err">省略</span><span class="o">&gt;</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBeaconServiceConnect</span><span class="o">()</span> <span class="o">{</span>
	<span class="c1">// BeaconManagerクラスのモニタリング設定</span>
	<span class="n">beaconManager</span><span class="o">.</span><span class="na">setMonitorNotifier</span><span class="o">(</span><span class="k">new</span> <span class="n">MonitorNotifier</span><span class="o">()</span> <span class="o">{</span>
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">didEnterRegion</span><span class="o">(</span><span class="n">Region</span> <span class="n">region</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// 領域侵入時に実行</span>
			<span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;didEnterRegion&quot;</span><span class="o">);</span>

			<span class="k">try</span> <span class="o">{</span>
				<span class="c1">// レンジングの開始</span>
				<span class="n">beaconManager</span><span class="o">.</span><span class="na">startRangingBeaconsInRegion</span><span class="o">(</span><span class="k">new</span> <span class="n">Region</span><span class="o">(</span><span class="s">&quot;unique-id-001&quot;</span><span class="o">,</span> <span class="n">identifier</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
			<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// 例外が発生した場合</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>

		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">didExitRegion</span><span class="o">(</span><span class="n">Region</span> <span class="n">region</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// 領域退出時に実行</span>
			<span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;didExitRegion&quot;</span><span class="o">);</span>

			<span class="k">try</span> <span class="o">{</span>
				<span class="c1">// レンジングの停止</span>
				<span class="n">beaconManager</span><span class="o">.</span><span class="na">stopRangingBeaconsInRegion</span><span class="o">(</span><span class="k">new</span> <span class="n">Region</span><span class="o">(</span><span class="s">&quot;unique-id-001&quot;</span><span class="o">,</span> <span class="n">identifier</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
			<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
				<span class="c1">// 例外が発生した場合</span>
				<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>
	
	<span class="c1">// BeaconManagerクラスのレンジング設定</span>
	<span class="n">beaconManager</span><span class="o">.</span><span class="na">setRangeNotifier</span><span class="o">(</span><span class="k">new</span> <span class="n">RangeNotifier</span><span class="o">()</span> <span class="o">{</span>
		<span class="nd">@Override</span>
		<span class="kd">public</span> <span class="kt">void</span> <span class="nf">didRangeBeaconsInRegion</span><span class="o">(</span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Beacon</span><span class="o">&gt;</span> <span class="n">beacons</span><span class="o">,</span> <span class="n">Region</span> <span class="n">region</span><span class="o">)</span> <span class="o">{</span>
			<span class="c1">// 検出したビーコンの情報を全部Logに書き出す</span>
			<span class="k">for</span><span class="o">(</span><span class="n">Beacon</span> <span class="n">beacon</span> <span class="o">:</span> <span class="n">beacons</span><span class="o">)</span> <span class="o">{</span>
				<span class="n">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;UUID:&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getId1</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;, major:&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getId2</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;, minor:&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getId3</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;, Distance:&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getDistance</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;,RSSI&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getRssi</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot;, TxPower&quot;</span> <span class="o">+</span> <span class="n">beacon</span><span class="o">.</span><span class="na">getTxPower</span><span class="o">());</span>
			<span class="o">}</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="k">try</span> <span class="o">{</span>
		<span class="c1">// モニタリングの開始</span>
		<span class="n">beaconManager</span><span class="o">.</span><span class="na">startMonitoringBeaconsInRegion</span><span class="o">(</span><span class="k">new</span> <span class="n">Region</span><span class="o">(</span><span class="s">&quot;unique-id-001&quot;</span><span class="o">,</span> <span class="n">identifier</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
	<span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">RemoteException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="o">&lt;</span><span class="err">省略</span><span class="o">&gt;</span>
</pre></div>