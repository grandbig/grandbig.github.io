<div class="highlight"><pre><span class="c1">// ViewController.m</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
	<span class="c1">// Do any additional setup after loading the view, typically from a nib.</span>
			    
	<span class="p">[</span><span class="n">GIDSignIn</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">uiDelegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
	<span class="c1">// 任意のスコープを設定</span>
	<span class="p">[</span><span class="n">GIDSignIn</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">scopes</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="s">@&quot;https://www.googleapis.com/auth/calendar&quot;</span><span class="p">,</span> <span class="s">@&quot;https://www.googleapis.com/auth/drive&quot;</span><span class="p">];</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;scope: %@&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">GIDSignIn</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">scopes</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// エラーが発生した場合に呼び出される処理</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">signInWillDispatch:</span><span class="p">(</span><span class="n">GIDSignIn</span> <span class="o">*</span><span class="p">)</span><span class="nv">signIn</span> <span class="nf">error:</span><span class="p">(</span><span class="n">NSError</span> <span class="o">*</span><span class="p">)</span><span class="nv">error</span> <span class="p">{</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;error: %@&quot;</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Google OAuth2認証画面を開始するときに実行される処理</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">signIn:</span><span class="p">(</span><span class="n">GIDSignIn</span> <span class="o">*</span><span class="p">)</span><span class="nv">signIn</span> <span class="nf">presentViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">viewController</span> <span class="p">{</span>
	<span class="c1">// OAuth2認証画面を表示する処理</span>
	<span class="p">[</span><span class="n">self</span> <span class="nl">presentViewController:</span><span class="n">viewController</span> <span class="nl">animated:</span><span class="n">YES</span> <span class="nl">completion:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Google OAuth2認証が完了したら実行される処理</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">signIn:</span><span class="p">(</span><span class="n">GIDSignIn</span> <span class="o">*</span><span class="p">)</span><span class="nv">signIn</span> <span class="nf">dismissViewController:</span><span class="p">(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">viewController</span> <span class="p">{</span>
	<span class="c1">// OAuth2認証の画面を閉じる処理</span>
	<span class="p">[</span><span class="n">self</span> <span class="nl">dismissViewControllerAnimated:</span><span class="n">YES</span> <span class="nl">completion:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Google Sign-inボタンをクリックした場合の処理(Storyboardで設定すること)</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">didTapSignIn:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
	<span class="c1">// Google Sign-inを実行する処理</span>
	<span class="p">[[</span><span class="n">GIDSignIn</span> <span class="n">sharedInstance</span><span class="p">]</span> <span class="n">signIn</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>