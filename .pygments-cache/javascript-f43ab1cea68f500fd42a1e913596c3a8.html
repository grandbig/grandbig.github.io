<div class="highlight"><pre><span class="kr">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">controller</span><span class="p">;</span>

<span class="kr">import</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">bean</span><span class="p">.</span><span class="nx">MyBean</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">springframework</span><span class="p">.</span><span class="nx">beans</span><span class="p">.</span><span class="nx">factory</span><span class="p">.</span><span class="nx">annotation</span><span class="p">.</span><span class="nx">Autowired</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">springframework</span><span class="p">.</span><span class="nx">stereotype</span><span class="p">.</span><span class="nx">Controller</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">org</span><span class="p">.</span><span class="nx">springframework</span><span class="p">.</span><span class="nx">web</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">annotation</span><span class="p">.</span><span class="nx">RequestMapping</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Controller</span>
<span class="err">@</span><span class="nx">RequestMapping</span><span class="p">(</span><span class="s2">&quot;/api&quot;</span><span class="p">)</span>
<span class="kr">public</span> <span class="kr">class</span> <span class="nx">FacebookLoginController</span> <span class="p">{</span>

    <span class="kr">private</span> <span class="kr">static</span> <span class="kr">final</span> <span class="nb">String</span> <span class="nx">REDIRECT_URI_PARAMETER</span> <span class="o">=</span> <span class="s2">&quot;redirect_uri&quot;</span><span class="p">;</span>

    <span class="err">@</span><span class="nx">Autowired</span>
    <span class="kr">private</span> <span class="nx">MyBean</span> <span class="nx">myBean</span><span class="p">;</span>

    <span class="err">@</span><span class="nx">RequestMapping</span><span class="p">(</span><span class="s2">&quot;/login&quot;</span><span class="p">)</span>
    <span class="kr">public</span> <span class="nb">String</span> <span class="nx">facebookLogin</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">StringBuilder</span> <span class="nx">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">StringBuilder</span><span class="p">();</span>
        <span class="nx">sb</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">myBean</span><span class="p">.</span><span class="nx">facebookLogin</span><span class="p">);</span>
        <span class="nx">sb</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">REDIRECT_URI_PARAMETER</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">);</span>
        <span class="nx">sb</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">myBean</span><span class="p">.</span><span class="nx">oAuthCallback</span><span class="p">);</span>

        <span class="k">return</span> <span class="s2">&quot;redirect:&quot;</span> <span class="o">+</span> <span class="nx">sb</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="err">@</span><span class="nx">RequestMapping</span><span class="p">(</span><span class="s2">&quot;/callback&quot;</span><span class="p">)</span>
    <span class="kr">public</span> <span class="nb">String</span> <span class="nx">callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;redirect:/complete&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>