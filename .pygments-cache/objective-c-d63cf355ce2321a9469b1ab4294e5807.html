<div class="highlight"><pre><span class="c1">// AppDelegate.swift</span>
<span class="n">import</span> <span class="n">UIKit</span>
<span class="n">import</span> <span class="n">Firebase</span>
<span class="n">import</span> <span class="n">UserNotifications</span>

<span class="err">@</span><span class="n">UIApplicationMain</span>
<span class="n">class</span> <span class="nl">AppDelegate:</span> <span class="n">UIResponder</span><span class="p">,</span> <span class="n">UIApplicationDelegate</span><span class="p">,</span> <span class="n">UNUserNotificationCenterDelegate</span><span class="p">,</span> <span class="n">MessagingDelegate</span> <span class="p">{</span>
  <span class="n">var</span> <span class="nl">window:</span> <span class="n">UIWindow</span><span class="o">?</span>
  <span class="n">func</span> <span class="n">application</span><span class="p">(</span><span class="n">_</span> <span class="nl">application:</span> <span class="n">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nl">launchOptions:</span> <span class="p">[</span><span class="nl">UIApplicationLaunchOptionsKey:</span> <span class="n">Any</span><span class="p">]</span><span class="o">?</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="c1">// リモート通知 (iOS10に対応)</span>
    <span class="n">let</span> <span class="nl">authOptions:</span> <span class="n">UNAuthorizationOptions</span> <span class="o">=</span> <span class="p">[.</span><span class="n">alert</span><span class="p">,</span> <span class="p">.</span><span class="n">badge</span><span class="p">,</span> <span class="p">.</span><span class="n">sound</span><span class="p">]</span>
    <span class="n">UNUserNotificationCenter</span><span class="p">.</span><span class="n">current</span><span class="p">().</span><span class="n">requestAuthorization</span><span class="p">(</span>
      <span class="nl">options:</span> <span class="n">authOptions</span><span class="p">,</span>
      <span class="nl">completionHandler:</span> <span class="p">{</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>

    <span class="c1">// UNUserNotificationCenterDelegateの設定</span>
    <span class="n">UNUserNotificationCenter</span><span class="p">.</span><span class="n">current</span><span class="p">().</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span>
    <span class="c1">// FCMのMessagingDelegateの設定</span>
    <span class="n">Messaging</span><span class="p">.</span><span class="n">messaging</span><span class="p">().</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span>

    <span class="n">application</span><span class="p">.</span><span class="n">registerForRemoteNotifications</span><span class="p">()</span>
    <span class="n">FirebaseApp</span><span class="p">.</span><span class="n">configure</span><span class="p">()</span> <span class="c1">// Firebase初期設定</span>

    <span class="n">let</span> <span class="n">token</span> <span class="o">=</span> <span class="n">Messaging</span><span class="p">.</span><span class="n">messaging</span><span class="p">().</span><span class="n">fcmToken</span>
    <span class="n">print</span><span class="p">(</span><span class="s">&quot;FCM token: \(token ?? &quot;&quot;)&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">true</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>