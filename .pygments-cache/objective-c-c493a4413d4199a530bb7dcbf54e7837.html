<div class="highlight"><pre><span class="c1">// ジオコーディング処理(住所を緯度・経度に変換)</span>
<span class="n">func</span> <span class="nf">geocode</span><span class="p">(</span><span class="nl">address:</span><span class="n">String</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">let</span> <span class="n">geocoder</span> <span class="o">=</span> <span class="n">CLGeocoder</span><span class="p">()</span>
	<span class="n">geocoder</span><span class="p">.</span><span class="n">geocodeAddressString</span><span class="p">(</span><span class="n">address</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nl">placeMarks:</span><span class="p">[</span><span class="n">CLPlacemark</span><span class="p">]</span><span class="o">?</span><span class="p">,</span> <span class="nl">error:</span><span class="n">NSError</span><span class="o">?</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
		<span class="k">for</span> <span class="n">placeMark</span> <span class="k">in</span> <span class="n">placeMarks</span><span class="o">!</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;latitude: \(placeMark.location?.coordinate.latitude), longitude: \(placeMark.location?.coordinate.longitude)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 逆ジオコーディング処理(緯度・経度を住所に変換)</span>
<span class="n">func</span> <span class="nf">reverseGeocode</span><span class="p">(</span><span class="nl">latitude:</span><span class="n">CLLocationDegrees</span><span class="p">,</span> <span class="nl">longitude:</span><span class="n">CLLocationDegrees</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">let</span> <span class="n">location</span> <span class="o">=</span> <span class="n">CLLocation</span><span class="p">(</span><span class="nl">latitude:</span> <span class="n">latitude</span><span class="p">,</span> <span class="nl">longitude:</span> <span class="n">longitude</span><span class="p">)</span>
	<span class="n">let</span> <span class="n">geocoder</span> <span class="o">=</span> <span class="n">CLGeocoder</span><span class="p">()</span>
	<span class="n">geocoder</span><span class="p">.</span><span class="n">reverseGeocodeLocation</span><span class="p">(</span><span class="n">location</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="nl">placeMarks:</span><span class="p">[</span><span class="n">CLPlacemark</span><span class="p">]</span><span class="o">?</span><span class="p">,</span> <span class="nl">error:</span><span class="n">NSError</span><span class="o">?</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
		<span class="n">let</span> <span class="n">placeMark</span> <span class="o">=</span> <span class="n">placeMarks</span><span class="o">?</span><span class="p">.</span><span class="n">first</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">country</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">country</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(country)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">administrativeArea</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">administrativeArea</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(administrativeArea)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">subAdministrativeArea</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">subAdministrativeArea</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(subAdministrativeArea)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">locality</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">locality</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(locality)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">subLocality</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">subLocality</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(subLocality)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">thoroughfare</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">thoroughfare</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(thoroughfare)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="n">let</span> <span class="n">subThoroughfare</span> <span class="o">=</span> <span class="n">placeMark</span><span class="o">?</span><span class="p">.</span><span class="n">subThoroughfare</span> <span class="p">{</span>
			<span class="n">print</span><span class="p">(</span><span class="s">&quot;\(subThoroughfare)&quot;</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>