<div class="highlight"><pre><span class="err">#</span> <span class="nx">Automatic</span> <span class="nx">rewrite</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">append</span> <span class="nx">only</span> <span class="nx">file</span><span class="p">.</span>
<span class="err">#</span> <span class="nx">Redis</span> <span class="nx">is</span> <span class="nx">able</span> <span class="nx">to</span> <span class="nx">automatically</span> <span class="nx">rewrite</span> <span class="nx">the</span> <span class="nx">log</span> <span class="nx">file</span> <span class="nx">implicitly</span> <span class="nx">calling</span>
<span class="err">#</span> <span class="nx">BGREWRITEAOF</span> <span class="nx">when</span> <span class="nx">the</span> <span class="nx">AOF</span> <span class="nx">log</span> <span class="nx">size</span> <span class="nx">grows</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">specified</span> <span class="nx">percentage</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">This</span> <span class="nx">is</span> <span class="nx">how</span> <span class="nx">it</span> <span class="nx">works</span><span class="o">:</span> <span class="nx">Redis</span> <span class="nx">remembers</span> <span class="nx">the</span> <span class="nx">size</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">AOF</span> <span class="nx">file</span> <span class="nx">after</span> <span class="nx">the</span>
<span class="err">#</span> <span class="nx">latest</span> <span class="nx">rewrite</span> <span class="p">(</span><span class="k">if</span> <span class="nx">no</span> <span class="nx">rewrite</span> <span class="nx">has</span> <span class="nx">happened</span> <span class="nx">since</span> <span class="nx">the</span> <span class="nx">restart</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">size</span> <span class="nx">of</span>
<span class="err">#</span> <span class="nx">the</span> <span class="nx">AOF</span> <span class="nx">at</span> <span class="nx">startup</span> <span class="nx">is</span> <span class="nx">used</span><span class="p">).</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">This</span> <span class="nx">base</span> <span class="nx">size</span> <span class="nx">is</span> <span class="nx">compared</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">size</span><span class="p">.</span> <span class="nx">If</span> <span class="nx">the</span> <span class="nx">current</span> <span class="nx">size</span> <span class="nx">is</span>
<span class="err">#</span> <span class="nx">bigger</span> <span class="nx">than</span> <span class="nx">the</span> <span class="nx">specified</span> <span class="nx">percentage</span><span class="p">,</span> <span class="nx">the</span> <span class="nx">rewrite</span> <span class="nx">is</span> <span class="nx">triggered</span><span class="p">.</span> <span class="nx">Also</span>
<span class="err">#</span> <span class="nx">you</span> <span class="nx">need</span> <span class="nx">to</span> <span class="nx">specify</span> <span class="nx">a</span> <span class="nx">minimal</span> <span class="nx">size</span> <span class="k">for</span> <span class="nx">the</span> <span class="nx">AOF</span> <span class="nx">file</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">rewritten</span><span class="p">,</span> <span class="k">this</span>
<span class="err">#</span> <span class="nx">is</span> <span class="nx">useful</span> <span class="nx">to</span> <span class="nx">avoid</span> <span class="nx">rewriting</span> <span class="nx">the</span> <span class="nx">AOF</span> <span class="nx">file</span> <span class="nx">even</span> <span class="k">if</span> <span class="nx">the</span> <span class="nx">percentage</span> <span class="nx">increase</span>
<span class="err">#</span> <span class="nx">is</span> <span class="nx">reached</span> <span class="nx">but</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">still</span> <span class="nx">pretty</span> <span class="nx">small</span><span class="p">.</span>
<span class="err">#</span>
<span class="err">#</span> <span class="nx">Specify</span> <span class="nx">a</span> <span class="nx">percentage</span> <span class="nx">of</span> <span class="nx">zero</span> <span class="k">in</span> <span class="nx">order</span> <span class="nx">to</span> <span class="nx">disable</span> <span class="nx">the</span> <span class="nx">automatic</span> <span class="nx">AOF</span>
<span class="err">#</span> <span class="nx">rewrite</span> <span class="nx">feature</span><span class="p">.</span>

<span class="nx">auto</span><span class="o">-</span><span class="nx">aof</span><span class="o">-</span><span class="nx">rewrite</span><span class="o">-</span><span class="nx">percentage</span> <span class="mi">100</span>
<span class="nx">auto</span><span class="o">-</span><span class="nx">aof</span><span class="o">-</span><span class="nx">rewrite</span><span class="o">-</span><span class="nx">min</span><span class="o">-</span><span class="nx">size</span> <span class="mi">64</span><span class="nx">mb</span>
</pre></div>