<div class="highlight"><pre><span class="c1">// MarkerInfoContentsView.swift</span>
<span class="n">import</span> <span class="n">Foundation</span>
<span class="n">import</span> <span class="n">UIKit</span>
<span class="n">import</span> <span class="n">AlamofireImage</span>

<span class="n">class</span> <span class="nl">MarkerInfoContentsView:</span> <span class="n">UIView</span> <span class="p">{</span>

  <span class="err">@</span><span class="kt">IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="nl">shopName:</span> <span class="n">UILabel</span><span class="o">!</span>
  <span class="err">@</span><span class="kt">IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="nl">categoryName:</span> <span class="n">UILabel</span><span class="o">!</span>
  <span class="err">@</span><span class="kt">IBOutlet</span> <span class="n">weak</span> <span class="n">var</span> <span class="nl">shopImage:</span> <span class="n">UIImageView</span><span class="o">!</span>

  <span class="n">override</span> <span class="n">init</span><span class="p">(</span><span class="nl">frame:</span> <span class="n">CGRect</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">super</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="nl">frame:</span> <span class="n">frame</span><span class="p">)</span>
    <span class="n">self</span><span class="p">.</span><span class="n">xibViewSet</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="n">required</span> <span class="n">init</span><span class="o">?</span><span class="p">(</span><span class="n">coder</span> <span class="nl">aDecoder:</span> <span class="n">NSCoder</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">super</span><span class="p">.</span><span class="n">init</span><span class="p">(</span><span class="nl">coder:</span> <span class="n">aDecoder</span><span class="p">)</span><span class="o">!</span>
    <span class="n">self</span><span class="p">.</span><span class="n">xibViewSet</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="n">internal</span> <span class="n">func</span> <span class="n">xibViewSet</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">let</span> <span class="n">view</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">loadNibNamed</span><span class="p">(</span><span class="s">&quot;MarkerInfoContentsView&quot;</span><span class="p">,</span> <span class="nl">owner:</span> <span class="n">self</span><span class="p">,</span> <span class="nl">options:</span> <span class="nb">nil</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">first</span> <span class="n">as</span><span class="o">?</span> <span class="n">UIView</span> <span class="p">{</span>
      <span class="n">view</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">bounds</span>
      <span class="n">self</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="cm">/**</span>
<span class="cm">    データの設定処理</span>

<span class="cm">    - parameter shopName: 店舗名</span>
<span class="cm">    - parameter categoryName: カテゴリ名</span>
<span class="cm">    - parameter shopImageURLString: 画像URL</span>
<span class="cm">   */</span>
  <span class="n">func</span> <span class="n">setData</span><span class="p">(</span><span class="nl">shopName:</span> <span class="n">String</span><span class="o">?</span><span class="p">,</span> <span class="nl">categoryName:</span> <span class="n">String</span><span class="o">?</span><span class="p">,</span> <span class="nl">shopImageURLString:</span> <span class="n">String</span><span class="o">?</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 店舗名の設定</span>
    <span class="k">if</span> <span class="n">let</span> <span class="n">shopNameTextCount</span> <span class="o">=</span> <span class="n">shopName</span><span class="o">?</span><span class="p">.</span><span class="n">characters</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="n">shopNameTextCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
      <span class="n">self</span><span class="p">.</span><span class="n">shopName</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">shopName</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">self</span><span class="p">.</span><span class="n">shopName</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;店舗名不明&quot;</span>
      <span class="n">self</span><span class="p">.</span><span class="n">shopName</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="n">UIColor</span><span class="p">.</span><span class="n">gray</span>
    <span class="p">}</span>
    <span class="c1">// 詳細説明の設定</span>
    <span class="k">if</span> <span class="n">let</span> <span class="n">categoryNameTextCount</span> <span class="o">=</span> <span class="n">categoryName</span><span class="o">?</span><span class="p">.</span><span class="n">characters</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="n">categoryNameTextCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
      <span class="n">self</span><span class="p">.</span><span class="n">categoryName</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">categoryName</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">self</span><span class="p">.</span><span class="n">categoryName</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;カテゴリ不明&quot;</span>
      <span class="n">self</span><span class="p">.</span><span class="n">categoryName</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="n">UIColor</span><span class="p">.</span><span class="n">gray</span>
    <span class="p">}</span>
    <span class="c1">// 画像の設定</span>
    <span class="k">if</span> <span class="n">let</span> <span class="n">shopImageURLStringTextCount</span> <span class="o">=</span> <span class="n">shopImageURLString</span><span class="o">?</span><span class="p">.</span><span class="n">characters</span><span class="p">.</span><span class="n">count</span><span class="p">,</span> <span class="n">shopImageURLStringTextCount</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
      <span class="k">if</span> <span class="n">let</span> <span class="n">shopImageURL</span> <span class="o">=</span> <span class="n">URL</span><span class="p">(</span><span class="nl">string:</span> <span class="n">shopImageURLString</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">shopImage</span><span class="p">.</span><span class="n">af_setImage</span><span class="p">(</span><span class="nl">withURL:</span> <span class="n">shopImageURL</span><span class="p">,</span> <span class="nl">placeholderImage:</span> <span class="n">UIImage</span><span class="p">(</span><span class="nl">named:</span> <span class="s">&quot;NoImageIcon&quot;</span><span class="p">))</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">self</span><span class="p">.</span><span class="n">shopImage</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">UIImage</span><span class="p">(</span><span class="nl">named:</span> <span class="s">&quot;NoImageIcon&quot;</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">self</span><span class="p">.</span><span class="n">shopImage</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">UIImage</span><span class="p">(</span><span class="nl">named:</span> <span class="s">&quot;NoImageIcon&quot;</span><span class="p">)</span>
    <span class="p">}</span>    
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>