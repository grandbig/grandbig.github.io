<div class="highlight"><pre><span class="c1">// ViewController.swiftファイル</span>
<span class="c1">// 位置情報の許可設定</span>
<span class="n">func</span> <span class="nf">locationManager</span><span class="p">(</span><span class="nl">manager:</span> <span class="n">CLLocationManager</span><span class="o">!</span><span class="p">,</span> <span class="n">didChangeAuthorizationStatus</span> <span class="nl">status:</span> <span class="n">CLAuthorizationStatus</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="p">.</span><span class="n">NotDetermined</span><span class="p">)</span> <span class="p">{</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="p">.</span><span class="n">Authorized</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">self</span><span class="p">.</span><span class="n">lm</span><span class="o">?</span><span class="p">.</span><span class="n">startUpdatingLocation</span><span class="p">()</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">status</span> <span class="o">==</span> <span class="p">.</span><span class="n">AuthorizedWhenInUse</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">self</span><span class="p">.</span><span class="n">lm</span><span class="o">?</span><span class="p">.</span><span class="n">startUpdatingLocation</span><span class="p">()</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 位置情報の更新ハンドリング処理</span>
<span class="n">func</span> <span class="nf">locationManager</span><span class="p">(</span><span class="nl">manager:</span> <span class="n">CLLocationManager</span><span class="o">!</span><span class="p">,</span> <span class="n">didUpdateLocations</span> <span class="nl">locations:</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">]</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">var</span> <span class="nl">currentLocation:</span><span class="n">CLLocation</span><span class="o">?</span> <span class="o">=</span> <span class="n">locations</span><span class="p">.</span><span class="n">last</span> <span class="n">as</span><span class="o">?</span> <span class="n">CLLocation</span>
	<span class="n">var</span> <span class="nl">lat:</span><span class="n">CLLocationDegrees</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">latitude</span>
	<span class="n">var</span> <span class="nl">lng:</span><span class="n">CLLocationDegrees</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">coordinate</span><span class="p">.</span><span class="n">longitude</span>
	<span class="n">var</span> <span class="nl">alt:</span><span class="n">CLLocationDegrees</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">altitude</span>
	<span class="n">var</span> <span class="nl">course:</span><span class="n">CLLocationDirection</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">course</span>
	<span class="n">var</span> <span class="nl">spd:</span><span class="n">CLLocationSpeed</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">speed</span>
	<span class="n">var</span> <span class="nl">hacc:</span><span class="n">CLLocationAccuracy</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">horizontalAccuracy</span>
	<span class="n">var</span> <span class="nl">vacc:</span><span class="n">CLLocationAccuracy</span><span class="o">?</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">verticalAccuracy</span>
	<span class="n">var</span> <span class="nl">dt:</span><span class="n">NSDate</span><span class="o">!</span> <span class="o">=</span> <span class="n">currentLocation</span><span class="o">?</span><span class="p">.</span><span class="n">timestamp</span>
<span class="p">}</span>
</pre></div>