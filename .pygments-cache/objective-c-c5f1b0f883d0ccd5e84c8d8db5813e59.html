<div class="highlight"><pre><span class="c1">// ViewController.m</span>

<span class="cp">#import &quot;ViewController.h&quot;</span>

<span class="k">@interface</span> <span class="nc">ViewController</span> <span class="p">()</span>

<span class="k">@property</span><span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UIDevice</span> <span class="o">*</span><span class="n">device</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ViewController</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span>
<span class="p">{</span>
	<span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>

	<span class="c1">// デバイス情報の設定</span>
	<span class="n">self</span><span class="p">.</span><span class="n">device</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="n">currentDevice</span><span class="p">];</span>
	<span class="n">self</span><span class="p">.</span><span class="n">device</span><span class="p">.</span><span class="n">batteryMonitoringEnabled</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">&lt;</span><span class="err">省略</span><span class="o">&gt;</span>

<span class="c1">// バッテリ残量をログ出力</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">outputDeviceBattery</span>
<span class="p">{</span>
	<span class="kt">float</span> <span class="n">level</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">device</span><span class="p">.</span><span class="n">batteryLevel</span><span class="p">;</span>
	<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;level: %f&quot;</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">level</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ボタンタップでバッテリ残量ログを出力</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nl">btnAction:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>
	<span class="p">[</span><span class="n">self</span> <span class="n">outputDeviceBattery</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>