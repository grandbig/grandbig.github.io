<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Takahiro Octopress Blog]]></title>
  <link href="http://grandbig.github.io/atom.xml" rel="self"/>
  <link href="http://grandbig.github.io/"/>
  <updated>2016-05-15T23:27:12+09:00</updated>
  <id>http://grandbig.github.io/</id>
  <author>
    <name><![CDATA[Takahiro]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Bolts-Swiftを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/05/15/bolts-swift/"/>
    <updated>2016-05-15T22:34:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/05/15/bolts-swift</id>
    <content type="html"><![CDATA[<h4>SwiftでBolts-Swiftライブラリを使ってみよう</h4>

<p>これまで、<code>BrightFuture</code>, <code>PromiseKit</code>とPromiseライブラリについて見てきましたが、本日はFacebook製のPromiseライブラリである<a href="https://github.com/BoltsFramework/Bolts-Swift">Bolts-Swift</a>を試してみたいと思います。</p>

<p><code>Bolts</code>はこれまでもObjective-Cコードで利用されてきた有名ライブラリですが、<br/>
2016-03-18にSwift版 v1.0.0(<code>Bolts-Swift</code>) が公開されました。<br/>
※ Objective-C版は<a href="https://github.com/BoltsFramework/Bolts-ObjC">Bolts-ObjC</a>です。<br/>
※ 本記事執筆時点ではv1.1.0が最新となっています。</p>

<p>Facebookのエンジニアが開発しているため、Facebook SDKを利用する場合でも内部で<code>Bolts-ObjC</code>が利用されています。<br/>
現在、Facebook SDKがObjective-Cで書かれているため、今後Swift化される際に、<code>Bolts-Swift</code>が使われることになる可能性が高いと思います。<br/>
知っておいて損はないでしょう。</p>

<p>ということで早速、使い方を見ていきましょう。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>Bolts-Swiftのインストール</h4>

<p>CocoaPodsでインストールします。</p>

<p><strong>1．Podfileに下記を記載</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">source</span> <span class="err">&#39;</span><span class="nl">https:</span><span class="c1">//github.com/CocoaPods/Specs.git&#39;</span>
</span><span class='line'><span class="n">platform</span> <span class="o">:</span><span class="n">ios</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">8.0</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>     <span class="c1">// (1)</span>
</span><span class='line'>
</span><span class='line'><span class="n">target</span> <span class="s">&quot;BoltsSwiftSample&quot;</span> <span class="k">do</span>   <span class="c1">// (2)</span>
</span><span class='line'>  <span class="n">pod</span> <span class="err">&#39;</span><span class="n">Bolts</span><span class="o">-</span><span class="n">Swift</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Bolts-Swift</code>の場合は(1)と(2)が必須書式となります。<br/>
(書かない場合、インストール時にErrorが発生します。)</p>

<p><strong>2．<code>pod install</code>を実行</strong></p>

<p><strong>3．処理の実装</strong></p>

<p>ライブラリのインストールが完了したら、処理を書いていきましょう。</p>

<p><code>Bolts-Swift</code>を適用したメソッドを用意します。<br/>
※ 非同期処理を含むサンプルメソッドです。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">p_task</span><span class="p">(</span><span class="nl">msg:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">taskCompletionSource</span> <span class="o">=</span> <span class="n">TaskCompletionSource</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">()</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>          <span class="n">taskCompletionSource</span><span class="p">.</span><span class="n">setResult</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>                          
</span><span class='line'>  <span class="k">return</span> <span class="n">taskCompletionSource</span><span class="p">.</span><span class="n">task</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>このように定義することで、下記のように呼び出すことが可能となります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">bt</span> <span class="o">=</span> <span class="n">BoltsTask</span><span class="p">()</span>
</span><span class='line'><span class="n">bt</span><span class="p">.</span><span class="n">p_task</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">).</span><span class="n">continueOnSuccessWith</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="k">in</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">bt</span><span class="p">.</span><span class="n">p_task</span><span class="p">(</span><span class="s">&quot;Good Evening&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}.</span><span class="n">continueOnSuccessWith</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="k">in</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">bt</span><span class="p">.</span><span class="n">p_task</span><span class="p">(</span><span class="s">&quot;Good Bye&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>これを実行すれば、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Hello</span>
</span><span class='line'><span class="n">Good</span> <span class="n">Evening</span>
</span><span class='line'><span class="n">Good</span> <span class="n">Bye</span>
</span></code></pre></td></tr></table></div></figure>


<p>と結果が得られます。<br/>
以上のように『ネストを浅く』、『非同期処理を直列的に書く』ことができます。</p>

<p><code>BrightFuture</code>や<code>PromiseKit</code>を試しに使ってきたことで思ったのが、同様の書式で書けることが多いということです。<br/>
一見、GitHub上のReadmeを読んでもわからないと思うライブラリがあった際には、用途が似ているライブラリのReadmeを見てみるのも1つの手段かもしれません。</p>

<p>といったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SwiftでFacebookログインを始めよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/05/14/facebook-login-for-swift/"/>
    <updated>2016-05-14T15:30:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/05/14/facebook-login-for-swift</id>
    <content type="html"><![CDATA[<h4>Facebookログインの実装方法</h4>

<p>公式ページの<a href="https://developers.facebook.com/">facebook for developers</a>を見るのが、一番良いと思いますが、<br/>
あちこちページを飛ばされるので、順を追って説明することにします。<br/>
※ 本記事で利用しているFacebook SDKは <strong>v4.11.0</strong> です。</p>

<p><strong>1．Facebookログインを選択する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_1.png" alt="Facebookログインを選択" /></p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p><strong>2．Get Startedを選択する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_2.png" alt="Get Startedを選択" /></p>

<p><strong>3．iOSを選択する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_3.png" alt="iOSを選択" /></p>

<p><strong>4．利用手順の概要を読む</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_4.png" alt="利用手順の概要を読む" /></p>

<p><strong>5．Facebookアプリを作成する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_5.png" alt="Facebookアプリを作成" /></p>

<p>※ CocoaPodsでFacebook SDKを取り込むので、ダウンロードはしません。</p>

<p>「新しいアプリを作成」を選択すると、アプリ作成画面が表示されるため、任意の値を入力してください。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_6.png" alt="任意の値を入力" /></p>

<p><strong>6．作成したFacebookアプリにiOSアプリ用の設定を追加する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_7.png" alt="一連のiOSアプリ用設定手順" /></p>

<p><img src="http://grandbig.github.io/images/facebook_login_8.png" alt="追加ボタンを選択" /></p>

<p><img src="http://grandbig.github.io/images/facebook_login_9.png" alt="iOSを選択" /></p>

<p>追加された設定項目に値を入力して、「変更を保存」ボタンを選択します。</p>

<ul>
<li>バンドルIDを入力</li>
<li>シングルサインオンボタンをONに変更</li>
</ul>


<p><img src="http://grandbig.github.io/images/facebook_login_10.png" alt="設定項目に値を入力" /></p>

<p>続いて、詳細設定でネイティブアプリでの利用を許可します。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_18.png" alt="詳細設定" /></p>

<p><strong>7．Xcodeプロジェクトを用意する</strong></p>

<p>当然のことながら、Xcodeプロジェクトを作成します。</p>

<p><strong>8．<code>Podfile</code>を作成する</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">source</span> <span class="err">&#39;</span><span class="nl">https:</span><span class="c1">//github.com/CocoaPods/Specs.git&#39;</span>
</span><span class='line'><span class="n">platform</span> <span class="o">:</span><span class="n">ios</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">8.0</span><span class="err">&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="cp"># Facebook</span>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">FBSDKCoreKit</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">FBSDKLoginKit</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">FBSDKShareKit</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>9．<code>pod install</code>を実行する</strong></p>

<p><strong>10．Xcodeプロジェクトに必要な設定を追加</strong></p>

<p>必要な設定値を見るために、<br/>
下図のようにFacebookアプリページのiOS設定項目上の <strong>クイックスタート</strong> を選択します。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_11.png" alt="クイックスタートを選択" /></p>

<p>すると、下図のページに遷移します。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_12.png" alt="クイックスタートページ" /></p>

<p>この中で重要なのが <strong>Configure your info.plist</strong> です。<br/>
ここに書かれた設定値をXcodeに追加します。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_13.png" alt="Configure your info.plist" /></p>

<p><img src="http://grandbig.github.io/images/facebook_login_14.png" alt="Xcodeに設定値を追加" /></p>

<p><strong>11．XcodeプロジェクトにiOS9 SDK対応の設定を追加</strong></p>

<p>iOS9 SDKよりHTTP通信が非推奨となったため、ATS設定を追加する必要があります。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_15.png" alt="XcodeにATS設定を追加" /></p>

<p><strong>12．Facebookアプリをホワイトリストに追加する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_16.png" alt="ホワイトリストへの追加" /></p>

<p><strong>13．Bridge-Headerファイルを追加</strong></p>

<p>Swift実装なので、Bridge-Headerファイルを追加します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// FacebookLoginSample-Bridging-Header.h</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#ifndef FacebookLoginSample_Bridging_Header_h</span>
</span><span class='line'><span class="cp">#define FacebookLoginSample_Bridging_Header_h</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#import &lt;FBSDKCoreKit/FBSDKCoreKit.h&gt;</span>
</span><span class='line'><span class="cp">#import &lt;FBSDKLoginKit/FBSDKLoginKit.h&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">#endif </span><span class="cm">/* FacebookLoginSample_Bridging_Header_h */</span><span class="cp"></span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>14．<code>AppDelegate.swift</code>に<code>FBSDKApplicationDelegate</code>への接続処理を追加</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// AppDelegate.swift</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">application</span><span class="p">(</span><span class="nl">application:</span> <span class="n">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nl">launchOptions:</span> <span class="p">[</span><span class="nl">NSObject:</span> <span class="n">AnyObject</span><span class="p">]</span><span class="o">?</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">FBSDKApplicationDelegate</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">application</span><span class="p">(</span><span class="n">application</span><span class="p">,</span> <span class="nl">didFinishLaunchingWithOptions:</span> <span class="n">launchOptions</span><span class="p">)</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">application</span><span class="p">(</span><span class="nl">application:</span> <span class="n">UIApplication</span><span class="p">,</span> <span class="n">openURL</span> <span class="nl">url:</span> <span class="n">NSURL</span><span class="p">,</span> <span class="nl">sourceApplication:</span> <span class="n">String</span><span class="o">?</span><span class="p">,</span> <span class="nl">annotation:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">FBSDKApplicationDelegate</span><span class="p">.</span><span class="n">sharedInstance</span><span class="p">().</span><span class="n">application</span><span class="p">(</span><span class="n">application</span><span class="p">,</span>
</span><span class='line'>                                                               <span class="nl">openURL:</span> <span class="n">url</span><span class="p">,</span>
</span><span class='line'>                                                               <span class="nl">sourceApplication:</span> <span class="n">sourceApplication</span><span class="p">,</span>
</span><span class='line'>                                                               <span class="nl">annotation:</span> <span class="n">annotation</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>15．Facebook SDKが機能しているか確認</strong></p>

<p>Facebook SDKを搭載したつもりでも、一切機能していないと困りますよね？<br/>
ということでログ収集機能を使ってTestできたりします。<br/>
様々なログ収集が可能なようですが、公式ページにあるように最も簡単なアプリ起動ログ収集を実装します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// AppDelegate.swift</span>
</span><span class='line'><span class="n">func</span> <span class="nf">applicationDidBecomeActive</span><span class="p">(</span><span class="nl">application:</span> <span class="n">UIApplication</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">FBSDKAppEvents</span><span class="p">.</span><span class="n">activateApp</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="https://www.facebook.com/analytics?__aref_src=devsite&amp;__aref_id=docs_ios_getting_started">アプリ用Analyticsダッシュボード</a>に遷移します。<br/>
ログを確認したいアプリ > アクティビティー > イベントを選択します。<br/>
すると「App Launches」の件数を確認することができます。</p>

<p><strong>16．ログインボタンを追加</strong></p>

<p>公式ではソースコードから追加しているので、その想定で書いていますが、もちろんStoryboardも利用できます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// ViewController.swift</span>
</span><span class='line'><span class="n">import</span> <span class="n">UIKit</span>
</span><span class='line'>
</span><span class='line'><span class="n">class</span> <span class="nl">ViewController:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">FBSDKLoginButtonDelegate</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">let</span> <span class="n">loginBtn</span> <span class="o">:</span> <span class="n">FBSDKLoginButton</span> <span class="o">=</span> <span class="n">FBSDKLoginButton</span><span class="p">()</span>
</span><span class='line'>      <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">addSubview</span><span class="p">(</span><span class="n">loginBtn</span><span class="p">)</span>
</span><span class='line'>      <span class="n">loginBtn</span><span class="p">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">center</span>
</span><span class='line'>      <span class="n">loginBtn</span><span class="p">.</span><span class="n">readPermissions</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;public_profile&quot;</span><span class="p">,</span> <span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="s">&quot;user_friends&quot;</span><span class="p">]</span>
</span><span class='line'>      <span class="n">loginBtn</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">loginButton</span><span class="p">(</span><span class="nl">loginButton:</span> <span class="n">FBSDKLoginButton</span><span class="o">!</span><span class="p">,</span> <span class="n">didCompleteWithResult</span> <span class="nl">result:</span> <span class="n">FBSDKLoginManagerLoginResult</span><span class="o">!</span><span class="p">,</span> <span class="nl">error:</span> <span class="n">NSError</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="s">&quot;ログイン処理を実行&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// エラーが発生した場合</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="s">&quot;Process Error !&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">isCancelled</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// ログインをキャンセルした場合</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="s">&quot;User Cancelled&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// その他</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="s">&quot;Login Succeeded&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">func</span> <span class="n">loginButtonDidLogOut</span><span class="p">(</span><span class="nl">loginButton:</span> <span class="n">FBSDKLoginButton</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="s">&quot;ログアウト処理を実行&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>結果、下図のような遷移が可能となります。</p>

<p><img src="http://grandbig.github.io/images/facebook_login_17.png" alt="Facebookログイン" /></p>

<h4>Facebookログインボタンのカスタム化</h4>

<p>因みに、Facebookログインボタンをカスタム化する方法を説明します。<br/>
折角なので、Storyboardでの方法として載せておきましょう。</p>

<p><strong>1．Storyboardにボタンを配置する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_19.png" alt="Storyboardにボタンを配置" /></p>

<p><strong>2．StoryboardからViewControllerにボタンアクションを接続する</strong></p>

<p><img src="http://grandbig.github.io/images/facebook_login_20.png" alt="ボタンアクションの接続" /><br/>
※ 上記キャプチャでは既に下記3の処理を書いてあるけど悪しからず&hellip;</p>

<p><strong>3．ログインアクションを追加</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// ViewController.swift</span>
</span><span class='line'><span class="err">@</span><span class="kt">IBAction</span> <span class="n">func</span> <span class="n">loginByFacebookID</span><span class="p">(</span><span class="nl">sender:</span> <span class="n">AnyObject</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="nl">loginManager:</span> <span class="n">FBSDKLoginManager</span> <span class="o">=</span> <span class="n">FBSDKLoginManager</span><span class="p">()</span>
</span><span class='line'>  <span class="n">loginManager</span><span class="p">.</span><span class="n">logInWithReadPermissions</span><span class="p">([</span><span class="s">&quot;public_profile&quot;</span><span class="p">,</span> <span class="s">&quot;email&quot;</span><span class="p">,</span> <span class="s">&quot;user_friends&quot;</span><span class="p">],</span> <span class="nl">fromViewController:</span> <span class="n">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">error</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="c1">// エラーが発生した場合</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="s">&quot;Process error&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">result</span><span class="p">.</span><span class="n">isCancelled</span> <span class="p">{</span>
</span><span class='line'>          <span class="c1">// ログインをキャンセルした場合</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="s">&quot;Cancelled&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="c1">// その他</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="s">&quot;Login Succeeded&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>さて、いかがでしたでしょうか？<br/>
Facebook SDKも徐々にバージョンアップしていますので、なかなか最新のライブラリに対応した記事がないこともあるでしょう。<br/>
そんなときに本記事を少しでも参考にしてもらえればと思います。<br/>
ということで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Freddyを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/05/08/freddy/"/>
    <updated>2016-05-08T22:47:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/05/08/freddy</id>
    <content type="html"><![CDATA[<h4>SwiftでJSONパーサーライブラリを使ってみよう</h4>

<p>GW最終日にブログを更新します。<br/>
以前、<a href="http://grandbig.github.io/blog/2016/03/06/swiftyjson/">今更だけど使ってみようSwiftyJson</a>で紹介しましたが、今回は別のSwift製のJSONパーサーライブラリを紹介したいと思います。<br/>
本日は、<a href="https://github.com/bignerdranch/Freddy">Freddy</a>というJSONパーサーライブラリを紹介します。<br/>
SwiftyJsonのGitHub上でのStar数が約1万なのに比べるとFreddyは約850と段違いに支持数は低いですが、割りと有名なライブラリかと思います。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>CocoaPodsでインストール</h4>

<p>まずはインストールです。<br/>
今回も<code>Open Weather Map API</code>をサンプルに利用したいので<a href="https://github.com/Alamofire/Alamofire">Alamofire</a>も合わせてインストールします。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">source</span> <span class="err">&#39;</span><span class="nl">https:</span><span class="c1">//github.com/CocoaPods/Specs.git&#39;</span>
</span><span class='line'><span class="n">platform</span> <span class="o">:</span><span class="n">ios</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">8.0</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">Freddy</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">Alamofire</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="o">~&gt;</span> <span class="mf">3.0</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Freddyを使ってみる</h4>

<p>続いて、早速<code>Freddy</code>を使ってみましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">do</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">let</span> <span class="n">json</span> <span class="o">=</span> <span class="n">try</span> <span class="n">JSON</span><span class="p">(</span><span class="nl">data:</span> <span class="n">response</span><span class="p">.</span><span class="n">data</span><span class="o">!</span><span class="p">)</span>
</span><span class='line'>              <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">try</span> <span class="n">json</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="s">&quot;weather&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;description&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>          <span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">print</span><span class="p">(</span><span class="s">&quot;例外が発生しました！&quot;</span><span class="p">)</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>SwiftyJson</code>では下記のように書いていました。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">let</span> <span class="n">json</span> <span class="o">=</span> <span class="n">JSON</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Freddy</code>と<code>SwiftyJson</code>を比較すると、そこまで大きな違いはないと思います。<br/>
<code>Freddy</code>の場合は、</p>

<ul>
<li>JSON型への変換に失敗した場合、throwで例外を投げる</li>
<li>JSON型データ内のデータ形式次第で実行するメソッドが変わる<br/>
<code>array</code>, <code>string</code>, <code>bool</code>等のメソッドを使うことでアンラップを気にする必要がなくなります。</li>
</ul>


<p>といった特徴があります。<br/>
どのライブラリを使った方が良いか否かは個々人の判断ですね。</p>

<p>簡単ですが、本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[快適なSpring BootプログラミングのためにIntelliJ IDEA Ultimate版を購入しよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/30/start-spring-boot-intellij-ultimate/"/>
    <updated>2016-04-30T14:48:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/30/start-spring-boot-intellij-ultimate</id>
    <content type="html"><![CDATA[<h4>はじめに</h4>

<p>筆者は決してJetBrains社の回し者ではありません笑<br/>
最近、Spring Bootにチャレンジしているのですが、自宅ではvimを使っていました。<br/>
なぜかって、IntelliJ IDEA Community版だとSpring Bootプログラミングの際に面倒なことが多いんですもの&hellip;。<br/>
しかしながら、vimでSpring Bootプログラミングを続けるのもしんどいので、<br/>
とうとうIntelliJ IDEA Ultimate版に手を出してしまったということなんです。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>IntelliJ IDEA Ultimate版とは</h4>

<p>さて、早速、IntelliJ IDEA Ultimate版の何が良いかについて説明していきます。<br/>
IntelliJ IDEAとは<a href="https://www.jetbrains.com/">JetBrains</a>社が開発した多言語対応の統合開発環境のことです。<br/>
Android StudioがIntelliJ IDEAを元に作られていることは割りと有名な話ですね。</p>

<p>筆者が<a href="http://grandbig.github.io/blog/2016/04/16/start-spring-boot/">Spring Bootを使い始めよう！</a>の記事内で使用していたIntelliJ IDEAはCommunity版だったのですが、<br/>
もちろん、Community版でもプログラミングを書くことやGradleによるビルド実行は問題ありません。<br/>
しかし、Community版では例えば下記のようなことに対応できません。</p>

<ul>
<li>Spring Boot Framework関連の予測変換</li>
<li>Thymeleaf関連の予測変換</li>
<li>Spring Bootを利用したプロジェクトをIntelliJから新規作成可能</li>
</ul>


<p>これに対応したのが <strong>IntelliJ IDEA Ultimate版</strong> なのです。<br/>
詳細は公式サイトから知ることができます。</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate1.png" alt="IntelliJ 比較表" /></p>

<p>また、価格ですが、個人版であれば、ビジネス版よりも比較的に安く購入することができます。<br/>
1年単位での購入なのですが、使い続けるほどに安くなるという価格設定がエンジニア魂をくすぐります。<br/>
下図のように、3年目以降は初年度の半額弱にまで安くなります。<br/>
(Apple Developer Programも同じような仕組みにして欲しいですね笑)</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate2.png" alt="IntelliJ IDEA Ultimate版の価格" /></p>

<p>因みに、同ページに「All Products Pack」という商品もありますが、<br/>
PHP, Ruby等々を無双したい方向けなので、筆者には今のところ不要です。</p>

<h4>IntelliJ IDEA Ultimate版の購入と設定</h4>

<p>IntelliJ IDEA Ultimate版の購入方法と設定について説明します。<br/>
購入は非常に簡単です。</p>

<p>1．<a href="https://www.jetbrains.com/idea/buy/#edition=personal">Buyページ</a>で <strong>Buy Now</strong> をクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate2.png" alt="Buyページ" /></p>

<p>2．CustomerページでEmailアドレスを入力してNEXTをクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate3.png" alt="Customerページ" /></p>

<p>3．Emailアドレスと国を確認してPROCESS AS NEW CUSTOMERをクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate4.png" alt="Customerページ2" /></p>

<p>4．Customer Infoページで必要事項を入力してPLACE ORDERをクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate5.png" alt="Customer Infoページ" /></p>

<p>5．JetBrains社から届いたメールの添付ファイルを開封して、リンクをクリックしてActivationページへ遷移</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate6.png" alt="JetBrains社から届いたメールの添付ファイル" /></p>

<p>6．Activationページを確認</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate7.png" alt="Activationページ" /></p>

<p>ここまでで、購入完了したことを確認できます。<br/>
続いて設定に必要な工程について説明します。</p>

<p>7．ActivationページでDownload activation codeをクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate8.png" alt="Activationページ2" /></p>

<p>8．IntelliJ IDEA Ultimate版をDownLoad</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate9.png" alt="Ultimate版をDownLoad" /></p>

<p>9．Activation codeをIntelliJ IDEA Ultimate版に登録</p>

<p>DownLoadしたIntelliJ IDEA Ultimate版を起動して、先ほどDownLoadしたActivation codeを設定しましょう。</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate10.png" alt="IntelliJ IDEA Ultimate" /></p>

<p>以上で設定も完了です。</p>

<h4>IntelliJ IDEA Ultimate版でSpring Bootを始めよう！</h4>

<p>では、IntelliJ IDEA Ultimate版でSpring Bootを利用する新規プロジェクトを作成しましょう。</p>

<p>1．IntelliJ IDEA Ultimate版を起動してCreate New Projectをクリック</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate11.png" alt="Create New Project" /></p>

<p>2．Spring Inilializrを選択</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate12.png" alt="Spring Initializr" /></p>

<p>3．各種名称や項目を設定</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate13.png" alt="各種名称や項目の設定" /></p>

<p>4．必要なDependencyを設定</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate14.png" alt="必要な名称や項目の設定" /></p>

<p>5．プロジェクト名と保存場所を設定</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate15.png" alt="プロジェクト名と保存場所を設定" /></p>

<p>6．Gradleの設定の確認</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate16.png" alt="Gradleの設定の確認" /></p>

<p>以上で新規プロジェクトが作成できました。<br/>
プロジェクトを実行してみましょう。</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot-intellij-ultimate17.png" alt="プロジェクトの実行" /></p>

<p>さて、如何でしたでしょうか？<br/>
非常に簡単に導入できますし、使い勝手も良いので、これからSpring Bootプログラミングを始める方は検討してみてはいかがでしょうか？<br/>
と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tokyo Server-Side Swift Meetup #2 に行ってきました！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/21/server-side-swift-meetup-2/"/>
    <updated>2016-04-21T19:24:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/21/server-side-swift-meetup-2</id>
    <content type="html"><![CDATA[<h3>Tokyo Server-Side Swift Meetup #2</h3>

<p>今日は久しぶりに勉強会に行ってきた話です。<br/>
今日行ってきた勉強会は<a href="http://tokyo-ss-swift.connpass.com/event/29240/">Tokyo Server-Side Swift Meetup #2</a>です。<br/>
筆者はSwiftでサーバサイドを書けるようになるとAppleが発表してからというもの、Swift3.0の公開を心待ちにしていました。<br/>
いざ、GitHubで公開された瞬間は何とも言えない感動を覚えました。</p>

<p>時は流れ&hellip;筆者は未だにSwift3.0を全く触っていません！<br/>
日々、世の中で公開されるサーバサイドSwift関連の情報も全然追いきれていません&hellip;<br/>
これはマズイということでまずは形だけでも参加してみることにしました。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>ということで勉強会のメモ書きです。</p>

<h3>Swiftプロトコル指向なCのラッパーを作る</h3>

<p><a href="https://speakerdeck.com/yusukeito/swift-purotokoruzhi-xiang-nacfalseratupawozuo-ru">資料のリンク</a></p>

<ul>
<li>CoreAudio→Swiftからたたくと問題があった

<ul>
<li>APIはC言語</li>
<li>AVFoundation系を叩くことが多いので、直接使う機会はあまりないかも</li>
<li>C言語でのサンプルを紹介</li>
<li>C言語は辛い, 1箇所でも間違えると落ちる・辛い</li>
<li>AudioObjectGetPropertyData, AudioObjectSetPropertyData</li>
</ul>
</li>
<li>Swiftでは入力の方に対応する出力の型として表現できる(Protocolのassociated-type)</li>
<li><a href="http://github.com/novi/HALAudio">HALAudio</a>

<ul>
<li>Core AudioはPrefixが特殊なのでわかりにくい</li>
<li>C言語よりSwiftの方がエラーハンドリングが楽(try-catchを使えるから)</li>
</ul>
</li>
<li>プロトコルの場合の制約

<ul>
<li>コンストラクタのある型(class, struct, enum)を一連の制約の中に入れることができない</li>
<li>プロトコル自体に値は持たせられない</li>
</ul>
</li>
</ul>


<h3>The Ecosystem of Web Development with Swift</h3>

<p><a href="https://speakerdeck.com/takebayashi/the-ecosystem-of-web-development-with-swift">資料のリンク</a></p>

<ul>
<li>Web Applicationを開発する上で使うツール

<ul>
<li>Web Application Framework</li>
<li>Web Application Servers etc</li>
</ul>
</li>
<li>FrameworkとServerの選び方

<ul>
<li>Framework

<ul>
<li><a href="https://github.com/PerfectlySoft/Perfect">PerfectLib</a>

<ul>
<li>2015/11に発表</li>
<li>オーソドックスな形で使える</li>
<li>PerfectServerModuleInitという名前は固定(癖がある)</li>
<li>デプロイがしんどい</li>
</ul>
</li>
<li><a href="https://github.com/IBM-Swift/Kitura">Kitura</a>

<ul>
<li>IBM製</li>
<li>2016/02に発表</li>
<li>至って普通の書き方</li>
<li>PerfectLibよりもシンプル！</li>
<li>Kitura-netでKitura Appはデプロイできる</li>
<li>サーバとFrameworkが密になり過ぎている</li>
<li>PerfectLibをKitura-netで使うことはできない</li>
<li>サーバとFrameworkは疎結合であるべき</li>
<li>Python: WSGI, Perl: PSGI, Ruby: Rack

<ul>
<li>サーバとFrameworkが疎結合で好きに組み合わせることができる</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/nestproject/Nest">Nest</a>

<ul>
<li>WSGIとかのSwift版</li>
<li>Swift Protocolの</li>
<li>非常にシンプル</li>
<li>Nest.swift1個だけ</li>
<li><a href="https://github.com/necolt/Swifton">Swifton</a>, <a href="https://github.com/nestproject/Frank">Frank</a>はNestをサポートしている</li>
<li><a href="https://github.com/kylef/Curassow/blob/master/docs/index.rst">Curassow</a>, <a href="https://github.com/takebayashi/http4swift">http4swift</a>はNestをサポートしている

<ul>
<li>http4swiftはオススメしない</li>
</ul>
</li>
<li><a href="https://github.com/nestproject/Inquiline">Inquiline</a>でちょっと楽に</li>
<li>Applicationの部分を変更せずにサーバを変えられる</li>
<li>Nest Tools: <a href="https://github.com/nestproject/NestTest">NestTest</a>, <a href="https://github.com/nestproject/NestTestSuite">NestTestSuite</a></li>
</ul>
</li>
<li><a href="https://github.com/open-swift">Open-Swft</a>

<ul>
<li>Cross project standards for Swift</li>
<li>先週まではSwiftXという名前だった</li>
<li><a href="https://github.com/open-swift/C7">C7(Component)</a>, <a href="https://github.com/open-swift/S4">S4(Server-Side)</a>, <a href="https://github.com/open-swift/D5">D5</a>

<ul>
<li>C7: Data, Stream, URIなどの基本的なデータ構造を提供</li>
<li>S4: Server-Side Swift StandardsなのでS4

<ul>
<li>More Swifty</li>
<li>Nestの競合(PSGIとかのSwift版)</li>
<li>NestよりもSwiftっぽい</li>
<li>非同期/同期をIFレベルで対応</li>
<li>S4はサーバ側も仕様が決まっている

<ul>
<li><a href="https://github.com/qutheory/vapor">Vapor</a>, <a href="https://github.com/Zewo/Zewo">Zewo</a>, <a href="https://github.com/noppoMan/Slimane">Slimane: Frameworks Supporting S4</a></li>
<li><a href="https://github.com/VeniceX/Venice">VeniceX</a>, <a href="https://github.com/noppoMan/Skelton">Skelton: Servers Supporting S4</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Slackチャンネルがある</li>
</ul>
</li>
<li>Nest vs S4

<ul>
<li>Community: S4の方が活発, NestはCommunityが死んでる</li>
<li>API: Nestは安定している, S4はAPIがころころ変わる</li>
<li>Spec: Nestはシンプル(画面1個に収まる), S4は複雑(C7をベースにしているから)</li>
<li>開発時は好きな方を選んでOK</li>
<li>Nestで実装されたものが多いが、S4はこれから良くなる</li>
<li>好きなFrameworkを選んで、それに対応した好きなサーバを選ぶ</li>
<li>NestでApp, S4でサーバしたい場合はアダプタを自作しましょう</li>
</ul>
</li>
<li>PerfectLibは使わないで!</li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>Up to Simane 0.2 and the Server Side Swift Standards</h3>

<p><a href="https://speakerdeck.com/noppoman/up-to-slimane-0-dot-2-and-the-server-side-swift-standards">資料のリンク</a></p>

<ul>
<li>Slimane

<ul>
<li>Slimane開発者</li>
<li>Express inspireしたFramework</li>
<li>超軽量</li>
<li>完全に非同期</li>
<li>超高速</li>
<li>モジュール化されています</li>
<li>マルチプロセスで動く</li>
<li>Swift3.0サポートしている(Swift2.2は動かない)</li>
<li>Open-Swiftを採用している</li>
<li>常に最新を追いかける思想で開発します</li>
<li>SUV: Swift Wrapper for libuv</li>
<li>Skelton: Stream based tiny Asynchronous HTTP Server</li>
</ul>
</li>
<li>0.1から結構変更した

<ul>
<li>極力頑張ってExpressっぽく書けるようにしている</li>
</ul>
</li>
<li>Open-Swift

<ul>
<li>開発がめちゃ速い(次の日はCompileが通らない&hellip;)</li>
<li>forkして、そのバージョンを使うようにしている</li>
<li>SwiftonがNestからOpen-Swiftに移行するかも？</li>
</ul>
</li>
<li>Slimaneでの書き方

<ul>
<li>めっちゃExpressっぽい</li>
<li>RESTful APIの書き方とか&hellip;</li>
<li>RouterもMiddlewareもExpressっぽい&hellip;</li>
<li>Session

<ul>
<li>Redisを使ったSession Storeの例を紹介</li>
</ul>
</li>
<li>Slimane.Static

<ul>
<li>今はバグっているので、すぐに直します！</li>
</ul>
</li>
<li>BodyParser

<ul>
<li>application/json, application/x-www-form-urlencoding</li>
</ul>
</li>
<li>Response with Template Engine

<ul>
<li>MustacheViewEngine</li>
</ul>
</li>
<li>Renderable Protocol

<ul>
<li>ReactのView EngineをSwiftで作る夢</li>
<li>夢であって、現実には存在しない</li>
</ul>
</li>
<li>Cluster

<ul>
<li>シングルスレッドをコア数分、展開する</li>
<li>書き方はNode.jsライク</li>
<li>Node.jsのClusterモジュールを真似て作った</li>
</ul>
</li>
<li>IPC between the Master and the Workers</li>
<li>Let it crash

<ul>
<li>メモリが80%こえたらRestartするといったAppの作り方ができる</li>
<li>プロセス管理ができる</li>
</ul>
</li>
<li>DataBase

<ul>
<li>Slimaneには今はない</li>
<li>MySql-Swiftがすごく良い

<ul>
<li>SlimaneはNo Blocking I/Oだからダメ&hellip;</li>
</ul>
</li>
</ul>
</li>
<li>Process.qwork

<ul>
<li>Blocking I/OをNo Blocking I/Oに見せかける</li>
<li>Synchronous I/O</li>
</ul>
</li>
<li>パフォーマンス

<ul>
<li>ABテストをやってみた</li>
<li>Slimaneが動くバージョンで試してみた</li>
<li>Swiftのバージョンによって動かないFrameworkは多い</li>
<li>Nginxは早過ぎる&hellip;</li>
<li>Expressより相当Slimaneは速い(Swiftが速いことが証明された)</li>
<li>REVELよりもVAPORの方が速い(Swiftが速いことを証明)</li>
</ul>
</li>
<li>Slimaneの今後

<ul>
<li>Promise対応必須</li>
<li>Stream Response</li>
<li>MySqlをネイティブ非同期で通信</li>
<li>Command line IF</li>
<li>Test Codes</li>
<li>Webフロントとの親和性を高めたい</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>今日は以上です。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spring BootでSystem.inにハマったメモ]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/17/gradle-spring-boot/"/>
    <updated>2016-04-17T23:13:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/17/gradle-spring-boot</id>
    <content type="html"><![CDATA[<h4>Spring BootをGradleでビルドしてハマったメモ</h4>

<p>今日は超絶ハマって苦しんだ超初歩についてメモ書きです。<br/>
Spring Bootに関する情報はあまり多くはないのですが、<br/>
さらに困ったことにほとんどの書籍やネット情報ではMavenでビルドしているのでGradleに関する情報が乏しくてハマりました&hellip;。</p>

<p>Javaでキーボード入力のために、<br/>
<code>Scanner scanner = new Scanner(System.in);</code>を記述することがあります。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>これをメインファイルに記述した状態で<code>gradle bootRun</code>コマンドを実行しても、<br/>
しれっと処理が流れてしまいました&hellip;。<br/>
「なぜだ〜〜〜」と格闘すること数時間!?</p>

<p>解決方法がわかりました。下記を<code>build.gradle</code>に追加します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// build.gradle</span>
</span><span class='line'><span class="n">bootRun</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">standardInput</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>これは<code>bootRun</code>タスクを実行したときに、<br/>
<code>System.in</code>をInput処理として判別するように定義しています。<br/>
もう一度<code>gradle bootRun</code>を実行してみると処理が途中でStopしてユーザ入力を受け付けるようになりました。</p>

<p>いや〜ハマった&hellip;。<br/>
本日は完全なるメモ書きでした。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spring BootでHello Worldをしてみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/17/hello-world-spring-boot/"/>
    <updated>2016-04-17T01:25:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/17/hello-world-spring-boot</id>
    <content type="html"><![CDATA[<h4>Spring BootでHello World</h4>

<p>引き続きSpring Bootの練習です。<br/>
前回、Spring Boot用のプロジェクトを作成して、起動してみるところまでやってみました。<br/>
今回はHello Worldアプリケーションを作成してみます。<br/>
(Node.jsのExpressとは異なりますが、結構簡単にできました。)</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<p>まずは、下記が前回のフォルダ構成です。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">firstApp</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">build</span><span class="o">.</span><span class="na">gradle</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradlew</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradlew</span><span class="o">.</span><span class="na">bat</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradle</span>
</span><span class='line'>  <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">wrapper</span>
</span><span class='line'>  <span class="err">┃</span>          <span class="err">┣━━</span> <span class="n">gradle</span><span class="o">-</span><span class="n">wrapper</span><span class="o">.</span><span class="na">jar</span>
</span><span class='line'>  <span class="err">┃</span>          <span class="err">┗━━</span> <span class="n">gradle</span><span class="o">-</span><span class="n">wrapper</span><span class="o">.</span><span class="na">properties</span>
</span><span class='line'>  <span class="err">┗━━</span> <span class="n">src</span>
</span><span class='line'>       <span class="err">┣━━</span> <span class="n">main</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┣━━</span> <span class="n">java</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">com</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>         <span class="err">┗━━</span> <span class="n">example</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>               <span class="err">┗━━</span> <span class="n">FirstAppApplication</span><span class="o">.</span><span class="na">java</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">resources</span>
</span><span class='line'>       <span class="err">┃</span>         <span class="err">┗━━</span> <span class="n">application</span><span class="o">.</span><span class="na">properties</span>
</span><span class='line'>       <span class="err">┗━━</span> <span class="n">test</span>
</span><span class='line'>            <span class="err">┗━━</span> <span class="n">java</span>
</span><span class='line'>                 <span class="err">┗━━</span> <span class="n">com</span>
</span><span class='line'>                      <span class="err">┗━━</span> <span class="n">example</span>
</span><span class='line'>                            <span class="err">┗━━</span> <span class="n">FirstAppApplicationTests</span><span class="o">.</span><span class="na">java</span>
</span></code></pre></td></tr></table></div></figure>


<p>今回はWebアプリケーションを作成するので、<code>build.gradle</code>を修正する必要があります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// build.gradle</span>
</span><span class='line'><span class="n">dependencies</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">compile</span> <span class="err">&#39;</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">web</span><span class="err">&#39;</span>
</span><span class='line'>  <span class="n">testCompile</span><span class="o">(</span><span class="err">&#39;</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">test</span><span class="err">&#39;</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>コンパイル対象のSpring Bootのモジュールを変更しています。<br/>
(元はcompile(&lsquo;org.springframework.boot:spring-boot-starter&rsquo;)でした。)</p>

<p>次に、上記のフォルダ構成の<code>FirstApplication.java</code>と同階層に<code>HelloController.java</code>を作成します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// HelloController.java</span>
</span><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@RestController</span>
</span><span class='line'><span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&quot;/hello-world&quot;</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>
</span><span class='line'>  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">method</span><span class="o">=</span><span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
</span><span class='line'>  <span class="kd">public</span> <span class="n">String</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="s">&quot;Hello Spring MVC&quot;</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>HelloController.java</code>の処理について説明すると</p>

<ul>
<li><code>@RestController</code>: WebAPIのエントリポイントクラスを指定</li>
<li><code>@RequestMapping</code>: パスやHTTPメソッド(GET, POST, PUT, DELETEなど)のマッピングを指定

<ul>
<li><code>@RequestMapping("/hello-world")</code>で<code>HelloController</code>クラスにパスをマッピング</li>
<li><code>@RequestMapping(method=RequestMethod.GET)</code>で<code>hello</code>メソッドにHTTPメソッドをマッピング</li>
</ul>
</li>
</ul>


<p>そして、<code>application.properties</code>にポート番号を指定します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// application.properties</span>
</span><span class='line'><span class="n">server</span><span class="o">.</span><span class="na">port</span><span class="o">=</span><span class="mi">9000</span>
</span></code></pre></td></tr></table></div></figure>


<p>あとは、ターミナルから<code>gradle bootRun</code>を実行するだけです。<br/>
そして、Chromeで<code>http://localhost:9000/hello-world</code>にアクセスしてみましょう。<br/>
下記のような結果が得られるはずです。</p>

<p><img src="http://grandbig.github.io/images/hello-world-spring-boot1.png" alt="Hello World" /></p>

<p>もろもろの問題はあるけれど、後回しにして、引き続き勉強を進めます。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spring Bootを使い始めよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/16/start-spring-boot/"/>
    <updated>2016-04-16T14:43:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/16/start-spring-boot</id>
    <content type="html"><![CDATA[<h4>Spring Bootとは</h4>

<p>本日はこれまでと全く趣向を変えて、 <strong>Spring Boot</strong> について書きたいと思います。<br/>
<a href="http://projects.spring.io/spring-boot/">Spring Boot</a>とはSpringプロジェクトが提供している多くのFrameworkを統合した、<br/>
簡単にWebアプリケーションを作成できるように設計されたFrameworkです。</p>

<p>開発者はSpringプロジェクト内で用意された様々なFrameworkを意識する必要がありません。<br/>
Spring Bootとは長年ブラッシュアップされ、肥大化してきたSpringプロジェクトへの参入ハードルを劇的に下げるものと言えるでしょう。</p>

<p>なんて言いつつも、<br/>
筆者はJavaによるWebアプリケーション開発はほとんどやったことがありません。</p>

<p>何はともあれ、まずは触れてみたいと思います。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>Spring BootによるWeb Application Projectを作成しよう！</h4>

<p>最も簡単な方法について説明します。</p>

<p>1．<a href="https://start.spring.io/">Spring Initializr</a>にアクセス<br/>
Projectの自動生成ツールサイトがあるので、アクセスして各種項目を設定しましょう。</p>

<ul>
<li>Project: GradleおよびMavenから選択できます</li>
<li>Spring Boot: バージョンを選択できます</li>
<li>Group: パッケージ名を指定できます</li>
<li>Artifact: メインファイル名を指定できます</li>
<li>Dependencies: 初期状態で追加されるdependenciesを指定できます</li>
</ul>


<p>筆者は下記のように指定しました。</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot1.png" alt="Spring Initializr" /></p>

<p>2．Generate Projectボタンをクリック<br/>
下記のようなProjectが生成されます。<br/>
(下記は筆者が指定した設定項目で生成されたProjectです。)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">firstApp</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">build</span><span class="o">.</span><span class="na">gradle</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradlew</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradlew</span><span class="o">.</span><span class="na">bat</span>
</span><span class='line'>  <span class="err">┣━━</span> <span class="n">gradle</span>
</span><span class='line'>  <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">wrapper</span>
</span><span class='line'>  <span class="err">┃</span>          <span class="err">┣━━</span> <span class="n">gradle</span><span class="o">-</span><span class="n">wrapper</span><span class="o">.</span><span class="na">jar</span>
</span><span class='line'>  <span class="err">┃</span>          <span class="err">┗━━</span> <span class="n">gradle</span><span class="o">-</span><span class="n">wrapper</span><span class="o">.</span><span class="na">properties</span>
</span><span class='line'>  <span class="err">┗━━</span> <span class="n">src</span>
</span><span class='line'>       <span class="err">┣━━</span> <span class="n">main</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┣━━</span> <span class="n">java</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">com</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>         <span class="err">┗━━</span> <span class="n">example</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┃</span>               <span class="err">┗━━</span> <span class="n">FirstAppApplication</span><span class="o">.</span><span class="na">java</span>
</span><span class='line'>       <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">resources</span>
</span><span class='line'>       <span class="err">┃</span>         <span class="err">┗━━</span> <span class="n">application</span><span class="o">.</span><span class="na">properties</span>
</span><span class='line'>       <span class="err">┗━━</span> <span class="n">test</span>
</span><span class='line'>            <span class="err">┗━━</span> <span class="n">java</span>
</span><span class='line'>                 <span class="err">┗━━</span> <span class="n">com</span>
</span><span class='line'>                      <span class="err">┗━━</span> <span class="n">example</span>
</span><span class='line'>                            <span class="err">┗━━</span> <span class="n">FirstAppApplicationTests</span><span class="o">.</span><span class="na">java</span>
</span></code></pre></td></tr></table></div></figure>


<p>3．<code>gradle bootRun</code>コマンドを実行<br/>
firstApp直下で<code>gradle bootRun</code>コマンドを実行します。<br/>
下記のような実行結果が出るはずです。</p>

<p><img src="http://grandbig.github.io/images/start-spring-boot2.png" alt="実行結果" /></p>

<p>これは生成されたメインファイルでのソースが下記のようになっているためです。<br/>
<code>main</code>メソッド内で実行している処理はたったの1行で、<br/>
これはSpring Bootによるアプリケーションを起動する処理となっています。</p>

<p>ここで設定している<code>@SpringBootApplication</code>アノテーションは<br/>
<code>@Configuration</code>, <code>@EnableAutoConfiguration</code>, <code>@ComponentScan</code>の3つの設定と同義になります。</p>

<ul>
<li><code>@Configuration</code>: Beanを含むJavaConfig用のクラスに付与する</li>
<li><code>@EnableAutoConfiguration</code>: 様々な設定を自動で有効にする</li>
<li><code>@ComponentScan</code>: クラスの自動スキャンを可能にする</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@SpringBootApplication</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FirstAppApplication</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">FirstAppApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>因みに、初期状態で<code>sourceCompatibility</code>および<code>targetCompatibility</code>が <strong>1.8</strong> となっています。<br/>
よって、実行するためにはJDKバージョン <strong>1.8</strong> が必要になります。<br/>
(インストールは<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">こちら</a>から)</p>

<p>まずは最も簡単な導入が完了したようです。</p>

<h4>IntelliJ IDEAにimportしてみよう</h4>

<p>ターミナルからプロジェクトの開発を続けても良いのですが、<br/>
ターミナルに慣れていない方は統合開発環境ツールで開きたいかもしれませんね。<br/>
複雑なプロジェクトになればなるほど、ターミナルでの開発は辛くなるかもしれません。</p>

<p>ということでIntelliJ IDEAに先ほどのプロジェクトをimportしてみましょう。</p>

<p>1．IntelliJ IDEAを起動して、importを選択<br/>
<img src="http://grandbig.github.io/images/start-spring-boot3.png" alt="import" /></p>

<p>2．importしたいDirectoryを選択<br/>
<img src="http://grandbig.github.io/images/start-spring-boot4.png" alt="Directoryの選択" /></p>

<p>3．Createの方を選択<br/>
<img src="http://grandbig.github.io/images/start-spring-boot5.png" alt="Createの方を選択" /></p>

<p>4．Project名と保存場所を確認<br/>
<img src="http://grandbig.github.io/images/start-spring-boot6.png" alt="Project名と保存場所を確認" /></p>

<p>5．流れに任せてNextを続ける<br/>
<img src="http://grandbig.github.io/images/start-spring-boot7.png" alt="ソースファイル一覧" /></p>

<p><img src="http://grandbig.github.io/images/start-spring-boot8.png" alt="ライブラリの確認" /></p>

<p><img src="http://grandbig.github.io/images/start-spring-boot9.png" alt="ライブラリの確認" /></p>

<p><img src="http://grandbig.github.io/images/start-spring-boot10.png" alt="JDKを選択" /></p>

<p>6．一通り作業が終わったらFinishを選択<br/>
<img src="http://grandbig.github.io/images/start-spring-boot11.png" alt="Finishを選択" /></p>

<p>7．Intellij IDEAのターミナルで<code>gradle bootRun</code>を実行<br/>
<img src="http://grandbig.github.io/images/start-spring-boot12.png" alt="コマンドを実行" /></p>

<p>続いて、最も簡単なIntelliJ IDEA上での実行が完了しました。</p>

<p>引き続きSpring Bootを見ていきますが、本記事は一旦ここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PromiseKitを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/09/swift-promisekit/"/>
    <updated>2016-04-09T23:07:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/09/swift-promisekit</id>
    <content type="html"><![CDATA[<h4>SwiftでPromiseライブラリを使ってみよう</h4>

<p>さて、前回から引き続きSwiftでのPromiseライブラリについて見ていきたいと思います。<br/>
今回はPromiseライブラリのSwift界隈で有名な <strong>PromiseKit</strong> について見ていきます。</p>

<h4>PromiseKitのインストール</h4>

<p>早速、 <strong>PromiseKit</strong> の導入について紹介します。<br/>
筆者の場合、Xcode7.3を利用しているため、Swift2.2を扱うことになります。<br/>
<a href="https://github.com/mxcl/PromiseKit">GitHub</a>で紹介されている下記の導入方法では <strong>2.2.1</strong> がインストールされます。<br/>
しかし、このバージョンはSwift2.2に対応していないため、エラーが発生します。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'><span class="n">pod</span> <span class="s">&quot;PromiseKit&quot;</span><span class="p">,</span> <span class="s">&quot;~&gt;2.0&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://promisekit.org/">PromiseKitの公式ドキュメントページ</a>を見ると、Newsの項目でバージョン <strong>3.1.0</strong> でSwift2.2に対応したと書かれています。<br/>
そこで、今回は、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'><span class="n">pod</span> <span class="s">&quot;PromiseKit&quot;</span><span class="p">,</span> <span class="s">&quot;3.1.0&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>とすることで、Xcode7.3でも問題なく、PromiseKitを扱えるようにしました。</p>

<h4>PromiseKitで非同期処理を直列に書いてみよう</h4>

<p>前回のBrightFutureで紹介した処理をPromiseKitで書いてみようと思います。<br/>
まずは、非同期処理をPromiseKitを使って定義します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">p</span><span class="p">(</span><span class="nl">msg:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">let</span> <span class="n">promise</span> <span class="o">=</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="p">{</span> <span class="p">(</span><span class="n">fulfill</span><span class="p">,</span> <span class="n">reject</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">let</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dispatch_async</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>          <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
</span><span class='line'>              <span class="n">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>              <span class="n">fulfill</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>          <span class="p">})</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>                                                  
</span><span class='line'>  <span class="k">return</span> <span class="n">promise</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>では、これを呼び出してみましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">p</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">).</span><span class="n">then</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="k">in</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">p</span><span class="p">(</span><span class="s">&quot;Good Evening&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}.</span><span class="n">then</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg2</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="k">in</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">p</span><span class="p">(</span><span class="s">&quot;Good Bye&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ネストが浅い状態で複数の非同期処理を書くことができました。<br/>
また、BrightFutureと大きな違いはなく書くことできました。</p>

<h4>PromiseKitで非同期処理を並列に書いてみよう</h4>

<p>続いて、複数の非同期処理を並列に実行する場合を考えてみます。<br/>
順番に処理をする必要がなく、処理が完了したものから反映していきたい場合などに使いますね。</p>

<p>非同期処理自体は先程と同じものを使います。<br/>
では、並列に処理を呼び出してみましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// 実行したい非同期処理を定義</span>
</span><span class='line'><span class="n">let</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">p_promiseKit</span><span class="p">(</span><span class="s">&quot;Method1&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">let</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">p_promiseKit</span><span class="p">(</span><span class="s">&quot;Method2&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">let</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">p_promiseKit</span><span class="p">(</span><span class="s">&quot;Method3&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// まとめて非同期処理を実行</span>
</span><span class='line'><span class="n">when</span><span class="p">([</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">]).</span><span class="n">then</span> <span class="p">{</span> <span class="p">(</span><span class="nl">result:</span> <span class="p">[</span><span class="n">String</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">AnyPromise</span> <span class="k">in</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">AnyPromise</span><span class="p">(</span><span class="nl">bound:</span> <span class="n">Promise</span><span class="p">())</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>先に書いた直列処理では、1秒間隔でログが出力されたかと思います。<br/>
ここでは同時に実行したため、ほぼ同時に3つのログが出力されたはずです。</p>

<p>さて如何だったでしょうか？<br/>
SwiftでもPromiseライブラリはたくさん出てきました。<br/>
<a href="https://github.com/Thomvis/BrightFutures">BrightFuture</a>, <a href="https://github.com/mxcl/PromiseKit">PromiseKit</a>, <a href="https://github.com/ReactKit/SwiftTask">SwiftTask</a>のいずれを利用するかは開発者の判断になるかと思います。<br/>
個人的にはPromiseKitはGitHub上に似た名称のブランチがたくさんあるのをどうにかして欲しいなと思ってたりします笑</p>

<p>また、時間があるときにPromiseを使って何かやりたいと思います。<br/>
と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[BrightFutureを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/04/03/bright-future/"/>
    <updated>2016-04-03T17:11:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/04/03/bright-future</id>
    <content type="html"><![CDATA[<h4>SwiftでPromiseライブラリを使ってみよう</h4>

<p>最近は更新頻度が落ちてしまっていますが、久々に更新します。<br/>
(iPhoneSEが発表されたことですし笑)</p>

<p>さて、本日はSwift版Promiseライブラリとしては割と有名な <strong>BrightFuture</strong> ライブラリを使ってみたいと思います。<br/>
筆者は、新しいことに取り組む際は、JSで例を見た方がわかりやすかったりするので、Node.jsのPromiseと交えながら紹介していきたいと思います。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>Promiseとは</h4>

<p>まずは、Promiseの存在について軽く触れておきます。<br/>
<a href="http://azu.github.io/promises-book/">JS Promiseの本</a>によると、Promiseとは『非同期処理を抽象化したオブジェクトとそれを操作する仕組み』のことだそうです。<br/>
これだけ読むと理解しがたいと思うので、筆者が感じるPromiseの良さをざっくり書くと&hellip;</p>

<ul>
<li>非同期処理を繰り返す場合でも、深いネストにならない</li>
<li>非同期処理を繰り返す場合でも、見かけ上、直列的に処理を書ける</li>
</ul>


<p>ということにつきると思います。</p>

<p>具体的な例については、Node.jsで説明します。</p>

<h4>Node.jsでのPromiseの例</h4>

<p>早速、見ていきます。<br/>
Node.jsで非同期処理を定義する場合、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// 非同期処理を持ったメソッド</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">p</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">callback</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>  <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>となります。<br/>
このメソッドを繰り返し実行する場合、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg1</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'>  <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Good Evening&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg2</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg2</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'>      <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Good Bye&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg3</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg3</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>のようになります。<br/>
ネスト深いですね&hellip;。</p>

<p>これをPromiseを用いて書き直してみましょう。<br/>
まずはメソッドの定義にPromiseを適用します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">p</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resolve</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">resolve</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
</span><span class='line'>      <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>こうすることで、呼び出し側で下記のように浅いネストで書くことができます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">msg1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg1</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Good Evening&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">msg2</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg2</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="s2">&quot;Good Bye&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">})</span>
</span><span class='line'><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">msg3</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg3</span> <span class="o">+</span> <span class="s2">&quot;, date: &quot;</span> <span class="o">+</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>うむ。かなり浅くなりましたね。<br/>
これをSwiftで書くとどうなるのでしょうか？</p>

<h4>SwiftでのPromiseの例</h4>

<p>Swiftでも非同期処理を定義する場合、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="nf">p</span><span class="p">(</span><span class="nl">msg:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">closure:</span> <span class="p">(</span><span class="n">String</span> <span class="o">-&gt;</span> <span class="p">()))</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">closure</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>のように書けたりします。<br/>
これを複数回呼び出す場合、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">p</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg1</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="n">msg1</span> <span class="o">+</span> <span class="s">&quot;, date: \(NSDate())&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">p</span><span class="p">(</span><span class="s">&quot;Good Evening&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg2</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="n">msg2</span> <span class="o">+</span> <span class="s">&quot;, date: \(NSDate())&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="n">p</span><span class="p">(</span><span class="s">&quot;Good Bye&quot;</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg3</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">msg3</span> <span class="o">+</span> <span class="s">&quot;, date: \(NSDate())&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>のようになります。<br/>
同様にネストが深くなりますね&hellip;。</p>

<p>では、Promiseでネストを改善しましょう。<br/>
Swiftでは、OSSの<a href="https://github.com/Thomvis/BrightFutures">BrightFuture</a>を利用します。<br/>
導入はいつも通りCocoaPodsを使いました。</p>

<p>1． Podfileに下記を記載</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">source</span> <span class="err">&#39;</span><span class="nl">https:</span><span class="c1">//github.com/CocoaPods/Specs.git&#39;</span>
</span><span class='line'><span class="n">platform</span> <span class="o">:</span><span class="n">ios</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">8.0</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">BrightFutures</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>2．<code>pod install</code>を実行</p>

<p>導入が完了したら、処理を書き換えていきます。<br/>
メソッドにPromiseを適用しましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">p_future</span><span class="p">(</span><span class="nl">msg:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">NoError</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">promise</span> <span class="o">=</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">NoError</span><span class="o">&gt;</span><span class="p">()</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">dispatch_get_global_queue</span><span class="p">(</span><span class="n">DISPATCH_QUEUE_PRIORITY_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>  
</span><span class='line'>  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dispatch_sync</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">promise</span><span class="p">.</span><span class="n">success</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span class='line'>      <span class="p">})</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">return</span> <span class="n">promise</span><span class="p">.</span><span class="n">future</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>これを呼び出すときは下記のように書けます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">p_future</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">).</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">msg1</span> <span class="k">in</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="n">msg1</span> <span class="o">+</span> <span class="s">&quot;, date: \(NSDate())&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">p_future</span><span class="p">(</span><span class="s">&quot;Good Evening&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}.</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">msg2</span> <span class="k">in</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="n">msg2</span> <span class="o">+</span> <span class="s">&quot;, date: \(NSDate())&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">p_future</span><span class="p">(</span><span class="s">&quot;Good Bye&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}.</span><span class="n">onSuccess</span> <span class="p">{</span> <span class="p">(</span><span class="n">msg3</span><span class="p">)</span> <span class="k">in</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="n">msg3</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ネストが浅くなりましたね。<br/>
こうして比較してみると、Node.jsとSwiftで呼び出し側の書き方はかなり似ていますね。<br/>
Swiftだけを眺めてみてもよくわからないという方はNode.jsの方も見てみると良いと思います。</p>

<p>今回はかなり基本的な例を書かせて頂きましたが、参考になれば幸いです。<br/>
といったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Network Link Conditionerを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/03/24/network-link-conditioner/"/>
    <updated>2016-03-24T21:17:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/03/24/network-link-conditioner</id>
    <content type="html"><![CDATA[<h4>iPhoneシミュレータで速度制限してみよう！</h4>

<p>少し間が空きましたが、ブログを更新します。<br/>
本日は <strong>iPhoneシミュレータで速度制限する方法</strong> を見ていきたいと思います。<br/>
と言うのも、筆者はこれまでシミュレータでの開発をあまりやったことがありませんでした。<br/>
なぜなら開発端末のスペックが基本的にギリギリだったからです&hellip;。</p>

<p>少しでも開発端末のメモリ消費量を減らすために実機での開発をしてきました。<br/>
しかし、『手元に実機がある環境というのも実は贅沢なのでは？』と思い直し、<br/>
今更ではありますが、本日のお題に行き着いたわけです。</p>

<p>では早速見ていきましょう。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>Network Link Conditionerをインストールする</h4>

<p>iPhoneシミュレータには実機と違って、速度制限する機能が設定アプリ内にありません。<br/>
なので、Appleが提供している <strong>Network Link Conditioner</strong> ツールをインストールします。</p>

<p>0．Apple Developerサイトにサインイン<br/>
まずは、<a href="https://developer.apple.com/downloads/">Apple Developerサイト</a>にアクセスしましょう。<br/>
開発者IDでサインインしていない場合、下記のようなサインイン画面にリダイレクトされます。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner1.png" alt="Apple Developer Sign in" /></p>

<p>サインイン後、Download画面には飛ばずに、別画面にリダイレクトされます。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner2.png" alt="Apple Top Page" /></p>

<p>1．<a href="https://developer.apple.com/downloads/">Apple Downloadサイト</a>に遷移してダウンロード<br/>
サインインが完了していれば当初の目的のDownloadサイトに問題なくアクセスできます。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner3.png" alt="Download Page" /></p>

<p>2．Network Link Conditioerをインストール<br/>
続いて、インストールした <strong>Hardware IO Tools</strong> の中から <strong>Network Link Conditioner</strong> をダブルクリックしましょう。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner4.png" alt="Network Link Conditionerをインストール" /></p>

<p>※ 全てのユーザに対してインストールするか聞かれますが、もちろんOKにしましょう！<br/>
(でないと、先に進めないので&hellip;)</p>

<p>3．Network Link Conditionerを起動<br/>
インストール後、 <strong>Network Link Conditioner</strong> が自動的に起動します。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner5.png" alt="Network Link Conditioner" /></p>

<p>4．通信速度を設定<br/>
これで速度制限が設定できるようになったので、早速設定します。<br/>
と言っても実に簡単で <strong>Profile</strong> から該当する通信形式を選択して左下のスイッチをONにするだけです。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner6.png" alt="通信速度の選択" /></p>

<p>上手を見て分かる通り、<br/>
100% Loss, 3G, DSL, Edge, High Latency DNS, Very Bad Network, Wifi<br/>
から選択できます。</p>

<p>それぞれの意味は下記のようなイメージでしょうか。</p>

<ul>
<li>100% Loss: Packetが全てロスするので、何も通信できません</li>
<li>3G: モバイル端末での3G通信</li>
<li>DSL: アナログ回線による通信方式(有名なのはADSL)</li>
<li>Edge: 広い意味での3Gの1つだが、2.75Gとも言われる</li>
<li>High Latency DNS: DNSサーバ側のDelayを想定</li>
<li>Very Bad Network: 非常に通信状態が悪い</li>
<li>Wifi: Wifi環境</li>
</ul>


<p>今や、都内では3G環境を探す方がたいへんだったりしますが、<br/>
通信状態が悪いところでの実験は必要不可欠だと思います。</p>

<p>因みに、2回目以降はシステム環境設定から <strong>Network Link Conditioner</strong> の起動が可能です。</p>

<p><img src="http://grandbig.github.io/images/network-link-conditioner7.png" alt="システム環境設定から起動" /></p>

<p>ぜひ試してみてください。<br/>
と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SwiftでTupleを活用しよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/03/12/swift-tuple/"/>
    <updated>2016-03-12T23:09:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/03/12/swift-tuple</id>
    <content type="html"><![CDATA[<h4>Tupleとは</h4>

<p>さて、本日はSwiftの <strong>Tuple</strong> について見ていきます。<br/>
<strong>Tuple</strong> とは『複数の型の値を一組にまとめる』ときに利用します。</p>

<p>続いて具体的な使い方を紹介します。</p>

<h5>valueのみの格納</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">sample</span> <span class="o">=</span> <span class="p">(</span><span class="mi">201603</span><span class="p">,</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="s">&quot;0番目の値は\(sample.0), 1番目の値は\(sample.1), 2番目の値は\(sample.2)&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>これを実行すると、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="mi">0</span><span class="err">番目の値は</span><span class="mi">201603</span><span class="p">,</span> <span class="mi">1</span><span class="err">番目の値は</span><span class="n">TEST</span><span class="p">,</span> <span class="mi">2</span><span class="err">番目の値は</span><span class="n">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>のように出力されます。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h5>key, valueの格納</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">sample</span> <span class="o">=</span> <span class="p">(</span><span class="nl">num:</span> <span class="mi">201603</span><span class="p">,</span> <span class="nl">str:</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="nl">flag:</span> <span class="n">true</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="s">&quot;0番目の値は\(sample.num)&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="err">番目の値は\</span><span class="p">(</span><span class="n">sample</span><span class="p">.</span><span class="n">str</span><span class="p">),</span> <span class="mi">2</span><span class="err">番目の値は\</span><span class="p">(</span><span class="n">sample</span><span class="p">.</span><span class="n">flag</span><span class="p">))</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="s">&quot;0番目の値は\(sample.0), 1番目の値は\(sample.1), 2番目の値は\(sample.2)&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>これを実行すると、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="mi">0</span><span class="err">番目の値は</span><span class="mi">201603</span><span class="p">,</span> <span class="mi">1</span><span class="err">番目の値は</span><span class="n">TEST</span><span class="p">,</span> <span class="mi">2</span><span class="err">番目の値は</span><span class="n">true</span>
</span><span class='line'><span class="mi">0</span><span class="err">番目の値は</span><span class="mi">201603</span><span class="p">,</span> <span class="mi">1</span><span class="err">番目の値は</span><span class="n">TEST</span><span class="p">,</span> <span class="mi">2</span><span class="err">番目の値は</span><span class="n">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>のように出力されます。<br/>
key, valueの関係で書いても、数値指定が可能です。</p>

<p>数値指定ができることから、部分的にkeyを指定することができます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">let</span> <span class="n">sample</span> <span class="o">=</span> <span class="p">(</span><span class="mi">201603</span><span class="p">,</span> <span class="nl">str:</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="nl">flag:</span> <span class="n">true</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="s">&quot;0番目の値は\(sampel.0), 1番目の値は\(sample.str), 2番目の値は\(sample.flag)&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>これを実行すると、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="mi">0</span><span class="err">番目の値は</span><span class="mi">201603</span><span class="p">,</span> <span class="mi">1</span><span class="err">番目の値は</span><span class="n">TEST</span><span class="p">,</span> <span class="mi">2</span><span class="err">番目の値は</span><span class="n">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>と出力されます。</p>

<h4>TupleとArray, Dictionaryの違いは？</h4>

<p><strong>Tuple</strong> が真新しく見えるかというと実はそうでもないというのが筆者の感想でありました。<br/>
というのも、ここまでの話では『ArrayやDictionaryで代用できるのでは？』と思えたためです。</p>

<p>それぞれ比較してみましょう。</p>

<h5>TupleとArrayを比較</h5>

<p>まずは、 <strong>Tuple</strong> とArrayの比較です。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Array</span>
</span><span class='line'><span class="n">let</span> <span class="n">arraySample</span> <span class="o">=</span> <span class="p">[</span><span class="mi">201603</span><span class="p">,</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">]</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">arraySample</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Tuple</span>
</span><span class='line'><span class="n">let</span> <span class="n">tupleSample</span> <span class="o">=</span> <span class="p">(</span><span class="mi">201603</span><span class="p">,</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="n">true</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">tupleSample</span><span class="mf">.0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>2つの違い

<ul>
<li>書式が異なる(Tupleの方が簡易)</li>
<li>Arrayは要素の追加と削除が可能だが、Tupleはできない</li>
</ul>
</li>
<li>2つの同じところ

<ul>
<li>異なる型の値を格納できる(Arrayは<code>AnyObject</code>にすれば良い)</li>
<li>値渡し</li>
</ul>
</li>
</ul>


<h5>TupleとDictionaryを比較</h5>

<p>次に、 <strong>Tuple</strong> とDictionaryの比較です。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Dictionary</span>
</span><span class='line'><span class="n">let</span> <span class="n">dictSample</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;numValue&quot;</span><span class="o">:</span> <span class="mi">201603</span><span class="p">,</span> <span class="s">&quot;strValue&quot;</span><span class="o">:</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="s">&quot;flagValue&quot;</span><span class="o">:</span> <span class="n">true</span><span class="p">]</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">dictSample</span><span class="p">[</span><span class="s">&quot;numValue&quot;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Tuple</span>
</span><span class='line'><span class="n">let</span> <span class="n">tupleSample</span> <span class="o">=</span> <span class="p">(</span><span class="nl">numValue:</span> <span class="mi">201603</span><span class="p">,</span> <span class="nl">strValue:</span> <span class="s">&quot;TEST&quot;</span><span class="p">,</span> <span class="nl">flagValue:</span> <span class="n">true</span><span class="p">)</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">tupleSample</span><span class="p">.</span><span class="n">numValue</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Tuple</strong> とDictionaryの違いと同一点はArrayと比較した場合と同じです。</p>

<ul>
<li>2つの違い

<ul>
<li>書式が異なる(Tupleの方が簡易)</li>
<li>Dictionaryは要素の追加と削除が可能だが、Tupleはできない</li>
</ul>
</li>
<li>2つの同じところ

<ul>
<li>異なる型の値を格納できる(DictionaryはValueを<code>AnyObject</code>にすれば良い)</li>
<li>値渡し</li>
</ul>
</li>
</ul>


<h4>まとめ</h4>

<p>正直、『こういったところでは  <strong>Tuple</strong> を必ず利用したい』という利用シーンがあまり思い浮かびません&hellip;。<br/>
書式が簡単でとっつきやすいという良さはあるかもしれませんが、<br/>
実際に利用した際にその本当の意義を感じることができるのかもしれませんね。</p>

<p>と言ったところで、本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[今更だけど使ってみようSwiftyJson]]></title>
    <link href="http://grandbig.github.io/blog/2016/03/06/swiftyjson/"/>
    <updated>2016-03-06T22:34:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/03/06/swiftyjson</id>
    <content type="html"><![CDATA[<h4>SwiftyJsonの便利さを改めて確かめてみる</h4>

<p>さて、筆者の個人的な諸事情により、なかなか時間が取れないため、<br/>
完全に新しいことを書けないでいる今日このごろです。<br/>
今更ながら書くか否か迷ったのですが、<br/>
折角、習慣化しているブログ投稿をSTOPさせたくもないので、<br/>
Swift屋にとっては当たり前となっているであろう<a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJson</a>について書こうと思います。<br/>
何を隠そう、筆者は今までSwiftyJsonの存在は把握していたものの、<br/>
自身で変換して書くことに拘っていたので触っていませんでした。<br/>
がしかし、食わず嫌いは如何なものかということで触ってみることにしました。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>CocoaPodsでインストール</h4>

<p>まずは、インストールです。<br/>
<code>CocoaPods</code>, <code>Carthage</code>, <code>Swift Package Manager</code>に対応した良心的なライブラリです。<br/>
筆者はいつも通り<code>CocoaPods</code>を使います。<br/>
今回も<code>Open Weather Map API</code>をサンプルに利用したいので<a href="https://github.com/Alamofire/Alamofire">Alamofire</a>も合わせてインストールします。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">platform</span> <span class="o">:</span><span class="n">ios</span><span class="p">,</span> <span class="err">&#39;</span><span class="mf">8.0</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">use_frameworks</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'><span class="n">target</span> <span class="err">&#39;</span><span class="n">SwiftyJsonSample</span><span class="err">&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">pod</span> <span class="err">&#39;</span><span class="n">Alamofire</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="o">~&gt;</span> <span class="mf">3.0</span><span class="err">&#39;</span>
</span><span class='line'>  <span class="n">pod</span> <span class="err">&#39;</span><span class="n">SwiftyJSON</span><span class="err">&#39;</span><span class="p">,</span> <span class="o">:</span><span class="n">git</span> <span class="o">=&gt;</span> <span class="err">&#39;</span><span class="nl">https:</span><span class="c1">//github.com/SwiftyJSON/SwiftyJSON.git&#39;</span>
</span><span class='line'><span class="n">end</span>
</span></code></pre></td></tr></table></div></figure>


<h4>SwiftyJsonで何が便利になったのか</h4>

<p>さて、早速、<code>SwiftyJson</code>を使うことで何が便利になるのか見てみたいと思います。<br/>
まずは、便利にする前のベースのコードをご覧下さい。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">value</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="nl">weatherArray:</span><span class="n">AnyObject</span><span class="o">?</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">weather</span> <span class="o">=</span> <span class="n">weatherArray</span><span class="o">?</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="n">as</span><span class="o">?</span> <span class="n">String</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>前回の記事で紹介した<code>guard statement</code>を使うことでネストが浅くなっていますね。<br/>
これはわかりやすさのために、バラけて書いたのですが、<br/>
元々 <strong>description</strong> の値が欲しいのであれば、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span><span class="o">?</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">]</span><span class="o">??</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="o">!</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>とすればかなり短く書けます。<br/>
しかしながら、素人にとって <strong>オプショナル型</strong> や <strong>アンラップ</strong> は相当わかりにくいと言えます。<br/>
これが<code>SwiftyJson</code>を利用することで細かい上記のことを気にすることなく、<br/>
WEBで扱うようにJSONを扱えます。<br/>
もちろんSwiftでは重要なことなので、<br/>
<a href="http://qiita.com/maiki055/items/b24378a3707bd35a31a8">どこよりも分かりやすいSwiftの&#8221;?&ldquo;と&rdquo;!&#8221;</a>を参考に正しく理解しましょう。</p>

<p>さて、<code>SwiftyJson</code>を使うと次のように書けます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">let</span> <span class="n">json</span> <span class="o">=</span> <span class="n">JSON</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>多少行数は増えているものの、<br/>
<strong>オプショナル型</strong> の <strong>アンラップ化</strong> を気にせず書けていることがわかると思います。<br/>
そう、まるでWEBでJSONを扱うかのように&hellip;。</p>

<p>オプショナル型の値が内部にオプショナル型の値を持っているなど、<br/>
<code>??</code>と書く状況を作りかねないことがあっても<code>SwiftyJson</code>では考えなくて良いんですね。<br/>
う〜ん。便利。</p>

<p>他にもたくさんの使い道があるため機会があれば積極的に利活用していこうと思います。<br/>
また、これまでスルーしてきた他の便利ライブラリについてもちょくちょくその便利さを追求していこうと思います。</p>

<p>と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swift2.0で追加された新機能を見てみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/29/swift-2-new-function/"/>
    <updated>2016-02-29T21:38:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/29/swift-2-new-function</id>
    <content type="html"><![CDATA[<h4>今更だけど見てみたいSwift2.0で追加された新機能</h4>

<p>さて、本日は表題通り、今更なんだけど&hellip;Swift2.0で追加された新機能について見ていきたいと思います。<br/>
Swift2.0では下記3つの新機能が追加されました。</p>

<ul>
<li><code>guard statement</code></li>
<li><code>do-catch</code>, <code>try</code>, <code>defer</code></li>
<li><code>Protocol Extension</code></li>
</ul>


<p>これらの使いどころやメリットなど見ていきたいと思います。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>guard statementについて</h4>

<p>まずは<code>guard statement</code>について見ていきます。</p>

<h5>用途について</h5>

<p>条件分岐(<code>if 〜 else 〜</code>)で利用します。<br/>
例えば、Open Weather Map APIでのリクエストでは</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">value</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="nl">weatherArray:</span><span class="n">AnyObject</span><span class="o">?</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">weather</span> <span class="o">=</span> <span class="n">weatherArray</span><span class="o">?</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="n">guard</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="n">as</span><span class="o">?</span> <span class="n">String</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="c1">// 値の取得に失敗した場合</span>
</span><span class='line'>              <span class="k">return</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>のように書くことができます。<br/>
以前であれば、下記のようにこれでもかってくらいネストしていたのですが、可読性が向上します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Alamofire</span><span class="p">.</span><span class="n">request</span><span class="p">(.</span><span class="n">GET</span><span class="p">,</span> <span class="s">&quot;http://api.openweathermap.org/data/2.5/weather?APPID=&lt;あなた自身のAPPID&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nl">parameters:</span><span class="p">[</span><span class="s">&quot;q&quot;</span><span class="o">:</span><span class="n">location</span><span class="p">]).</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Void</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">isSuccess</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="n">let</span> <span class="n">value</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">if</span> <span class="n">let</span> <span class="n">weatherArray</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s">&quot;weather&quot;</span><span class="p">]</span> <span class="p">{</span>
</span><span class='line'>                  <span class="k">if</span> <span class="n">let</span> <span class="n">weather</span> <span class="o">=</span> <span class="n">weatherArray</span><span class="o">?</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
</span><span class='line'>                      <span class="k">if</span> <span class="n">let</span> <span class="n">description</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="s">&quot;description&quot;</span><span class="p">]</span> <span class="n">as</span><span class="o">?</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>                          <span class="n">print</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
</span><span class='line'>                      <span class="p">}</span>
</span><span class='line'>                  <span class="p">}</span>
</span><span class='line'>              <span class="p">}</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>do-catch, try, deferについて</h4>

<p>続いて、<code>do-catch</code>, <code>try</code>, <code>defer</code>について見ていきます。</p>

<h5>用途について</h5>

<p>基本的には、例外処理を実行したい場合に使います。<br/>
想定外の例外が発生した場合にアプリが落ちないようにしないことはもちろんのこと、<br/>
想定した例外処理が発生した場合にもそれ相応の処理を実施することがあるので、<br/>
そういったときに使います。</p>

<p>まずは、呼び出し元を書きます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// エラー種別の設定</span>
</span><span class='line'><span class="k">enum</span> <span class="nl">MyError:</span> <span class="n">ErrorType</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">NilError</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">StringError</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// サンプルメソッド</span>
</span><span class='line'><span class="n">func</span> <span class="n">sampleMethod</span><span class="p">(</span><span class="nl">param:</span> <span class="n">String</span><span class="o">?</span><span class="p">)</span> <span class="n">throws</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">defer</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="s">&quot;メソッドが呼ばれました！&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="n">param</span> <span class="o">==</span> <span class="nb">nil</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">throw</span> <span class="n">MyError</span><span class="p">.</span><span class="n">NilError</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">param</span> <span class="o">==</span> <span class="s">&quot;Error&quot;</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">throw</span> <span class="n">MyError</span><span class="p">.</span><span class="n">StringError</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">param</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>throw</code>で例外を投げる際にエラー種別を渡す必要があるため、エラー種別を設定します。<br/>
<code>defer</code>は例外発生の有無に関わらず、 <strong>必ず実行する処理内容</strong> を書きます。</p>

<p>続いて、呼び出し先を書きます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">do</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">try</span> <span class="n">self</span><span class="p">.</span><span class="n">sampleThrowMethod</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span> <span class="n">catch</span> <span class="n">MyError</span><span class="p">.</span><span class="n">NilError</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="s">&quot;nilがパラメータとして渡されました&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span> <span class="n">catch</span> <span class="n">MyError</span><span class="p">.</span><span class="n">StringError</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="s">&quot;Error文字列がパラメータとして渡されました&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span> <span class="n">catch</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">print</span><span class="p">(</span><span class="s">&quot;想定外のErrorが発生しました&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>do-catch</code>は例外発生別にその後の処理を分けるために利用します。<br/>
<code>try!</code>で強制実行する場合は<code>do-catch</code>は不要ですが、<br/>
アプリがダウンしては元も子もないのでオススメしません。</p>

<h4>Protocol Extension</h4>

<p>最後に<code>Protocol Extension</code>です。</p>

<h5>用途について</h5>

<p>筆者のイメージではObjective-Cで言うところの <strong>カテゴリ</strong> の用途に近いのかなと思っています。<br/>
Objective-Cのカテゴリと異なるのは指定した既存クラスにメソッドを追加するのではなく、<br/>
<strong>プロトコル</strong> にメソッドを追加するので拡張性や柔軟性が高いようです。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// MyProtocol.swift</span>
</span><span class='line'><span class="n">protocol</span> <span class="n">MyProtocol</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">func</span> <span class="n">pico</span><span class="p">()</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">extension</span> <span class="n">MyProtocol</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">func</span> <span class="n">pico</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">print</span><span class="p">(</span><span class="s">&quot;プロトコルメソッドを追加しました&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>定義したメソッドを下記のように呼び出せます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// ViewController.swift</span>
</span><span class='line'><span class="n">class</span> <span class="nl">ViewController:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">MyProtocol</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">override</span> <span class="n">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">self</span><span class="p">.</span><span class="n">pico</span><span class="p">()</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>まとめ</h4>

<p>さて如何でしたでしょうか？<br/>
今更ですが、Swift2.0の新機能について見てきました。<br/>
個人的には<code>guard statement</code>はかなり利用したいなと思っています。<br/>
ネストが多発しがちなSwiftでは活躍の場面が目に浮かびます。<br/>
<code>do-catch</code>は待ち望んだ機能ですし、逆に今までなかったのが信じられないくらいですよね？<br/>
より安定したSwift製アプリを作成することができると想像するとワクワクしますね。</p>

<p>といったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[『Swiftビギナーズ勉強会 第１３回』に参加してきました]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/20/swift-beginners-study-13/"/>
    <updated>2016-02-20T13:51:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/20/swift-beginners-study-13</id>
    <content type="html"><![CDATA[<h4>始めに</h4>

<p>本日は<a href="http://eventdots.jp/event/578498">Swiftビギナーズ勉強会 第１３回</a>に参加してきました。<br/>
筆者はiPhoneアプリ開発自体は4年近く前から関わっているものの<br/>
(初めはWebViewを使ったハイブリッドアプリから携わり、後にフルネイティブに&hellip;)、<br/>
多くはObjective-Cで書いてきたため、Swiftでのコーディング経験は長くありません。<br/>
そういった経緯や、iOS関連の勉強会を探していたこともあり、<br/>
良い機会だと思って参加することにしました。</p>

<p>今回の勉強会の概要はこちらの資料で説明頂きました。<br/>
<a href="http://www.slideshare.net/YoshinoriKoba/swiftswift">概要資料</a></p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>ショートセッション</h4>

<ol>
<li><p>Swift × WordPress SwiftからWP REST APIを使ってWordPressの記事をリストする<br/>
<a href="http://www.slideshare.net/YoshinoriKoba/swift-wordpressswift-wp-rest-apiwordpressswift-160220">発表資料</a></p>

<ul>
<li>メモ

<ul>
<li>デバッグ方法に関するリンク<br/>
<a href="http://blogios.stack3.net/archives/776">Xcodeでのデバッグ方法</a></li>
<li>WP REST APIを使ったときにATSに関するエラーが発生した<br/>
HTTPSサーバを用意するのはハードルがあるので、plistの設定で対応した</li>
</ul>
</li>
<li>感想

<ul>
<li>個人的には<a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJson</a>を使ったことがなく、やっぱり使った方が良いのかなと</li>
<li>最近オープンに公開されているAPIがHTTPだと、ATSに引っかかるので、世の中のオープンなAPIが載っているサーバはHTTPSになっていくのかなと</li>
</ul>
</li>
</ul>
</li>
<li><p>mBaaSの基本的な扱い方の事始め</p>

<ul>
<li>参考URL

<ul>
<li><a href="http://qiita.com/fumiyasac@github/items/53d9d45d880b0e523417">ニフティクラウドmobile backendの事始めと導入手順まとめ</a></li>
<li><a href="http://qiita.com/fumiyasac@github/items/7549acb9610860de1733">ニフティクラウドmobile backendを利用した画像付きメモアプリ作成のポイントまとめ</a></li>
</ul>
</li>
<li>メモ

<ul>
<li>Coffre, 10秒虫食い算アプリ</li>
<li><a href="https://parse.com/">Parse</a>とNCMBの比較</li>
<li>Parseは <strong>2017/01/29(日本時間)</strong> でサービス終了するのでNCMBに乗り換えたい</li>
<li>ParseサーバのソースはGitHubに公開されている</li>
<li>Parseサーバのソースを見るとNode.js(Express)とMongoDBを利用している</li>
<li>Frameworkが提供されているので、Referenceに従ってアプリ側にソースを実装していけば、自分でREST API叩くだとかしなくて良い模様</li>
<li>FrameworkはObjective-C製なので、Bridge-Headerの作成が必要</li>
<li>NCMBはParseと大差なさそう</li>
<li>NCMBは日本語のコミュニティやフォーラムなどがあるので安心</li>
</ul>
</li>
<li>感想

<ul>
<li>いつも自分でNode.jsとMongoDBで構築しちゃうからmBaaS使ったことなかったな〜</li>
</ul>
</li>
</ul>
</li>
<li><p>iOS9で楽になったAutoLayout<br/>
<a href="https://speakerdeck.com/satotakeshi/shi-utukiyanai-ios9dele-ninatutaauto-layout">発表資料</a></p>

<ul>
<li>メモ

<ul>
<li>iOS6で誕生したAutoLayout</li>
<li>徐々に進化して&hellip;iOS9でStackView, NSLayoutAnchorsが出た</li>
<li>入れ子で複雑なレイアウトをStackViewで実現可能</li>
<li>これで等間隔にviewとか並べられるよ</li>
<li>iOS8まではspacingのviewを作成して、それぞれAutoLayoutをつけていた&hellip;</li>
<li>NSLayoutAnchorsが出たことでコードでも1行で制約を書ける(かなりソースコードが短縮される)</li>
<li>NSLayoutConstraintはたいへんだった</li>
<li>Visual Format Language → 複数の制約を一気につけれるが、不正な記法が判明するのが実行時&hellip;。記法が独特すぎる&hellip;</li>
</ul>
</li>
<li>感想

<ul>
<li>Dynamic Typeってあまり気にしたことなかった&hellip;</li>
</ul>
</li>
</ul>
</li>
<li><p>Linterを使って快適なチーム開発をしよう!<br/>
<a href="https://speakerdeck.com/akatsuki174/linterwoshi-tutekuai-shi-natimukai-fa-wosiyou">発表資料</a></p>

<ul>
<li>メモ

<ul>
<li>SwiftLintの話</li>
<li>『(』で引っかかる場合はautocorrect実行してやれば良い</li>
<li>バージョンアップの頻度が高い</li>
</ul>
</li>
<li>感想

<ul>
<li>先日、気になって取り組んだところだったので、復習になった</li>
</ul>
</li>
</ul>
</li>
</ol>


<h4>もくもく会</h4>

<p>ショートセッションの後にもくもく会の時間がありました。<br/>
あまりテーマを決めていなかったものの、1時間〜1時間30分程度の時間だったため、<br/>
あまり大きなことはやらずに基本的なところから見直してみることにしました。</p>

<p>そこで、Swift2.0から追加された新機能3つを試してみることにしました。</p>

<ul>
<li><code>do-catch</code>, <code>try</code>, <code>defer</code></li>
<li><code>guard</code></li>
<li><p><code>Protocol Extension</code></p></li>
<li><p>参考URL</p>

<ul>
<li><a href="https://moneyforward.com/engineers_blog/2015/06/17/swift2/">Swift2.0で追加された新機能 3選</a></li>
<li><a href="http://llcc.hatenablog.com/entry/2015/06/13/235129">Swift2.0で追加されたguard statementを試してみる</a></li>
</ul>
</li>
</ul>


<h4>まとめ</h4>

<p>今回、初めてSwiftビギナーズ勉強会に参加させて頂きましたが、<br/>
日本にはこんなにも幅広い年齢層、職種(専門プログラミングがSwift以外)の方々がSwiftに興味を示しているのだと改めて感じました。<br/>
Objective-Cであれば、基本的なところは抑えられていると思えるようになってきましたが、<br/>
Swiftに関してはまだまだ経験不足で学ぶべきところが多いと感じたのも事実です。<br/>
だからこそやり甲斐があり、モチベーションが上がるんですけどね。<br/>
といったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SwiftでNSDateFormatterを使ってNSDateからStringに変換してみる！]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/19/swift-date/"/>
    <updated>2016-02-19T23:17:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/19/swift-date</id>
    <content type="html"><![CDATA[<h4>NSDateFormatterとは</h4>

<p>さて、本日は<code>NSDateFormatter</code>について見ていきます。<br/>
<code>NSDateFormatter</code>は</p>

<ul>
<li><code>NSDate</code>から<code>String</code>へ変換する際に指定するフォーマットオブジェクト</li>
<li><code>String</code>から<code>NSDate</code>へ変換する際に指定するフォーマットオブジェクト</li>
</ul>


<p>として使ったりします。<br/>
(他にも<code>NSCalendar</code>等々で利用します。)<br/>
基本的な変換は下記のようにできます。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">convertStringFromDate</span><span class="p">(</span><span class="nl">date:</span> <span class="n">NSDate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">dateFormatter</span> <span class="o">=</span> <span class="n">NSDateFormatter</span><span class="p">()</span>
</span><span class='line'>  <span class="n">dateFormatter</span><span class="p">.</span><span class="n">dateFormat</span> <span class="o">=</span> <span class="s">&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">dateFormatter</span><span class="p">.</span><span class="n">stringFromDate</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>続いて、よく利用する各種設定について見ていきましょう。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>NSTimeZoneについて</h4>

<p><code>NSTimeZone</code>はグリニッジ標準時と各地域の標準時の時差情報を持ったクラスです。<br/>
このクラスを利用することで、欲しい時差情報を含んだ日付を取得できます。</p>

<p>例えば下記のような形です。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">convertStringFromDate</span><span class="p">(</span><span class="nl">date:</span> <span class="n">NSDate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">dateFormatter</span> <span class="o">=</span> <span class="n">NSDateFormatter</span><span class="p">()</span>
</span><span class='line'>  <span class="n">dateFormatter</span><span class="p">.</span><span class="n">timeZone</span> <span class="o">=</span> <span class="n">NSTimeZone</span><span class="p">.</span><span class="n">defaultTimeZone</span><span class="p">()</span>
</span><span class='line'>  <span class="n">dateFormatter</span><span class="p">.</span><span class="n">dateFormat</span> <span class="o">=</span> <span class="s">&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">dateFormatter</span><span class="p">.</span><span class="n">stringFromDate</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>NSTimeZone</code>には<code>systemTimeZone</code>, <code>defaultTimeZone</code>, <code>localTimeZone</code>, 直接地域を指定する方法があります。</p>

<ul>
<li><code>systemTimeZone</code>:<br/>
設定 > 一般 > 日付と時刻 で設定されている地域のタイムゾーンを返却する</li>
<li><code>defaultTimeZone</code>:<br/>
アプリで設定された地域のタイムゾーン<br/>
アプリで設定されていない場合は<code>systemTimeZone</code>を返却する</li>
<li><code>localTimeZone</code>:<br/>
<code>defaultTimeZone</code>への参照値を返却する</li>
<li>直接タイムゾーンを指定:<br/>
<code>GMT</code>, <code>UTC</code>, <code>ja_JP</code>, <code>en_US</code>などの地域を指定することで、指定地域のタイムゾーンを返却する</li>
</ul>


<p>仮に、それぞれのタイムゾーンの設定をして文字列を出力してみると、</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="nl">systemTimeZone:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">23</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.550000</span>
</span><span class='line'><span class="nl">defaultTimeZone:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">23</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.550000</span>
</span><span class='line'><span class="nl">localTimeZone:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">23</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.550000</span>
</span><span class='line'><span class="nl">GMT:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">14</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.551000</span>
</span><span class='line'><span class="nl">UTC:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">14</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.551000</span>
</span><span class='line'><span class="nl">ja_JP:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">23</span><span class="o">:</span><span class="mi">27</span><span class="o">:</span><span class="mf">37.551000</span>
</span></code></pre></td></tr></table></div></figure>


<p>といった感じです。</p>

<h4>NSLocaleについて</h4>

<p><code>NSLocale</code>は言語や分化などの情報を持ったクラスです。<br/>
このクラスを利用することで、欲しい言語や分化の地域情報を含んだ日付を取得できます。</p>

<p>利用方法は下記のようになります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">func</span> <span class="n">convertStringFromDate</span><span class="p">(</span><span class="nl">date:</span> <span class="n">NSDate</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">let</span> <span class="n">dateFormatter</span> <span class="o">=</span> <span class="n">NSDateFormatter</span><span class="p">()</span>
</span><span class='line'>  <span class="n">dateFormatter</span><span class="p">.</span><span class="n">locale</span> <span class="o">=</span> <span class="n">NSLocale</span><span class="p">.</span><span class="n">currentLocale</span><span class="p">()</span>
</span><span class='line'>  <span class="n">dateFormatter</span><span class="p">.</span><span class="n">dateFormat</span> <span class="o">=</span> <span class="s">&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">dateFormatter</span><span class="p">.</span><span class="n">stringFromDate</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>systemLocale</code>:<br/>
設定 > 一般 > 日付と時刻 で設定されている地域の情報を返却する</li>
<li><code>currentLocale</code>:<br/>
現在のユーザで設定されている地域の情報を返却する<br/>
マルチユーザ環境下であれば、違いが出ると思います。</li>
</ul>


<p>地味に文字列変換って面倒だったりするんですよね&hellip;。<br/>
とは言え、アプリを世界対応させる場合は、<br/>
ユーザの設定している <strong>日付と時刻</strong> に注意を配ることが大切です。</p>

<p>と言ったところで本日はここまで。</p>

<p>参考:</p>

<ul>
<li><a href="http://aqubiblog.blogspot.jp/2012/11/ios.html">iOSの日付処理まとめ</a></li>
</ul>


<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sansan×SONYアプリ勉強会に参加しました]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/16/sansan-sony-study/"/>
    <updated>2016-02-16T19:26:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/16/sansan-sony-study</id>
    <content type="html"><![CDATA[<h4>Sansan×SONYアプリ勉強会</h4>

<p>本日は勉強会への参加報告です。<br/>
<a href="http://connpass.com/event/25411/">Sansan×SONYアプリ勉強会</a>に参加してきました。<br/>
なかなか参加したいアプリ関連の勉強会って少ないんですが、今回は面白そうだなと思って、結構、早めに申し込んでいました。<br/>
当日見てみるとキャンセル待ちも数十名になっていたので、珍しく早めに申し込んで良かったなと思いました。<br/>
では、早速、筆者が今回の勉強会で得た感想等々を書いていきます。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>チームでのiOSアプリ開発</h4>

<p>個人で開発するときはさして困らないものの、<br/>
チームで開発すると途端に困る&hellip;それがコンフリクトであることは周知の事実ですが、<br/>
それを如何にして減らしていけるのか<br/>
そんな話を聞いてきました。</p>

<p><a href="http://www.slideshare.net/ssuser65a265/ios-58353672?ref=http://connpass.com/event/25411/presentation/?utm_campaign=new_event_links_to_participant&amp;utm_source=notifications&amp;utm_medium=email&amp;utm_content=detail_btn">スライドシェアの資料</a></p>

<p><strong>【コンフリクトが起こった原因】</strong></p>

<ul>
<li>開発スタイル

<ul>
<li>命名規則, ハードタブとソフトタブが入り交じる, commitの粒度&hellip;は人によって異なる</li>
<li>チーム内の基準を設ける必要がある(Cocoa向けコーディングガイドラインなど)</li>
<li>GitHubとPullRequestで互いにレビューをし合うことで問題を早期発見</li>
</ul>
</li>
<li>Storyboard

<ul>
<li>同時に画面を作ると、コンフリクトが起こるので、複数画面が同じStoryboardに入るのをやめる</li>
<li>1画面1つのStoryboardで作った</li>
</ul>
</li>
<li>Localizable.strings

<ul>
<li>日本語だとUTF-16なのできれいにマージできず、GitHubでdiffが見れない</li>
<li>同時に実装を進めるとコンフリクトが起こる</li>
<li>機能単位に分割して取り組むと良い</li>
</ul>
</li>
<li>project.pbxproj

<ul>
<li>大きい機能追加だと確実にコンフリクトが発生</li>
<li>Editorでも開けないので、完全手直しになる&hellip;</li>
<li><a href="https://github.com/simonwagner/mergepbx">mergepbx</a>を使った

<ul>
<li>α版だったので、適用後に必ず目を通すことにした</li>
</ul>
</li>
</ul>
</li>
<li>証明書 (Code Signing)

<ul>
<li>Xcode上で『Fix Issue』ボタンのあるアラートが出たとき、『Fix Issue』を押すと困ることが起こる</li>
<li>Appleのストレージから証明書をRevokeして秘密鍵が行方不明, CIサーバまで影響なんてことが&hellip;</li>
<li>『Fix Issue』は押さないようにチームで決めた</li>
<li>チームで一人はProvisioning Profileや証明書のことがわかる人を入れる</li>
</ul>
</li>
</ul>


<p><strong>【まとめ】</strong></p>

<ul>
<li>Xcodeでの複数人開発には工夫が必要</li>
<li>マージにかかる労力を減らす→開発前に対策するのが理想</li>
<li>『Fix Issue』は何も解決しないので押さない</li>
</ul>


<h4>家電と繋がるアプリの開発 &ndash; リモコン＆テレビ番組表アプリ &ldquo;TV SideView&rdquo; の事例</h4>

<p>こちらはSONYが出している『TV SideView』アプリに関する話でした。</p>

<p><strong>【目指していること】</strong></p>

<ul>
<li>新しい・優れたユーザ体験(UX)の追求</li>
<li>理想のUX実現のために『家電, モバイル, ゲーム, アプリ』と横断して開発する</li>
</ul>


<p><strong>【家電とアプリの繋がり例】</strong></p>

<ul>
<li><a href="https://www.google.co.jp/chrome/devices/chromecast/">Chrome Cast</a> / <a href="http://www.google.co.jp/intl/ja_jp/nexus/player/">Nexus Player</a> / AirPlay</li>
<li><a href="https://nest.com/">Nest</a></li>
<li><a href="https://nest.com/camera/meet-nest-cam/">Dropcam</a></li>
</ul>


<p><strong>【家電とアプリが繋がることについて】</strong></p>

<ul>
<li>家電の操作について

<ul>
<li>アプリの機能: リモコン画面をスマホに表示, アプリから番組を選択, 番組の視聴/予約</li>
<li>長所: 高度な操作指示が可能なUIを実装できる, ネットワーク・電波があればどこでも使える

<ul>
<li>高度な操作の例: 家の中の機器をまとめて操作することができる</li>
</ul>
</li>
<li>短所: アプリ起動の手間, ブラインド操作できない, 操作フィードバックがない</li>
</ul>
</li>
<li>アプリが家電のディスプレイになる

<ul>
<li>画面のない家電の画面にアプリがなれる</li>
<li>手元にない家電の操作ができる</li>
<li>画面のある家電であっても、セカンドディスプレイになれる</li>
</ul>
</li>
<li>アプリならではの良さ

<ul>
<li>番組の詳細情報の閲覧ができる</li>
<li>人気番組を知る(予約数の人気ランキングで見せる)</li>
</ul>
</li>
<li>スマホが家電のセンサーになる

<ul>
<li>近くの家電を見つける</li>
<li>ユーザの接近を知る</li>
<li>ユーザ行動による家電の操作</li>
<li>音声入力</li>
<li>着信に応じて音量を下げる</li>
</ul>
</li>
<li>家電をパーソナライズ

<ul>
<li>モバイル端末の履歴からおすすめの番組をレコメンド</li>
</ul>
</li>
</ul>


<p><strong>【家電のUXの進化について】</strong></p>

<ul>
<li>アプリと繋がることで家電のUXの進化を加速</li>
<li>アプリであれば機能追加やアップデートが容易なので、家電と組み合わせることでUXの進化が劇的に加速する</li>
</ul>


<p><strong>【家電とアプリを繋げることの大変さ】</strong></p>

<ul>
<li>予約操作はTCPで → 信頼性を重視</li>
<li>機器検索やリモコンマウスカーソル機能はUDPで → パフォーマンスを重視</li>
<li>家電とクラウドサーバでは、可用性と反応速度が大きく異なる</li>
<li>ハード性能・コストの制約</li>
<li>家電の状態変化に対応できるアプリに&hellip;(リモコンで急遽、OFFにされるとか)</li>
<li>世界で10万台以上の家電がBotなどに感染されている&hellip;</li>
</ul>


<p><strong>【SONYでは】</strong></p>

<ul>
<li>TV SideView 1400万DL達成</li>
<li>データドリブンによるアプリ改善(機能の利用頻度, アクセス数を解析)</li>
<li>6週リリース体制(スクラム開発を導入)</li>
</ul>


<h4>アプリの不具合を少なくするために</h4>

<p><a href="http://www.slideshare.net/kenichitatsuhama/ss-58316068">スライドシェアの資料</a></p>

<p><strong>【勉強になったこと】</strong></p>

<ul>
<li>外注では品質担保が難しいというのが通例なのかもしれない</li>
<li>Android Studio Inspect Codeは良さそうなので使ってみたい</li>
<li>InferをInspect Codeと併用させるのはあり</li>
<li>設定で「アクティビティを保持しない」にすることで想定通りの動作をするか見ることで、堅牢なアプリになる<br/>
onCreateを通らない値は復帰しないと覚えておく(想定していた処理が呼ばれない, パラメータがないとかならないように&hellip;)</li>
<li>ViewPagerではFragmentは3つまでしか保持しないので注意</li>
<li><a href="http://tatsu-zine.com/books/master-of-fragments">Master of Fragment (Android Professional Developerシリーズ)</a>は良いらしい</li>
</ul>


<p><strong>【お役立ちツール】</strong></p>

<ul>
<li><a href="https://github.com/RobotiumTech/robotium">Robotium</a></li>
<li><a href="http://eclemma.org/jacoco/">Jacoco</a></li>
</ul>


<h4>Android / iOS アプリのコード共有 &ndash; J2ObjC を使ってみた &ndash;</h4>

<p>J2ObjCは個人的に気になっていたので、話が聞けて良かったです。</p>

<p><strong>【J2ObjCを使うきっかけ】</strong></p>

<ul>
<li>家電連携以上の価値を生み出したい</li>
<li>開発効率を上げる事で目指す</li>
<li>Android開発に強い人が多い</li>
<li>開発の段階、段階で適用が可能</li>
</ul>


<p><strong>【J2ObjCの特徴】</strong></p>

<ul>
<li>Native UI非対応 → UIはPlatform Nativeで開発したほうが良いというスタンス</li>
<li>ビルドが複雑</li>
<li>あくまでも開発量・メンテナンスコストの削減になるのであり、単一コードになるわけではない</li>
</ul>


<p><strong>【J2ObjCを使った結果のサンプル】</strong></p>

<ul>
<li>19%の開発量の削減ができた</li>
<li>Bluetoothの接続・通信開始処理も実装できた</li>
<li>JUnitのテストコードも変換された</li>
</ul>


<p><strong>【お役立ちツール】</strong></p>

<ul>
<li><a href="https://github.com/tomball/j2objc-sample-reversi">j2objc-sample-reversi</a></li>
</ul>


<p>今回、アプリ系の勉強会に久々に参加しましたが、<br/>
自分自身まだまだ知らないこともたくさんあるので非常に勉強になりました。<br/>
また、継続して、気になった勉強会には参加していきたいと思います。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SwiftLintを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/13/swift-lint/"/>
    <updated>2016-02-13T21:17:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/13/swift-lint</id>
    <content type="html"><![CDATA[<h4>SwiftLintを使ってコード規約に則ったチーム開発を目指そう！</h4>

<p>本日は<a href="https://github.com/realm/SwiftLint">SwiftLint</a>を紹介したいと思います。</p>

<p>SwiftLintとは<br/>
チーム内で1つのコード規約に則って開発することを補佐してくれる静的解析ツールです。</p>

<p>JavaScriptであれば<a href="http://www.jslint.com/">JSLint</a>や<a href="http://jshint.com/">JSHint</a>(最近であれば<a href="http://eslint.org/">ESLint</a>でしょうか)ですし、<br/>
Objective-Cであれば<a href="http://oclint.org/">OCLint</a>が主流かと思います。<br/>
それのSwift版ですね。</p>

<p>筆者はあまり大規模なチーム開発を経験したことがないので、<br/>
SwiftLintを使ったことがありません。<br/>
なので、逆に新鮮な心持ちで使い方や良いなと思う点について紹介できればと思っています。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>SwiftLintの導入方法</h4>

<p>早速、SwiftLintを導入していきましょう。</p>

<p>1．homebrewでインストール<br/>
下記コマンドでSwiftLintをインストールできます。<br/>
<code>brew install swiftlint</code></p>

<p>2．SwiftLintを適用したいXcodeプロジェクトの設定を変更<br/>
下図のように <strong>Run Script</strong> を追加しましょう。<br/>
<img src="http://grandbig.github.io/images/swiftlint-1.png" alt="Run Scriptの追加" /></p>

<p>続いて、下記のShell Scriptを記載しましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="k">if</span> <span class="n">which</span> <span class="n">swiftlint</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span><span class="p">;</span> <span class="n">then</span>
</span><span class='line'>  <span class="n">swiftlint</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">echo</span> <span class="s">&quot;SwiftLint does not exist, download from https://github.com/realm/SwiftLint&quot;</span>
</span><span class='line'><span class="n">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://grandbig.github.io/images/swiftlint-2.png" alt="Shell Scriptを記載" /></p>

<p>たったこれだけで準備完了です。<br/>
非常に簡単ですね！</p>

<h4>SwiftLintを使ってみよう</h4>

<p>導入ができたので、SwiftLintを使っていきたいと思います。<br/>
因みに、今回導入したSwiftLintはバージョン <strong>0.8.0</strong> です。</p>

<p>実際にBuildしてみるとわかるのですが、<br/>
デフォルトで設定されているチェック内容では厳しすぎて気が遠くなります&hellip;。<br/>
特にCocoaPodsでオープンソースのライブラリをプロジェクトに追加している場合、<br/>
おびただしい数のErrorとWarningが出ます。</p>

<p><img src="http://grandbig.github.io/images/swiftlint-3.png" alt="OSSライブラリもひっかかる" /></p>

<p>よって設定をカスタム化したいと思います。<br/>
カスタム化は非常に簡単です。</p>

<p>xcodeprojファイルと同階層に<code>.swiftlint.yml</code>ファイルを作成します。<br/>
このファイルに設定可能なものは下記になります。</p>

<ul>
<li><code>disabled_rules</code><br/>
デフォルトで有効となっているルールの中から無効にしたいルールを設定</li>
<li><code>opt_in_rules</code><br/>
デフォルトで無効となっているルールの中から有効にしたいルールを設定</li>
<li><code>whitelist_rules</code><br/>
他の2つとの併用はできず、これに記載したルールのみ適用したい場合に設定</li>
<li><code>included</code><br/>
SwiftLintの対象に含めるファイルのパスを記載</li>
<li><code>excluded</code><br/>
SwiftLintの対象から外すファイルのパスを記載</li>
</ul>


<p><code>.swiftlint.yml</code>を作成する前のデフォルト設定は下図の通りです。<br/>
<code>swiftlint rules</code>とコマンドを打てば確認できます。</p>

<p><img src="http://grandbig.github.io/images/swiftlint-4.png" alt="SwiftLintのデフォルト設定" /></p>

<p>因みに、SwiftLintのコマンドは下記です。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">Available</span> <span class="nl">commands:</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">autocorrect</span>   <span class="n">Automatically</span> <span class="n">correct</span> <span class="n">warnings</span> <span class="n">and</span> <span class="n">errors</span>
</span><span class='line'>  <span class="n">help</span>          <span class="n">Display</span> <span class="n">general</span> <span class="n">or</span> <span class="n">command</span><span class="o">-</span><span class="n">specific</span> <span class="n">help</span>
</span><span class='line'>  <span class="n">lint</span>          <span class="n">Print</span> <span class="n">lint</span> <span class="n">warnings</span> <span class="n">and</span> <span class="n">errors</span> <span class="p">(</span><span class="k">default</span> <span class="n">command</span><span class="p">)</span>
</span><span class='line'>  <span class="n">rules</span>         <span class="n">Display</span> <span class="n">the</span> <span class="n">list</span> <span class="n">of</span> <span class="n">rules</span> <span class="n">and</span> <span class="n">their</span> <span class="n">identifiers</span>
</span><span class='line'>  <span class="n">version</span>       <span class="n">Display</span> <span class="n">the</span> <span class="n">current</span> <span class="n">version</span> <span class="n">of</span> <span class="n">SwiftLint</span>
</span></code></pre></td></tr></table></div></figure>


<p>筆者が作成した<code>.swiftlint.yml</code>ファイルは下記になります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="nl">disabled_rules:</span>
</span><span class='line'><span class="cp"># コードの記載のない改行を許可したい</span>
</span><span class='line'><span class="o">-</span> <span class="n">trailing_whitespace</span>
</span><span class='line'><span class="cp"># ネスト1つで怒られるのでDisableにしたい</span>
</span><span class='line'><span class="o">-</span> <span class="n">nesting</span>
</span><span class='line'>
</span><span class='line'><span class="cp"># 追加したOSSライブラリは対象に含めたくない</span>
</span><span class='line'><span class="nl">excluded:</span>
</span><span class='line'><span class="o">-</span> <span class="n">Pods</span><span class="o">/</span>
</span><span class='line'><span class="o">-</span> <span class="n">Podfile</span>
</span><span class='line'><span class="o">-</span> <span class="n">Podfile</span><span class="p">.</span><span class="n">lock</span>
</span><span class='line'>
</span><span class='line'><span class="cp"># 1行あたりの文字数制限を300に変更</span>
</span><span class='line'><span class="cp"># プロジェクト作成時にデフォルトで追加されるコメントをひっかけないため</span>
</span><span class='line'><span class="nl">line_length:</span> <span class="mi">300</span>
</span><span class='line'>
</span><span class='line'><span class="cp"># 変数名の長さのMAXとMINを変更</span>
</span><span class='line'><span class="nl">variable_name:</span>
</span><span class='line'>  <span class="nl">max_length:</span>
</span><span class='line'>    <span class="nl">warning:</span> <span class="mi">60</span>
</span><span class='line'>    <span class="nl">error:</span> <span class="mi">80</span>
</span><span class='line'>  <span class="nl">min_length:</span>
</span><span class='line'>    <span class="nl">warning:</span> <span class="mi">1</span>
</span><span class='line'>    <span class="nl">error:</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>実際に使ってみた結果、<br/>
チームとして開発するには非常に良いのではないかと思いました。<br/>
ただ、デフォルトの設定項目では全てをカバーし切れないことがあるように感じました。<br/>
なので、自前ルールを作成する機会がそれなりにある気がしました。</p>

<p><a href="https://github.com/realm/SwiftLint">SwiftLintのREADME</a>にも記載がある通り、<br/>
SwiftLintでは自前でルールを作成することができます。</p>

<p>といったところで本日はここまで。</p>

<p>参考:</p>

<ul>
<li><a href="http://qiita.com/akatsuki174/items/45205e0f0948f11e9db5">SwiftLintの.swiftlint.yml記述方式とその詳細</a></li>
<li><a href="http://qiita.com/akatsuki174/items/c37dfcae3ff3a79fb8cf">SwiftLint 0.8.0 アップデート内容まとめ</a></li>
</ul>


<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android Studio2.0: TableLayoutを使ってみよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/11/android-tablelayout/"/>
    <updated>2016-02-11T15:15:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/11/android-tablelayout</id>
    <content type="html"><![CDATA[<h4>TableLayoutとは</h4>

<p><code>TabLayout</code>に続いて、本日は、<code>TableLayout</code>を使った画面作成をしたいと思います。<br/>
Androidでの<code>TableLayout</code>はHTMLで言うところの<code>&lt;table&gt;</code>タグに当たり、<br/>
iOSで言うところの<code>UITableView</code>が使いどころとしては近いと思います。</p>

<p>筆者が思うに<code>TableLayout</code>は決まったレイアウトの実装には向いていますが、<br/>
複雑かつオリジナリティの高い画面を作成する際に使うには難しいのかなと感じています。<br/>
何はともあれ、実装に入っていきましょう。</p>

<p>本記事で利用しているAndroid Studioは <strong>Android Studio 2.0 Beta 3</strong> になります。<br/>
(Android Studio 1.5 以上であれば基本的に同じだと思います。)</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->


<h4>TableLayoutを使ってみよう！</h4>

<p>順を追って説明していきます。<br/>
目標として、下図のような画面作成を目指したいと思います。</p>

<p><img src="http://grandbig.github.io/images/android-tablelayout.png" alt="TableLayoutを使った画面" /></p>

<p>これは1行目と4行目は1つのカラムで、2行目と3行目は2つのカラムで構成しています。</p>

<p>1． Android Studioで<code>Blank Activity</code>を選択して、プロジェクトを新規作成<br/>
下記のようなプロジェクト構成ができあがります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">app</span>
</span><span class='line'> <span class="err">┣━━</span> <span class="n">manifests</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">AndroidManifest</span><span class="o">.</span><span class="na">xml</span>
</span><span class='line'> <span class="err">┣━━</span> <span class="n">java</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┣━━</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">takahiro</span><span class="o">.</span><span class="na">tablelayoutapplication</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┃</span>      <span class="err">┗━━</span> <span class="n">MainActivity</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┣━━</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">takahiro</span><span class="o">.</span><span class="na">tablelayoutapplication</span><span class="o">(</span><span class="n">androidTest</span><span class="o">)</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┃</span>      <span class="err">┗━━</span> <span class="n">ApplicationTest</span>
</span><span class='line'> <span class="err">┃</span>    <span class="err">┗━━</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">takahiro</span><span class="o">.</span><span class="na">tablelayoutapplication</span><span class="o">(</span><span class="n">test</span><span class="o">)</span>
</span><span class='line'> <span class="err">┃</span>           <span class="err">┗━━</span> <span class="n">ExampleUnitTest</span>
</span><span class='line'> <span class="err">┗━━</span> <span class="n">res</span>
</span><span class='line'>      <span class="err">┣━━</span> <span class="n">drawable</span>
</span><span class='line'>      <span class="err">┣━━</span> <span class="n">layout</span>
</span><span class='line'>      <span class="err">┃</span>     <span class="err">┣━━</span> <span class="n">activity_main</span><span class="o">.</span><span class="na">xml</span>
</span><span class='line'>      <span class="err">┃</span>     <span class="err">┗━━</span> <span class="n">content_main</span><span class="o">.</span><span class="na">xml</span>
</span><span class='line'>      <span class="err">┣━━</span> <span class="n">menu</span>
</span><span class='line'>      <span class="err">┣━━</span> <span class="n">mipmap</span>
</span><span class='line'>      <span class="err">┗━━</span> <span class="n">values</span>
</span></code></pre></td></tr></table></div></figure>


<p>2．<code>content_main.xml</code>に<code>TableLayout</code>を追加<br/>
続いて、<code>TableLayout</code>をレイアウトファイルに実装していきましょう。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// content_main.xml</span>
</span><span class='line'><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">?&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">LinearLayout</span> <span class="nl">xmlns:</span><span class="n">android</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">app</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">tools</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;0dp&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;0dp&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;0dp&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;0dp&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;#efeff4&quot;</span>
</span><span class='line'>  <span class="nl">app:</span><span class="n">layout_behavior</span><span class="o">=</span><span class="s">&quot;@string/appbar_scrolling_view_behavior&quot;</span>
</span><span class='line'>  <span class="nl">tools:</span><span class="n">context</span><span class="o">=</span><span class="s">&quot;com.example.ec_dev.tablelayoutapplication.MainActivity&quot;</span>
</span><span class='line'>  <span class="nl">tools:</span><span class="n">showIn</span><span class="o">=</span><span class="s">&quot;@layout/activity_main&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;!--</span> <span class="err">構成要素が多くなる場合を踏まえて、画面スクロールを可能にしておく</span> <span class="o">--&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">ScrollView</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/scrollView&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="o">&lt;</span><span class="n">TableLayout</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">stretchColumns</span><span class="o">=</span><span class="s">&quot;0&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="o">&lt;!--</span> <span class="mi">1</span><span class="err">行目</span> <span class="o">--&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="n">TableRow</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              
</span><span class='line'>              <span class="o">&lt;</span><span class="n">TextView</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textAppearance</span><span class="o">=</span><span class="s">&quot;?android:attr/textAppearanceLarge&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">text</span><span class="o">=</span><span class="s">&quot;@string/top_message&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_span</span><span class="o">=</span><span class="s">&quot;2&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/textView&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textSize</span><span class="o">=</span><span class="s">&quot;18sp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>          <span class="o">&lt;/</span><span class="n">TableRow</span><span class="o">&gt;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="o">&lt;!--</span> <span class="mi">2</span><span class="err">行目</span> <span class="o">--&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="n">TableRow</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;#ffffff&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="n">TextView</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">text</span><span class="o">=</span><span class="s">&quot;@string/androidText&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/textView2&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textSize</span><span class="o">=</span><span class="s">&quot;20sp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">gravity</span><span class="o">=</span><span class="s">&quot;center_vertical&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;@dimen/8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="n">ImageButton</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/imageButton&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">src</span><span class="o">=</span><span class="s">&quot;@drawable/ic_android_white_18dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;@color/colorAccent&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_marginRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>          <span class="o">&lt;/</span><span class="n">TableRow</span><span class="o">&gt;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="o">&lt;--</span> <span class="mi">3</span><span class="err">行目</span> <span class="o">--&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="n">TableRow</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;#ffffff&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="n">TextView</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">text</span><span class="o">=</span><span class="s">&quot;@string/animalText&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/textView2&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textSize</span><span class="o">=</span><span class="s">&quot;20sp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">gravity</span><span class="o">=</span><span class="s">&quot;center_vertical&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>              <span class="o">&lt;</span><span class="n">ImageButton</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;44dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/imageButton&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">src</span><span class="o">=</span><span class="s">&quot;@drawable/ic_pets_white_18dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;@color/colorAccent&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_marginRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>          <span class="o">&lt;/</span><span class="n">TableRow</span><span class="o">&gt;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="o">&lt;!--</span> <span class="mi">4</span><span class="err">行目</span> <span class="o">--&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="n">TableRow</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>              <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">&gt;</span>
</span><span class='line'>              
</span><span class='line'>              <span class="o">&lt;</span><span class="n">TextView</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textAppearance</span><span class="o">=</span><span class="s">&quot;?android:attr/textAppearanceLarge&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">text</span><span class="o">=</span><span class="s">&quot;@string/last_message&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">layout_span</span><span class="o">=</span><span class="s">&quot;2&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/textView&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">textSize</span><span class="o">=</span><span class="s">&quot;18sp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span>
</span><span class='line'>                  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;8dp&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>          <span class="o">&lt;/</span><span class="n">TableRow</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">&lt;/</span><span class="n">TableLayout</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="n">ScrollView</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">LinearLayout</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ポイントは下記です。</p>

<ul>
<li><code>TableLayout</code>に<code>android:stretchColumns="0"</code>を設定して、0番目のカラム幅を極力大きくする</li>
<li>1行目と4行目<code>TableRow</code>の<code>TextView</code>は<code>android:layout_span="2"</code>を設定して、カラム2つ分とする</li>
</ul>


<p>その他、必要なケースに合わせてデザインを整えましょう。</p>

<p>因みに、<code>activity_main.xml</code>は以下にしています。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">?&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">design</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">CoordinatorLayout</span> <span class="nl">xmlns:</span><span class="n">android</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">app</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">tools</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">fitsSystemWindows</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>  <span class="nl">tools:</span><span class="n">context</span><span class="o">=</span><span class="s">&quot;com.example.takahiro.tablelayoutapplication.MainActivity&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">design</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">AppBarLayout</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">theme</span><span class="o">=</span><span class="s">&quot;@style/AppTheme.AppBarOverlay&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">v7</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">Toolbar</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/toolbar&quot;</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;?attr/actionBarSize&quot;</span>
</span><span class='line'>          <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;?attr/colorPrimary&quot;</span>
</span><span class='line'>          <span class="nl">app:</span><span class="n">popupTheme</span><span class="o">=</span><span class="s">&quot;@style/AppTheme.PopupOverlay&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;/</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">design</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">AppBarLayout</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">include</span> <span class="n">layout</span><span class="o">=</span><span class="s">&quot;@layout/content_main&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">design</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">CoordinatorLayout</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>デフォルトでは<code>FloatingActionButton</code>が作成されますが、不要なので削除しています。</p>

<p>合わせて、<code>strings.xml</code>も編集しています。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="n">resources</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;app_name&quot;</span><span class="o">&gt;</span><span class="n">TableLayoutApplication</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;action_settings&quot;</span><span class="o">&gt;</span><span class="n">Settings</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;top_message&quot;</span><span class="o">&gt;</span><span class="n">Congratulation</span><span class="o">!!&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;androidText&quot;</span><span class="o">&gt;</span><span class="n">Android</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;animalText&quot;</span><span class="o">&gt;</span><span class="n">Animals</span><span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">string</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;last_message&quot;</span><span class="o">&gt;</span>
</span><span class='line'>      <span class="o">-</span> <span class="k">this</span> <span class="n">page</span> <span class="n">is</span> <span class="n">simple</span> <span class="n">sample</span><span class="o">.</span><span class="err">\</span><span class="n">n</span><span class="o">-</span> <span class="k">this</span> <span class="n">app</span> <span class="n">is</span> <span class="n">simple</span> <span class="n">sample</span> <span class="n">application</span><span class="o">.</span><span class="err">\</span><span class="n">n</span><span class="o">-</span> <span class="n">GO</span><span class="o">!</span> <span class="n">GO</span><span class="o">!</span>
</span><span class='line'>  <span class="o">&lt;/</span><span class="n">string</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">resources</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>レイアウトを作成している途中、レイアウトが想定していない形になったり、崩れてしまったりすることがあるかもしれません。<br/>
そんなときはレイアウトファイル上でリフレッシュボタンをクリックして更新しましょう。</p>

<p><img src="http://grandbig.github.io/images/android-tablelayout-2.png" alt="レイアウトのリフレッシュ" /></p>

<p>さて、如何だったでしょうか？
今回の記事で紹介したProjectのソースは<a href="https://github.com/grandbig/TableLayoutSample">GitHub grandbig/TableLayoutSample</a>に載せてあります。<br/>
ご自由にご利用ください。</p>

<p>因みに、今回はレイアウトの作成に注目して記事を書きました。<br/>
そのため、ボタンアクションなど必要な場合は<code>MainActivity.java</code>に処理を追加してください。<br/>
と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Android Studio2.0: TabLayoutを使ってTabを画面最下部に配置しよう！]]></title>
    <link href="http://grandbig.github.io/blog/2016/02/11/android-tablayout-2/"/>
    <updated>2016-02-11T14:08:00+09:00</updated>
    <id>http://grandbig.github.io/blog/2016/02/11/android-tablayout-2</id>
    <content type="html"><![CDATA[<h4>Tabを最下部に配置する方法について</h4>

<p>さて、本日は簡単な話なのですが、案外ハマったので、メモ代わりに書いておきたいと思います。<br/>
以前、<a href="http://grandbig.github.io/blog/2016/01/30/android-tablayout/">Android Studio2.0: TabLayoutを使ってみよう！</a>でTabLayoutを使ったTabデザインの実装方法について紹介させて頂きました。<br/>
そのときはTabをToolbarのすぐ下に配置していましたが、画面最下部に配置したいことも出てくることでしょう。<br/>
その方法について書きたいと思います。</p>

<p>TabLayoutの配置は<code>content_main.xml</code>に下記のように書きます。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>




<!-- more -->




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">// content_main.xml</span>
</span><span class='line'><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">?&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">RelativeLayout</span> <span class="nl">xmlns:</span><span class="n">android</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">app</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/apk/res-auto&quot;</span>
</span><span class='line'>  <span class="nl">xmlns:</span><span class="n">tools</span><span class="o">=</span><span class="s">&quot;http://schemas.android.com/tools&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingBottom</span><span class="o">=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingLeft</span><span class="o">=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingRight</span><span class="o">=</span><span class="s">&quot;@dimen/activity_horizontal_margin&quot;</span>
</span><span class='line'>  <span class="nl">android:</span><span class="n">paddingTop</span><span class="o">=</span><span class="s">&quot;@dimen/activity_vertical_margin&quot;</span>
</span><span class='line'>  <span class="nl">app:</span><span class="n">layout_behavior</span><span class="o">=</span><span class="s">&quot;@string/appbar_scrolling_view_behavior&quot;</span>
</span><span class='line'>  <span class="nl">tools:</span><span class="n">context</span><span class="o">=</span><span class="s">&quot;com.example.takahiro.tablayoutsample2.MainActivity&quot;</span>
</span><span class='line'>  <span class="nl">tools:</span><span class="n">showIn</span><span class="o">=</span><span class="s">&quot;@layout/activity_main&quot;</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">v4</span><span class="o">.</span><span class="na">view</span><span class="o">.</span><span class="na">ViewPager</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/pager&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_above</span><span class="o">=</span><span class="s">&quot;@+id/tabs&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">&lt;</span><span class="n">android</span><span class="o">.</span><span class="na">support</span><span class="o">.</span><span class="na">design</span><span class="o">.</span><span class="na">widget</span><span class="o">.</span><span class="na">TabLayout</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">id</span><span class="o">=</span><span class="s">&quot;@+id/tabs&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_width</span><span class="o">=</span><span class="s">&quot;match_parent&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_height</span><span class="o">=</span><span class="s">&quot;wrap_content&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">background</span><span class="o">=</span><span class="s">&quot;@color/colorPrimary&quot;</span>
</span><span class='line'>      <span class="nl">app:</span><span class="n">tabSelectedTextColor</span><span class="o">=</span><span class="s">&quot;@color/colorAccent&quot;</span>
</span><span class='line'>      <span class="nl">app:</span><span class="n">tabTextColor</span><span class="o">=</span><span class="s">&quot;#ffffff&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_alignParentBottom</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_alignParentLeft</span><span class="o">=</span><span class="s">&quot;true&quot;</span>
</span><span class='line'>      <span class="nl">android:</span><span class="n">layout_alignParentStart</span><span class="o">=</span><span class="s">&quot;true&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;/</span><span class="n">RelativeLayout</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ポイントは、</p>

<ul>
<li><code>android.support.v4.view.ViewPager</code>に<code>android:layout_above="@+id/tabs"</code>設定</li>
<li><code>android.support.design.widget.TabLayout</code>に<code>android:layout_alignParentBottom</code>, <code>android:layout_alignParentLeft</code>, <code>android:layout_alignParentStart</code>の3つをtrueで設定</li>
</ul>


<p>です。<br/>
これにより、下図のような配置ができているはずです。</p>

<p><img src="http://grandbig.github.io/images/android-tablayout-2.png" alt="Tabを最下部配置" /></p>

<p>なんてことはない単純な話なのですが、<strong>Android Design Support Library</strong> に惑わされてしまいました。  <br/>
もっとAndroidアプリの特にUI・UX周りの開発に精進したいと思います。</p>

<p>と言ったところで本日はここまで。</p>

<script async src="http://grandbig.github.io//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<p><ins class="adsbygoogle"style="display:inline-block;width:320px;height:100px"data-ad-client="ca-pub-2881241309408290"data-ad-slot="6603059167"></ins></p>

<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

]]></content>
  </entry>
  
</feed>
